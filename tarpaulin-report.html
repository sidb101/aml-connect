<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <style>html, body {
  margin: 0;
  padding: 0;
}

.app {
  margin: 10px;
  padding: 0;
}

.files-list {
  margin: 10px 0 0;
  width: 100%;
  border-collapse: collapse;
}
.files-list__head {
  border: 1px solid #999;
}
.files-list__head > tr > th {
  padding: 10px;
  border: 1px solid #999;
  text-align: left;
  font-weight: normal;
  background: #ddd;
}
.files-list__body {
}
.files-list__file {
  cursor: pointer;
}
.files-list__file:hover {
  background: #ccf;
}
.files-list__file > td {
  padding: 10px;
  border: 1px solid #999;
}
.files-list__file > td:first-child::before {
  content: '\01F4C4';
  margin-right: 1em;
}
.files-list__file_low {
  background: #fcc;
}
.files-list__file_medium {
  background: #ffc;
}
.files-list__file_high {
  background: #cfc;
}
.files-list__file_folder > td:first-child::before {
  content: '\01F4C1';
  margin-right: 1em;
}

.file-header {
  border: 1px solid #999;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.file-header__back {
  margin: 10px;
  cursor: pointer;
  flex-shrink: 0;
  flex-grow: 0;
  text-decoration: underline;
  color: #338;
}

.file-header__name {
  margin: 10px;
  flex-shrink: 2;
  flex-grow: 2;
}

.file-header__stat {
  margin: 10px;
  flex-shrink: 0;
  flex-grow: 0;
}

.file-content {
  margin: 10px 0 0;
  border: 1px solid #999;
  padding: 10px;
}

.code-line {
  margin: 0;
  padding: 0.3em;
  height: 1em;
}
.code-line_covered {
  background: #cfc;
}
.code-line_uncovered {
  background: #fcc;
}
</style>
</head>
<body>
    <div id="root"></div>
    <script>
        var data = {"files":[{"path":["/","home","sbhatna2","workspace","aml-connect","node_modules","@tauri-apps","cli","build.rs"],"content":"// Copyright 2019-2023 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\n\nfn main() {\n  ::napi_build::setup();\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","sbhatna2","workspace","aml-connect","node_modules","@tauri-apps","cli","src","lib.rs"],"content":"// Copyright 2019-2023 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\n\nuse napi::{\n  threadsafe_function::{ErrorStrategy, ThreadsafeFunction, ThreadsafeFunctionCallMode},\n  Error, JsFunction, Result, Status,\n};\n\n#[napi_derive::napi]\npub fn run(args: Vec\u003cString\u003e, bin_name: Option\u003cString\u003e, callback: JsFunction) -\u003e Result\u003c()\u003e {\n  let function: ThreadsafeFunction\u003cbool, ErrorStrategy::CalleeHandled\u003e = callback\n    .create_threadsafe_function(0, |ctx| ctx.env.get_boolean(ctx.value).map(|v| vec![v]))?;\n\n  // we need to run in a separate thread so Node.js (e.g. vue-cli-plugin-tauri) consumers\n  // can do work while `tauri dev` is running.\n  std::thread::spawn(move || match tauri_cli::try_run(args, bin_name) {\n    Ok(_) =\u003e function.call(Ok(true), ThreadsafeFunctionCallMode::Blocking),\n    Err(e) =\u003e function.call(\n      Err(Error::new(Status::GenericFailure, format!(\"{:#}\", e))),\n      ThreadsafeFunctionCallMode::Blocking,\n    ),\n  });\n\n  Ok(())\n}\n\n#[napi_derive::napi]\npub fn log_error(error: String) {\n  log::error!(\"{}\", error);\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","build.rs"],"content":"fn main() {\n  tauri_build::build()\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","date_time.rs"],"content":"use std::error::Error;\n\nuse chrono::NaiveDateTime;\nuse diesel::sql_types::Timestamp;\nuse diesel::{prelude::Queryable, sqlite::Sqlite};\nuse serde::{Deserialize, Serialize};\nuse ts_rs::TS;\n\n#[derive(Debug, Serialize, Deserialize, Queryable)]\npub struct AMLDateTime(pub NaiveDateTime);\n\nimpl TS for AMLDateTime {\n    fn name() -\u003e String {\n        \"Date\".to_string()\n    }\n\n    fn dependencies() -\u003e Vec\u003cts_rs::Dependency\u003e {\n        Vec::new()\n    }\n\n    fn transparent() -\u003e bool {\n        true\n    }\n}\n\nimpl Queryable\u003cTimestamp, Sqlite\u003e for AMLDateTime {\n    type Row = NaiveDateTime;\n\n    fn build(row: Self::Row) -\u003e Result\u003cSelf, Box\u003cdyn Error + Send + Sync\u003e\u003e {\n        Ok(AMLDateTime(row))\n    }\n}\n\nimpl Clone for AMLDateTime {\n    fn clone(\u0026self) -\u003e Self {\n        AMLDateTime(self.0.clone())\n    }\n}\n","traces":[{"line":13,"address":[6767760],"length":1,"stats":{"Line":1},"fn_name":"name"},{"line":14,"address":[6767768],"length":1,"stats":{"Line":1},"fn_name":null},{"line":17,"address":[7062560],"length":1,"stats":{"Line":1},"fn_name":"dependencies"},{"line":18,"address":[9331752],"length":1,"stats":{"Line":1},"fn_name":null},{"line":21,"address":[6853136],"length":1,"stats":{"Line":1},"fn_name":"transparent"},{"line":29,"address":[6767840],"length":1,"stats":{"Line":3},"fn_name":"build"},{"line":30,"address":[9331795],"length":1,"stats":{"Line":3},"fn_name":null},{"line":35,"address":[6767888],"length":1,"stats":{"Line":1},"fn_name":"clone"},{"line":36,"address":[6767906],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":9,"coverable":9},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","db_adapter","db_error.rs"],"content":"#[derive(Error, Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum DBError {\n    #[error(\"database query error\")]\n    UnableToQueryDatabase(String),\n    #[error(\"database update error\")]\n    UnableToStoreInDatabase(String),\n    #[error(\"Not Found\")]\n    NotFound(String),\n    // Add more error variants as needed.\n}\n\nimpl std::error::Error for DBError {}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","db_adapter","mod.rs"],"content":"use anyhow::{Context, Error, Result};\nuse diesel::migration::MigrationConnection;\nuse diesel::r2d2::{ConnectionManager, Pool, PooledConnection};\nuse diesel::{Connection, SqliteConnection};\nuse diesel_migrations::{embed_migrations, EmbeddedMigrations, MigrationHarness};\nuse directories::ProjectDirs;\nuse dotenvy::dotenv;\nuse log::info;\nuse std::env;\nuse std::fs;\nuse std::path::Path;\n\npub mod models;\npub mod schema;\n\npub type SqlitePool = Pool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e;\npub type DbConn = PooledConnection\u003cConnectionManager\u003cSqliteConnection\u003e\u003e;\n\npub const DB_NAME: \u0026'static str = \"aml_connect.db\";\npub const MIGRATIONS: EmbeddedMigrations = embed_migrations!(\"migrations\");\n\npub fn establish_connection() -\u003e Result\u003cSqlitePool\u003e {\n    let db_url = get_url()?;\n\n    let mut db_connection = create_if_not_exists(\u0026db_url)?;\n    initialize_diesel_schema(\u0026mut db_connection)?;\n\n    let conn_pool = new_conn_pool(db_url)?;\n    Ok(conn_pool)\n}\n\npub fn run_db_migrations(conn_pool: \u0026Pool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e) -\u003e Result\u003c()\u003e {\n    conn_pool\n        .get()\n        .with_context(|| \"Failed to get DB connection to run migrations\")?\n        .run_pending_migrations(MIGRATIONS)\n        .map_err(|e| Error::msg(format!(\"Failed to run migrations: {:?}\", e)))?;\n\n    Ok(())\n}\n\nfn new_conn_pool(db_url: String) -\u003e Result\u003cPool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e\u003e {\n    let connection_manager = ConnectionManager::\u003cSqliteConnection\u003e::new(db_url);\n\n    //Creates 3 threads in the pool by default\n    Pool::builder()\n        .build(connection_manager)\n        .with_context(|| \"Failed to open minimum number of database connections\\n\")\n}\n\nfn get_url() -\u003e Result\u003cString\u003e {\n    \n    dotenv().ok();\n\n    let db_path = match env::var(\"DATABASE_PATH\") {\n        Ok(env_path) =\u003e {\n            info!(\"Using environment variable for database\");\n            Path::new(\u0026env_path).join(DB_NAME)\n        }\n        Err(_) =\u003e {\n            info!(\"Using OS specific application directory for database\");\n            // TODO: Move this to file management module\n            let proj_dirs = ProjectDirs::from(\"com\", \"aspinity\", \"aml_connect\")\n                .with_context(|| \"Failed to get application directory\\n\")?;\n\n            let app_dir = proj_dirs.data_local_dir();\n\n            fs::create_dir_all(app_dir)\n                .with_context(|| \"Failed to create application directory\\n\")?;\n\n            proj_dirs.data_local_dir().join(DB_NAME)\n        }\n    };\n\n    let db_url = db_path\n                .to_str()\n                .with_context(|| \"Failed to convert database path to string\\n\")?\n                .to_owned();\n    info!(\"Using database at {}\", db_url);\n    Ok(db_url)\n}\n\nfn create_if_not_exists(db_url: \u0026str) -\u003e Result\u003cSqliteConnection\u003e {\n    match SqliteConnection::establish(\u0026db_url) {\n        Ok(connection) =\u003e Ok(connection),\n        Err(e) =\u003e Err(Error::msg(format!(\n            \"Failed to establish connection to database: {:?}\",\n            e\n        ))),\n    }\n}\n\nfn initialize_diesel_schema(db_connection: \u0026mut SqliteConnection) -\u003e Result\u003c()\u003e {\n    let _ = db_connection\n        .setup()\n        .with_context(|| \"Failed to diesel schema migrations table\\n\")?;\n    Ok(())\n}\n\n#[cfg(test)]\nmod tests{\n    use super::*;\n\n    #[test]\n    fn test_get_url_from_env() {\n        let db_path = \"/home/test_user/.local/share/aml_connect\";\n        env::set_var(\"DATABASE_PATH\", db_path);\n        let db_url = get_url().unwrap();\n        env::remove_var(\"DATABASE_PATH\");\n\n        assert_eq!(db_url, \"/home/test_user/.local/share/aml_connect/aml_connect.db\");\n    }\n}\n","traces":[{"line":22,"address":[5895592,5894496,5895528],"length":1,"stats":{"Line":3},"fn_name":"establish_connection"},{"line":23,"address":[5894671,5894503],"length":1,"stats":{"Line":3},"fn_name":null},{"line":25,"address":[5491342,5490991,5491128],"length":1,"stats":{"Line":6},"fn_name":null},{"line":26,"address":[5491480,5491603,5491327],"length":1,"stats":{"Line":6},"fn_name":null},{"line":28,"address":[5491538,5491705,5491821],"length":1,"stats":{"Line":6},"fn_name":null},{"line":29,"address":[5491779],"length":1,"stats":{"Line":3},"fn_name":null},{"line":32,"address":[5492000,5492538],"length":1,"stats":{"Line":2},"fn_name":"run_db_migrations"},{"line":33,"address":[5492018,5492308,5492233,5492460],"length":1,"stats":{"Line":4},"fn_name":null},{"line":35,"address":[5492217],"length":1,"stats":{"Line":0},"fn_name":null},{"line":37,"address":[6682192,6682209],"length":1,"stats":{"Line":2},"fn_name":"{closure#1}"},{"line":39,"address":[5492524],"length":1,"stats":{"Line":2},"fn_name":null},{"line":42,"address":[5492786,5492576,5492817],"length":1,"stats":{"Line":3},"fn_name":"new_conn_pool"},{"line":43,"address":[5492586],"length":1,"stats":{"Line":3},"fn_name":null},{"line":46,"address":[5492616,5492707],"length":1,"stats":{"Line":6},"fn_name":null},{"line":47,"address":[5492673],"length":1,"stats":{"Line":3},"fn_name":null},{"line":48,"address":[6682448],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"},{"line":51,"address":[5494070,5492832,5494461],"length":1,"stats":{"Line":4},"fn_name":"get_url"},{"line":53,"address":[5492855],"length":1,"stats":{"Line":4},"fn_name":null},{"line":55,"address":[5492905],"length":1,"stats":{"Line":4},"fn_name":null},{"line":56,"address":[5492942],"length":1,"stats":{"Line":4},"fn_name":null},{"line":57,"address":[5492974,5494210,5494152,5494301],"length":1,"stats":{"Line":12},"fn_name":null},{"line":58,"address":[5494407,5494272],"length":1,"stats":{"Line":8},"fn_name":null},{"line":61,"address":[5493309,5493116,5493180,5493022],"length":1,"stats":{"Line":0},"fn_name":null},{"line":63,"address":[5493408,5493650,5493248],"length":1,"stats":{"Line":0},"fn_name":null},{"line":64,"address":[5493634],"length":1,"stats":{"Line":0},"fn_name":null},{"line":66,"address":[5493599,5493750],"length":1,"stats":{"Line":0},"fn_name":null},{"line":68,"address":[5493766,5493937],"length":1,"stats":{"Line":0},"fn_name":null},{"line":69,"address":[6682480],"length":1,"stats":{"Line":0},"fn_name":"{closure#1}"},{"line":71,"address":[5494019,5493884],"length":1,"stats":{"Line":0},"fn_name":null},{"line":75,"address":[5494763,5494503,5494590],"length":1,"stats":{"Line":8},"fn_name":null},{"line":77,"address":[5494747],"length":1,"stats":{"Line":0},"fn_name":null},{"line":79,"address":[5495120,5494800,5494890,5494948],"length":1,"stats":{"Line":12},"fn_name":null},{"line":80,"address":[5495018],"length":1,"stats":{"Line":4},"fn_name":null},{"line":83,"address":[5495706,5495296],"length":1,"stats":{"Line":3},"fn_name":"create_if_not_exists"},{"line":84,"address":[5495323],"length":1,"stats":{"Line":3},"fn_name":null},{"line":85,"address":[5495366],"length":1,"stats":{"Line":3},"fn_name":null},{"line":86,"address":[5495417,5495539],"length":1,"stats":{"Line":0},"fn_name":null},{"line":93,"address":[5495760],"length":1,"stats":{"Line":3},"fn_name":"initialize_diesel_schema"},{"line":94,"address":[5495853,5495772],"length":1,"stats":{"Line":3},"fn_name":null},{"line":96,"address":[5495843],"length":1,"stats":{"Line":0},"fn_name":null},{"line":97,"address":[5495833],"length":1,"stats":{"Line":3},"fn_name":null}],"covered":29,"coverable":41},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","db_adapter","models.rs"],"content":"use diesel::prelude::*;\nuse serde::{Deserialize, Serialize};\n\nuse crate::aml_core::date_time::AMLDateTime;\n\n// use crate::aml_core::date_time::DateTime;\n\n#[derive(Queryable, Selectable, Identifiable, Debug, Serialize, Deserialize, Clone)]\n#[diesel(table_name = crate::aml_core::db_adapter::schema::projects)]\n#[diesel(check_for_backend(diesel::sqlite::Sqlite))]\npub struct Project {\n    pub id: i32,\n    pub slug: String,\n    pub name: String,\n    pub description: Option\u003cString\u003e,\n    pub modified_at: AMLDateTime,\n    pub created_at: AMLDateTime,\n}\n\n#[derive(Insertable)]\n#[diesel(table_name = crate::aml_core::db_adapter::schema::projects)]\n#[diesel(check_for_backend(diesel::sqlite::Sqlite))]\npub struct NewProject {\n    pub slug: String,\n    pub name: String,\n    pub description: Option\u003cString\u003e,\n}\n\n#[derive(Queryable, Selectable)]\n#[diesel(table_name = crate::aml_core::db_adapter::schema::input_data)]\n#[diesel(check_for_backend(diesel::sqlite::Sqlite))]\npub struct InputData {\n    pub id: i32,\n    pub file_name: String,\n    pub ml_dataset_type: Option\u003cString\u003e,\n    pub file_type: Option\u003cString\u003e,\n    pub file_extension: Option\u003cString\u003e,\n    pub file_size: Option\u003ci32\u003e,\n    pub file_path: Option\u003cString\u003e,\n    pub uploaded_data: Option\u003cchrono::NaiveDateTime\u003e,\n    pub project_id: i32,\n}\n\n#[derive(Insertable)]\n#[diesel(table_name = crate::aml_core::db_adapter::schema::input_data)]\n#[diesel(check_for_backend(diesel::sqlite::Sqlite))]\npub struct NewInputData\u003c'a\u003e {\n    pub file_name: Option\u003c\u0026'a str\u003e,\n    pub ml_dataset_type: Option\u003c\u0026'a str\u003e,\n    pub file_type: Option\u003c\u0026'a str\u003e,\n    pub file_extension: Option\u003c\u0026'a str\u003e,\n    pub file_size: Option\u003ci32\u003e,\n    pub file_path: Option\u003c\u0026'a str\u003e,\n    pub uploaded_data: Option\u003c\u0026'a chrono::NaiveDateTime\u003e,\n    pub project_id: i32,\n}\n\n#[derive(Queryable, Selectable)]\n#[diesel(table_name = crate::aml_core::db_adapter::schema::audio_files)]\n#[diesel(check_for_backend(diesel::sqlite::Sqlite))]\npub struct AudioFile {\n    pub id: i32,\n    pub length: Option\u003ci32\u003e,\n    pub category: Option\u003cString\u003e,\n    pub peak_frequency: Option\u003ci32\u003e,\n    pub spi_level: Option\u003ci32\u003e,\n    pub input_data_id: i32,\n}\n\n#[derive(Insertable)]\n#[diesel(table_name = crate::aml_core::db_adapter::schema::audio_files)]\n#[diesel(check_for_backend(diesel::sqlite::Sqlite))]\npub struct NewAudioFile\u003c'a\u003e {\n    pub length: Option\u003ci32\u003e,\n    pub category: Option\u003c\u0026'a str\u003e,\n    pub peak_frequency: Option\u003ci32\u003e,\n    pub spi_level: Option\u003ci32\u003e,\n    pub input_data_id: i32,\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","db_adapter","schema.rs"],"content":"// @generated automatically by Diesel CLI.\n\ndiesel::table! {\n    audio_files (id) {\n        id -\u003e Integer,\n        length -\u003e Nullable\u003cInteger\u003e,\n        category -\u003e Nullable\u003cText\u003e,\n        peak_frequency -\u003e Nullable\u003cInteger\u003e,\n        spi_level -\u003e Nullable\u003cInteger\u003e,\n        input_data_id -\u003e Integer,\n    }\n}\n\ndiesel::table! {\n    input_data (id) {\n        id -\u003e Integer,\n        file_name -\u003e Text,\n        ml_dataset_type -\u003e Nullable\u003cText\u003e,\n        file_type -\u003e Nullable\u003cText\u003e,\n        file_extension -\u003e Nullable\u003cText\u003e,\n        file_size -\u003e Nullable\u003cInteger\u003e,\n        file_path -\u003e Nullable\u003cText\u003e,\n        uploaded_data -\u003e Nullable\u003cTimestamp\u003e,\n        project_id -\u003e Integer,\n    }\n}\n\ndiesel::table! {\n    projects (id) {\n        id -\u003e Integer,\n        slug -\u003e Text,\n        name -\u003e Text,\n        description -\u003e Nullable\u003cText\u003e,\n        modified_at -\u003e Timestamp,\n        created_at -\u003e Timestamp,\n    }\n}\n\ndiesel::joinable!(audio_files -\u003e input_data (input_data_id));\ndiesel::joinable!(input_data -\u003e projects (project_id));\n\ndiesel::allow_tables_to_appear_in_same_query!(audio_files, input_data, projects,);\n","traces":[{"line":3,"address":[6141712,6141648,6141673],"length":1,"stats":{"Line":20},"fn_name":"fmt"},{"line":5,"address":[6141621,6141632,6141552,6141616,6141577],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":6,"address":[6141481,6141456,6141520,6141536,6141525],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":7,"address":[6141429,6141385,6141440,6141424,6141360],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":8,"address":[6141289,6141328,6141264,6141333,6141344],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":9,"address":[6141248,6141232,6141168,6141193,6141237],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":10,"address":[6141152,6141141,6141072,6141097,6141136],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":14,"address":[7151696,7151632,7151657],"length":1,"stats":{"Line":21},"fn_name":"fmt"},{"line":16,"address":[6038864,6038902],"length":1,"stats":{"Line":2},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":17,"address":[7151440,7151509,7151504,7151465,7151520],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":18,"address":[7151408,7151369,7151344,7151413,7151424],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":19,"address":[6039632,6039670],"length":1,"stats":{"Line":2},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":20,"address":[6039926,6039888],"length":1,"stats":{"Line":2},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":21,"address":[6040182,6040144],"length":1,"stats":{"Line":2},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":22,"address":[7151024,7150960,7151029,7150985,7151040],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":23,"address":[7150889,7150944,7150928,7150864,7150933],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":24,"address":[6040950,6040912],"length":1,"stats":{"Line":4},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":28,"address":[6907472,6907408,6907440,6907664,6907648,6907488,6907413,6907508,6907609,6907392,6907424,6907456,6907429,6907584,6907504,6907444],"length":1,"stats":{"Line":33},"fn_name":"from_clause"},{"line":30,"address":[6177760,6177798,6178024,6178057,6178048,6178016],"length":1,"stats":{"Line":12},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":31,"address":[7154768,7154729,7154704,7154773,7154784],"length":1,"stats":{"Line":6},"fn_name":"fmt"},{"line":32,"address":[6178374,6178336],"length":1,"stats":{"Line":6},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":33,"address":[6178630,6178592],"length":1,"stats":{"Line":6},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":34,"address":[6178848,6178886],"length":1,"stats":{"Line":6},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":35,"address":[6179142,6179104],"length":1,"stats":{"Line":6},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":39,"address":[5467962],"length":1,"stats":{"Line":0},"fn_name":null},{"line":40,"address":[5468010],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":25,"coverable":26},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","element_repository.rs"],"content":"use serde::{Deserialize, Serialize};\nuse serde_json;\nuse std::collections::HashMap;\nuse std::fs::File;\nuse std::io::BufReader;\nuse std::path::PathBuf;\nuse thiserror::Error;\nuse ts_rs::TS;\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct ElementMetadata {\n    pub short_description: String,\n    pub long_description: String,\n    pub type_name: String,\n    pub terminals: HashMap\u003cString, TerminalMetadata\u003e,\n    pub parameters: Option\u003cHashMap\u003cString, ParameterMetadata\u003e\u003e,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum TerminalDirection {\n    #[serde(rename = \"input\")]\n    Input,\n    #[serde(rename = \"output\")]\n    Output,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct TerminalMetadata {\n    pub description: String,\n    pub direction: Option\u003cTerminalDirection\u003e,\n    pub default: Option\u003cString\u003e,\n    pub dc_range: Option\u003cString\u003e,\n    pub ac_range: Option\u003cString\u003e,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum ParameterType {\n    #[serde(rename = \"number\")]\n    Number,\n    #[serde(rename = \"string\")]\n    String,\n    #[serde(rename = \"boolean\")]\n    Boolean,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum RangeType {\n    #[serde(rename = \"discrete\")]\n    Discrete,\n    #[serde(rename = \"interval\")]\n    Interval,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum UIComponentType {\n    #[serde(rename = \"checkbox\")]\n    Checkbox,\n    #[serde(rename = \"dropdown\")]\n    Dropdown,\n    #[serde(rename = \"textbox\")]\n    Textbox,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct ParameterMetadata {\n    pub parameter_type: ParameterType,\n    pub description: String,\n    pub default: Option\u003cString\u003e,\n    pub range_type: Option\u003cRangeType\u003e,\n    pub range: Option\u003cVec\u003cOption\u003cString\u003e\u003e\u003e,\n    pub unit: Option\u003cString\u003e,\n    pub ui_component: UIComponentType,\n}\n\n#[derive(Error, Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum GetElementsError {\n    #[error(\"Problem with directory or file access\")]\n    FileError(String),\n    #[error(\"Element JSON is malformed\")]\n    MalformedJSON(String),\n}\n\npub type GetElementsResponseResult = Result\u003cHashMap\u003cString, ElementMetadata\u003e, GetElementsError\u003e;\n\npub fn list_elements_from_simulator(file_path: \u0026PathBuf) -\u003e GetElementsResponseResult {\n    let file = File::open(file_path).map_err(|e| GetElementsError::FileError(e.to_string()))?;\n    let reader = BufReader::new(file);\n    let res: HashMap\u003cString, ElementMetadata\u003e = serde_json::from_reader(reader)\n        .map_err(|e| GetElementsError::MalformedJSON(e.to_string()))?;\n    Ok(res)\n}\n\n// tests\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_metadata_load_from_json() {\n        // arrange\n        let mut file_path = std::path::PathBuf::new();\n        file_path.push(\"resources\");\n        file_path.push(\"elements.json\");\n\n        // act\n        let el_json_res = list_elements_from_simulator(\u0026file_path);\n\n        // assert\n        assert!(el_json_res.is_ok());\n        // println!(\"{}\", serde_json::to_string_pretty(\u0026el_json_res.unwrap()).unwrap());\n    }\n}\n","traces":[{"line":101,"address":[7347696,7348259,7348290],"length":1,"stats":{"Line":1},"fn_name":"list_elements_from_simulator"},{"line":102,"address":[6186368,6186386],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":103,"address":[9577226],"length":1,"stats":{"Line":1},"fn_name":null},{"line":104,"address":[7059540,7059796],"length":1,"stats":{"Line":1},"fn_name":null},{"line":105,"address":[5350933],"length":1,"stats":{"Line":0},"fn_name":null},{"line":106,"address":[7059715],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":5,"coverable":6},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","file_data_manager","get_files.rs"],"content":"use super::*;\nuse crate::aml_core::db_adapter::schema::{input_data, projects};\nuse crate::aml_core::db_adapter::{models::InputData, DbConn};\nuse crate::aml_core::file_data_manager::FileUploadError;\nuse crate::aml_core::project_manager;\nuse diesel::{ExpressionMethods, QueryDsl, RunQueryDsl};\nuse std::str::FromStr;\n\npub fn get_input_files(req: \u0026GetFilesRequest, db_conn: \u0026mut DbConn) -\u003e GetFilesResponseResult {\n    if req.proj_slug.is_empty() {\n        log::error!(\"Project slug is empty\");\n        return Err(AppError::FileUploadError(\n            FileUploadError::InvalidArgument(\"Project slug is empty\".to_string()).into(),\n        ));\n    }\n\n    match project_manager::get_projects::project_exists_by_slug(\u0026req.proj_slug, db_conn) {\n        Ok(project_exists) =\u003e {\n            if !project_exists {\n                log::error!(\"Project not found\");\n                return Err(AppError::FileUploadError(\n                    FileUploadError::InvalidArgument(req.proj_slug.clone() + \" does not exist\")\n                        .into(),\n                ));\n            }\n        }\n        Err(e) =\u003e {\n            log::error!(\"Error checking if project exists: {}\", e);\n            return Err(AppError::ProjectManagerError(e)).into();\n        }\n    }\n\n    let uploaded_files = match \u0026req.dataset_type {\n        Some(dataset_type) =\u003e {\n            let dataset_filter = dataset_type.to_string();\n            input_data::table\n                .inner_join(projects::table)\n                .select((\n                    input_data::id,\n                    input_data::file_name,\n                    input_data::ml_dataset_type,\n                    input_data::file_type,\n                    input_data::file_extension,\n                    input_data::file_size,\n                    input_data::file_path,\n                    input_data::uploaded_data,\n                    input_data::project_id,\n                ))\n                .filter(projects::slug.eq(\u0026req.proj_slug))\n                .filter(input_data::ml_dataset_type.eq(dataset_filter))\n                .load::\u003cInputData\u003e(db_conn)\n        }\n        None =\u003e {\n            log::info!(\"No dataset type specified, returning all files\");\n            input_data::table\n                .inner_join(projects::table)\n                .select((\n                    input_data::id,\n                    input_data::file_name,\n                    input_data::ml_dataset_type,\n                    input_data::file_type,\n                    input_data::file_extension,\n                    input_data::file_size,\n                    input_data::file_path,\n                    input_data::uploaded_data,\n                    input_data::project_id,\n                ))\n                .filter(projects::slug.eq(\u0026req.proj_slug))\n                .load::\u003cInputData\u003e(db_conn)\n        }\n    }\n    .map_err(|e| {\n        log::error!(\"Error getting file metadata from database: {}\", e);\n        AppError::InternalError(e.to_string())\n    })?;\n\n    // TODO: Optimize this\n    let mut files = Vec::with_capacity(uploaded_files.len());\n    for file in uploaded_files {\n        files.push(FileMetadata {\n            file_id: file.id.to_string(),\n            file_name: file.file_name,\n            dataset_type: DataSet::from_str(\u0026file.ml_dataset_type.unwrap()).unwrap(),\n        })\n    }\n\n    Ok(GetFilesResponse { files })\n}\n\n#[cfg(test)]\nmod tests {\n    use super::get_input_files;\n    use crate::aml_core::{db_adapter::SqlitePool, file_data_manager::GetFilesRequest};\n    use diesel::r2d2::ConnectionManager;\n\n    #[test]\n    fn test_get_input_files_fails_for_empty_project_slug() {\n        let req = GetFilesRequest {\n            proj_slug: \"\".to_string(),\n            dataset_type: None,\n        };\n\n        let mut db_conn = SqlitePool::new(ConnectionManager::new(\"\"))\n            .unwrap()\n            .get()\n            .unwrap();\n        assert!(get_input_files(\u0026req, \u0026mut db_conn).is_err());\n    }\n}\n","traces":[{"line":9,"address":[9638624,9639861,9639895],"length":1,"stats":{"Line":2},"fn_name":"get_input_files"},{"line":10,"address":[9638678],"length":1,"stats":{"Line":2},"fn_name":null},{"line":11,"address":[9639130,9638794,9638869],"length":1,"stats":{"Line":4},"fn_name":null},{"line":12,"address":[5105992],"length":1,"stats":{"Line":2},"fn_name":null},{"line":13,"address":[5105881],"length":1,"stats":{"Line":2},"fn_name":null},{"line":17,"address":[5105692],"length":1,"stats":{"Line":1},"fn_name":null},{"line":18,"address":[5106196],"length":1,"stats":{"Line":1},"fn_name":null},{"line":19,"address":[5106215],"length":1,"stats":{"Line":1},"fn_name":null},{"line":20,"address":[5106899,5107264,5106974],"length":1,"stats":{"Line":2},"fn_name":null},{"line":21,"address":[5107165],"length":1,"stats":{"Line":1},"fn_name":null},{"line":22,"address":[5107032],"length":1,"stats":{"Line":1},"fn_name":null},{"line":27,"address":[5106230],"length":1,"stats":{"Line":0},"fn_name":null},{"line":28,"address":[5106270,5106644,5106415,5106357],"length":1,"stats":{"Line":0},"fn_name":null},{"line":29,"address":[5106486],"length":1,"stats":{"Line":0},"fn_name":null},{"line":33,"address":[5107986,5108109,5106857,5107676],"length":1,"stats":{"Line":3},"fn_name":null},{"line":34,"address":[5107407],"length":1,"stats":{"Line":1},"fn_name":null},{"line":35,"address":[5107415],"length":1,"stats":{"Line":1},"fn_name":null},{"line":36,"address":[5107484,5107609,5107513,5107436],"length":1,"stats":{"Line":4},"fn_name":null},{"line":49,"address":[5107496],"length":1,"stats":{"Line":1},"fn_name":null},{"line":50,"address":[5107525],"length":1,"stats":{"Line":1},"fn_name":null},{"line":54,"address":[5107894,5107791,5107356,5107753],"length":1,"stats":{"Line":0},"fn_name":null},{"line":55,"address":[5107863,5107840],"length":1,"stats":{"Line":0},"fn_name":null},{"line":68,"address":[5107855],"length":1,"stats":{"Line":0},"fn_name":null},{"line":72,"address":[4886758,4886304],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"},{"line":73,"address":[5813933,5813718,5813854,5813799],"length":1,"stats":{"Line":0},"fn_name":null},{"line":74,"address":[5813906,5814092],"length":1,"stats":{"Line":0},"fn_name":null},{"line":78,"address":[5108066,5108196],"length":1,"stats":{"Line":2},"fn_name":null},{"line":79,"address":[5108203,5109329,5108306],"length":1,"stats":{"Line":3},"fn_name":null},{"line":80,"address":[5108882],"length":1,"stats":{"Line":1},"fn_name":null},{"line":81,"address":[5108522],"length":1,"stats":{"Line":1},"fn_name":null},{"line":82,"address":[5108590],"length":1,"stats":{"Line":1},"fn_name":null},{"line":83,"address":[5108630,5108749,5108842],"length":1,"stats":{"Line":3},"fn_name":null},{"line":87,"address":[5109339],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":24,"coverable":33},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","file_data_manager","mod.rs"],"content":"use anyhow::{Context, Result};\nuse serde::{Deserialize, Serialize};\nuse std::fmt;\nuse std::fs;\nuse std::path::PathBuf;\nuse strum_macros::EnumString;\nuse thiserror::Error;\nuse ts_rs::TS;\n\nuse super::AppError;\n\npub mod get_files;\npub mod put_files;\n\n#[derive(Debug, Clone, Serialize, Deserialize, TS, EnumString)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum DataSet {\n    Testing,\n    Validation,\n    Training,\n}\n\nimpl fmt::Display for DataSet {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        match self {\n            DataSet::Testing =\u003e write!(f, \"Testing\"),\n            DataSet::Validation =\u003e write!(f, \"Validation\"),\n            DataSet::Training =\u003e write!(f, \"Training\"),\n        }\n    }\n}\n\n#[derive(Error, Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\n// TODO: @sidb101, I think we should rename this so that it can be used by other methods in file data manager.\n// I also think errors that are specific to the DB should be defined in DB adapater and used throughout the app. Let me know what you think.\npub enum FileUploadError {\n    #[error(\"invalid argument\")]\n    InvalidArgument(String),\n    #[error(\"file not found\")]\n    FileNotFound,\n    #[error(\"processing error\")]\n    ProcessingError,\n    #[error(\"file too large\")]\n    FileTooLarge,\n    #[error(\"unsupported file extension\")]\n    UnsupportedFileExtension,\n    #[error(\"project not found\")]\n    ProjectNotFound(String),\n    #[error(\"database query error\")]\n    UnableToQueryDatabase(String),\n    #[error(\"database update error\")]\n    UnableToStoreInDatabase(String),\n    #[error(\"Unable to delete file from Filesystem\")]\n    UnableToDeleteFile(String),\n    #[error(\"Unauthorized Access\")]\n    UnauthorizedAccess(String),\n    // Add more error variants as needed.\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct FileUploadRequest {\n    pub file_name: String, // relativePath to file from baseDir (e.g. \\project1\\training\\glass-break.wav)\n    pub dataset_type: DataSet,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct FilesUploadRequest {\n    pub proj_slug: String,\n    pub input_files: Vec\u003cFileUploadRequest\u003e,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct FileUploadErrorResponse {\n    pub file_name: String,\n    pub error_response: FileUploadError,\n}\n\n//this struct will also be used got QueryAudioFiles\n#[derive(Clone, Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct FileMetadata {\n    pub file_id: String,   // generated by db\n    pub file_name: String, // relativePath to file from baseDir (e.g. \\project1\\training\\glass-break.wav)\n    pub dataset_type: DataSet,\n}\n\n#[derive(Clone, Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct GetFilesRequest {\n    pub proj_slug: String,\n    pub dataset_type: Option\u003cDataSet\u003e,\n}\n\n#[derive(Clone, Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct GetFilesResponse {\n    pub files: Vec\u003cFileMetadata\u003e,\n}\n\npub type GetFilesResponseResult = Result\u003cGetFilesResponse, AppError\u003e;\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct FilesUploadResponse {\n    pub upload_success_files: Vec\u003cFileMetadata\u003e, //array of relative file paths of input files that were successfully stored in server side folder\n    pub upload_failed_files: Vec\u003cFileUploadErrorResponse\u003e,\n    pub attempted: i32,\n    pub succeeded: i32,\n    pub failed: i32,\n}\n\npub type SaveFilesResponseResult = Result\u003cFilesUploadResponse, AppError\u003e;\n\npub fn create_app_dir_if_not_exists(path_resolver: \u0026tauri::PathResolver) -\u003e Result\u003cPathBuf\u003e {\n    // let proj_dirs = ProjectDirs::from(\"com\", \"aspinity\", \"aml_connect\")\n    //     .with_context(|| \"Failed to get application directory\\n\")?;\n    // let app_dir = proj_dirs.data_local_dir();\n\n    let app_dir = path_resolver\n        .app_local_data_dir()\n        .with_context(|| \"Failed to get application directory\\n\")?;\n\n    if !app_dir.exists() {\n        fs::create_dir_all(app_dir.clone())\n            .with_context(|| \"Failed to create application directory\\n\")?;\n    }\n    Ok(app_dir)\n}\n\npub fn create_project_dir(project_slug: \u0026str, app_dir: \u0026PathBuf) -\u003e Result\u003c()\u003e {\n    let project_dir = app_dir.join(project_slug).join(\"audio\");\n    // `project_slug/tmp` is used to store all temporary files - png, json, etc.\n    let tmp_dir = app_dir.join(project_slug).join(\"tmp\");\n    fs::create_dir_all(project_dir)?;\n    fs::create_dir_all(tmp_dir)?;\n    Ok(())\n}\n\npub fn delete_project_dir(project_slug: \u0026str, app_dir: \u0026PathBuf) -\u003e Result\u003c()\u003e {\n    let project_dir = app_dir.join(project_slug);\n    fs::remove_dir_all(project_dir)?;\n    Ok(())\n}\n\npub fn update_project_dir(old_project_slug: \u0026str, new_project_slug: \u0026str, app_dir: \u0026PathBuf) -\u003e Result\u003c()\u003e {\n    let old = app_dir.join(old_project_slug);\n    let new: PathBuf = app_dir.join(new_project_slug);\n    fs::rename(old, new)?;\n    Ok(())\n}\n\n#[cfg(test)]\nmod tests {}\n","traces":[{"line":25,"address":[5048544],"length":1,"stats":{"Line":1},"fn_name":"fmt"},{"line":26,"address":[5048571],"length":1,"stats":{"Line":1},"fn_name":null},{"line":27,"address":[5048603],"length":1,"stats":{"Line":0},"fn_name":null},{"line":28,"address":[5048648],"length":1,"stats":{"Line":1},"fn_name":null},{"line":29,"address":[5615829],"length":1,"stats":{"Line":1},"fn_name":null},{"line":127,"address":[5048768,5049316],"length":1,"stats":{"Line":0},"fn_name":"create_app_dir_if_not_exists"},{"line":132,"address":[5615929,5616102],"length":1,"stats":{"Line":0},"fn_name":null},{"line":134,"address":[5048951],"length":1,"stats":{"Line":0},"fn_name":null},{"line":136,"address":[5616179,5616067],"length":1,"stats":{"Line":0},"fn_name":null},{"line":137,"address":[5616297,5616437],"length":1,"stats":{"Line":0},"fn_name":null},{"line":138,"address":[5049270],"length":1,"stats":{"Line":0},"fn_name":null},{"line":140,"address":[5049066],"length":1,"stats":{"Line":0},"fn_name":null},{"line":143,"address":[5049603,5049344],"length":1,"stats":{"Line":1},"fn_name":"create_project_dir"},{"line":144,"address":[5049403],"length":1,"stats":{"Line":1},"fn_name":null},{"line":146,"address":[5049672],"length":1,"stats":{"Line":1},"fn_name":null},{"line":147,"address":[5050090,5049907],"length":1,"stats":{"Line":1},"fn_name":null},{"line":148,"address":[5617433,5617342,5617202],"length":1,"stats":{"Line":2},"fn_name":null},{"line":149,"address":[5617400],"length":1,"stats":{"Line":1},"fn_name":null},{"line":152,"address":[5617600],"length":1,"stats":{"Line":1},"fn_name":"delete_project_dir"},{"line":153,"address":[5617645],"length":1,"stats":{"Line":1},"fn_name":null},{"line":154,"address":[5617766,5617674],"length":1,"stats":{"Line":1},"fn_name":null},{"line":155,"address":[5617755],"length":1,"stats":{"Line":1},"fn_name":null},{"line":158,"address":[5617824,5618327,5618296],"length":1,"stats":{"Line":1},"fn_name":"update_project_dir"},{"line":159,"address":[5617909],"length":1,"stats":{"Line":1},"fn_name":null},{"line":160,"address":[5618040,5617962],"length":1,"stats":{"Line":2},"fn_name":null},{"line":161,"address":[5618059,5618239],"length":1,"stats":{"Line":1},"fn_name":null},{"line":162,"address":[5618220],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":19,"coverable":27},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","file_data_manager","put_files.rs"],"content":"use anyhow::{ensure, Result};\nuse diesel::r2d2::{ConnectionManager, PooledConnection};\nuse diesel::{ExpressionMethods, QueryDsl, RunQueryDsl, SqliteConnection};\nuse std::fs::{self};\nuse std::path::PathBuf;\n\nuse crate::aml_core::{file_data_manager::*, project_manager};\n\nuse crate::aml_core::db_adapter::models::{InputData, NewInputData};\nuse crate::aml_core::db_adapter::schema::input_data;\n\n/// For a given filename, this function derives the absolute path of the file\n/// the app_dir is setup at the app startup, and can be fetched from tauri state\nfn get_file_absolute_path(\n    project_dir: \u0026str,\n    file_name: String,\n    app_dir: \u0026PathBuf,\n) -\u003e Result\u003cPathBuf\u003e {\n    Ok(app_dir.join(project_dir).join(\"audio\").join(file_name))\n}\n\n/// Validates the input file exists for a given project, as specified by FileUploadRequest filename\nfn validate_exists(\n    project_slug: \u0026str,\n    f: \u0026FileUploadRequest,\n    app_dir: \u0026PathBuf,\n) -\u003e Result\u003cPathBuf\u003e {\n    let file_path = get_file_absolute_path(project_slug, f.file_name.clone(), app_dir)?;\n    ensure!(file_path.exists(), \"File does not exist\");\n    Ok(file_path)\n}\n\n\n/// validates the extension of a file at `file_path` matches `extension`\nfn validate_extension(file_path: \u0026PathBuf, extension: String) -\u003e Result\u003c()\u003e {\n    ensure!(\n        file_path\n            .extension()\n            .unwrap()\n            .to_os_string()\n            .to_str()\n            .unwrap()\n            == extension,\n        \"Invalid file extension\"\n    );\n    Ok(())\n}\n\n/// validate file size is less than 20 MB\nfn validate_size(file_path: \u0026PathBuf) -\u003e Result\u003c()\u003e {\n    ensure!(\n        file_path.metadata().unwrap().len() \u003c 20 * 1024 * 1024,\n        \"File size is too large\"\n    );\n    Ok(())\n}\n\n/// Performs levels of validation for a given FileUploadRequest, returns the \\\n/// validation status in a basic FilesUploadResponse\npub fn validate_files(\n    project_slug: \u0026str,\n    files: \u0026Vec\u003cFileUploadRequest\u003e,\n    app_dir: \u0026PathBuf,\n) -\u003e FilesUploadResponse {\n    let mut response: FilesUploadResponse = FilesUploadResponse {\n        upload_success_files: Vec::new(),\n        upload_failed_files: Vec::new(),\n        attempted: files.len() as i32,\n        succeeded: 0,\n        failed: 0,\n    };\n\n    for file in files {\n        let file_path = validate_exists(project_slug, file, app_dir);\n\n        match file_path {\n            Err(_) =\u003e {\n                response.upload_failed_files.push(FileUploadErrorResponse {\n                    file_name: file.file_name.clone(),\n                    error_response: FileUploadError::FileNotFound,\n                });\n            }\n            Ok(file_path) =\u003e {\n                if validate_extension(\u0026file_path, \"wav\".to_string()).is_err() {\n                    response.upload_failed_files.push(FileUploadErrorResponse {\n                        file_name: file.file_name.clone(),\n                        error_response: FileUploadError::UnsupportedFileExtension,\n                    });\n                } else if validate_size(\u0026file_path).is_err() {\n                    response.upload_failed_files.push(FileUploadErrorResponse {\n                        file_name: file.file_name.clone(),\n                        error_response: FileUploadError::FileTooLarge,\n                    });\n                } else {\n                    response.upload_success_files.push(FileMetadata {\n                        file_id: String::from(\"\"), // will be derived later\n                        file_name: file.file_name.clone(),\n                        dataset_type: file.dataset_type.clone(),\n                    });\n                }\n            }\n        }\n    }\n\n    response\n}\n\n/// Validates the input files stored in the appdata dir and saves their metadata to the database\n///\n/// # Arguments\n/// * `FilesUploadRequest`: JSON struct holding\n///     proj_slug: project_slug  \n///     input_files: vector of FileUploadRequest\n///\n/// # Returns\n/// * `SaveFilesResponseResult`: A result typedef, holding Ok(FilesUploadResponse) and Err(Error) variants\npub fn save_input_files(\n    input: \u0026FilesUploadRequest,\n    app_dir: \u0026PathBuf,\n    conn: \u0026mut PooledConnection\u003cConnectionManager\u003cSqliteConnection\u003e\u003e,\n) -\u003e SaveFilesResponseResult {\n    // validation of the list of input file paths (file will be deleted if invalid)\n    let mut ans: FilesUploadResponse =\n        validate_files(\u0026input.proj_slug, \u0026input.input_files, app_dir);\n    let succesfull_uploads = ans.upload_success_files.clone();\n    ans.upload_success_files.clear();\n\n    // Check input.project_slug must exist in db\n    let found_project =\n        match project_manager::get_projects::get_project_by_slug(\u0026input.proj_slug, conn) {\n            Ok(project) =\u003e project,\n            Err(e) =\u003e {\n                return Err(AppError::ProjectManagerError(e));\n            }\n        };\n\n    for file in succesfull_uploads {\n        let dataset_type = file.dataset_type.to_string();\n        let fpath =\n            get_file_absolute_path(\u0026input.proj_slug, file.file_name.clone(), app_dir).unwrap();\n        let fpath_str = fpath.to_str().unwrap();\n        let fsize = fpath.metadata().unwrap().len();\n        let new_input_files = NewInputData {\n            project_id: found_project.id,\n            ml_dataset_type: Some(dataset_type.as_ref()),\n            file_name: Some(file.file_name.as_ref()),\n            file_type: Some(\"audio\"),\n            file_extension: Some(\".wav\"),\n            file_size: Some(fsize as i32),\n            file_path: Some(fpath_str),\n            uploaded_data: None,\n        };\n\n        let db_upload_res = diesel::insert_into(input_data::table)\n            .values(\u0026new_input_files)\n            .on_conflict(input_data::file_name)\n            .do_nothing()\n            .execute(conn);\n\n        if db_upload_res.is_err() {\n            ans.upload_failed_files.push(FileUploadErrorResponse {\n                file_name: file.file_name.clone(),\n                error_response: FileUploadError::UnableToStoreInDatabase(\n                    db_upload_res.unwrap_err().to_string(),\n                ),\n            });\n        } else {\n            ans.upload_success_files.push(file);\n        }\n    }\n\n    // delete all files that failed to upload\n    for file in ans.upload_failed_files.iter() {\n        let file_path =\n            get_file_absolute_path(\u0026input.proj_slug, file.file_name.clone(), app_dir).unwrap();\n        println!(\n            \"Deleting file: {:?} for reason {}\",\n            file_path, file.error_response\n        );\n        if file_path.exists() {\n            fs::remove_file(file_path).map_err(|_e| {\n                AppError::FileUploadError(FileUploadError::UnableToDeleteFile(\n                    file.file_name.clone(),\n                ))\n            })?;\n        }\n        ans.failed += 1;\n    }\n\n    for file in ans.upload_success_files.iter_mut() {\n        let found_file = input_data::table\n            .filter(input_data::file_name.eq(\u0026file.file_name))\n            .first::\u003cInputData\u003e(conn)\n            .map_err(|e| AppError::InternalError(e.to_string()))?;\n        ans.succeeded += 1;\n        file.file_id = found_file.id.to_string();\n    }\n\n    Ok(ans)\n}\n\n// unit tests\n#[cfg(test)]\nmod tests {\n    use std::fs::File;\n    use std::path::PathBuf;\n\n    use crate::aml_core::file_data_manager::*;\n\n    #[test]\n    fn test_get_file_absolute_path() {\n        // arrange\n        let project_dir = \"test_project\";\n        let file_name = \"test_file.wav\".to_string();\n        let app_dir = PathBuf::from(\"~/.local/share/aml_connect/\");\n        let expected_file_path =\n            PathBuf::from(\"~/.local/share/aml_connect/test_project/audio/test_file.wav\");\n\n        // act\n        let file_path =\n            put_files::get_file_absolute_path(project_dir, file_name, \u0026app_dir).unwrap();\n\n        // assert\n        assert_eq!(file_path, expected_file_path);\n    }\n\n    #[ignore]\n    #[test]\n    fn test_validate_exists() {\n        // arrange\n        let project_slug = \"test_project\";\n        let file_name = \"test_file.wav\".to_string();\n\n        // Get the user's home directory\n        let home_dir = dirs::home_dir().unwrap();\n\n        // Define the subpath\n        let subpath = \".local/share/aml_connect/\";\n\n        // Create a PathBuf by concatenating the home directory with the subpath\n        let app_dir = home_dir.join(subpath);\n\n        let file_path =\n            put_files::get_file_absolute_path(project_slug, file_name.clone(), \u0026app_dir).unwrap();\n        println!(\"file_path: {:?}\", file_path);\n        let _ = File::create(\u0026file_path).expect(\"Error encountered while creating file!\");\n\n        let fur = FileUploadRequest {\n            file_name: file_name.clone(),\n            dataset_type: DataSet::Training,\n        };\n\n        // act\n        let result = put_files::validate_exists(project_slug, \u0026fur, \u0026app_dir);\n        let _ = std::fs::remove_file(file_path);\n\n        // assert\n        assert!(result.is_ok());\n    }\n\n    #[ignore]\n    #[test]\n    fn test_validate_exists_2() {\n        // arrange\n        let project_slug = \"test_project\";\n        let file_name = \"test_file.wav\".to_string();\n\n        // Get the user's home directory\n        let home_dir = dirs::home_dir().unwrap();\n\n        // Define the subpath\n        let subpath = \".local/share/aml_connect/\";\n\n        // Create a PathBuf by concatenating the home directory with the subpath\n        let app_dir = home_dir.join(subpath);\n\n        let file_path =\n            put_files::get_file_absolute_path(project_slug, file_name.clone(), \u0026app_dir).unwrap();\n        println!(\"file_path: {:?}\", file_path);\n        let _ = File::create(\u0026file_path).expect(\"Error encountered while creating file!\");\n\n        let fur = FileUploadRequest {\n            file_name: \"test_file2.wav\".to_string(), // different filename\n            dataset_type: DataSet::Training,\n        };\n\n        // act\n        let result = put_files::validate_exists(project_slug, \u0026fur, \u0026app_dir);\n        let _ = std::fs::remove_file(file_path);\n\n        // assert\n        assert!(result.is_err());\n    }\n\n    #[test]\n    fn test_validate_extension() {\n        // arrange\n        let file_path = PathBuf::from(\"~/.local/share/aml_connect/test_project/test_file.wav\");\n\n        // act\n        let result = put_files::validate_extension(\u0026file_path, String::from(\"wav\"));\n\n        // assert\n        assert!(result.is_ok());\n    }\n\n    #[test]\n    fn test_validate_extension2() {\n        // arrange\n        let file_path = PathBuf::from(\"~/.local/share/aml_connect/test_project/test_file.mp3\");\n\n        // act\n        let result = put_files::validate_extension(\u0026file_path, String::from(\"wav\"));\n\n        // assert\n        assert!(result.is_err());\n    }\n}\n","traces":[{"line":14,"address":[5774099,5774142,5773632],"length":1,"stats":{"Line":2},"fn_name":"get_file_absolute_path"},{"line":19,"address":[5773890,5773795,5773701,5774003],"length":1,"stats":{"Line":8},"fn_name":null},{"line":23,"address":[5774710,5774176],"length":1,"stats":{"Line":1},"fn_name":"validate_exists"},{"line":28,"address":[5774426,5774253],"length":1,"stats":{"Line":1},"fn_name":null},{"line":29,"address":[5774404,5774620,5774515],"length":1,"stats":{"Line":3},"fn_name":null},{"line":30,"address":[5774541],"length":1,"stats":{"Line":1},"fn_name":null},{"line":35,"address":[5775240,5774736,5775121],"length":1,"stats":{"Line":2},"fn_name":"validate_extension"},{"line":36,"address":[5775164,5775136,5775096,5774933],"length":1,"stats":{"Line":5},"fn_name":null},{"line":37,"address":[5774824,5774987,5774756],"length":1,"stats":{"Line":6},"fn_name":null},{"line":46,"address":[5775147],"length":1,"stats":{"Line":2},"fn_name":null},{"line":50,"address":[5775280],"length":1,"stats":{"Line":1},"fn_name":"validate_size"},{"line":51,"address":[5775504,5775455],"length":1,"stats":{"Line":1},"fn_name":null},{"line":52,"address":[5775295,5775463],"length":1,"stats":{"Line":1},"fn_name":null},{"line":55,"address":[5775493],"length":1,"stats":{"Line":1},"fn_name":null},{"line":60,"address":[5775568,5775870],"length":1,"stats":{"Line":1},"fn_name":"validate_files"},{"line":66,"address":[5775657],"length":1,"stats":{"Line":1},"fn_name":null},{"line":67,"address":[5775670],"length":1,"stats":{"Line":1},"fn_name":null},{"line":68,"address":[5775722],"length":1,"stats":{"Line":1},"fn_name":null},{"line":73,"address":[5775943,5775853,5776058],"length":1,"stats":{"Line":3},"fn_name":null},{"line":74,"address":[5776087],"length":1,"stats":{"Line":1},"fn_name":null},{"line":76,"address":[5776094],"length":1,"stats":{"Line":1},"fn_name":null},{"line":78,"address":[5776303,5776198],"length":1,"stats":{"Line":2},"fn_name":null},{"line":79,"address":[5776207],"length":1,"stats":{"Line":1},"fn_name":null},{"line":80,"address":[5776291],"length":1,"stats":{"Line":1},"fn_name":null},{"line":83,"address":[5776123],"length":1,"stats":{"Line":1},"fn_name":null},{"line":84,"address":[5776482,5776155],"length":1,"stats":{"Line":2},"fn_name":null},{"line":85,"address":[5776669,5776624],"length":1,"stats":{"Line":0},"fn_name":null},{"line":86,"address":[5776633],"length":1,"stats":{"Line":0},"fn_name":null},{"line":87,"address":[5776657],"length":1,"stats":{"Line":0},"fn_name":null},{"line":89,"address":[5776596,5776777],"length":1,"stats":{"Line":2},"fn_name":null},{"line":90,"address":[5776956,5776911],"length":1,"stats":{"Line":0},"fn_name":null},{"line":91,"address":[5776920],"length":1,"stats":{"Line":0},"fn_name":null},{"line":92,"address":[5776944],"length":1,"stats":{"Line":0},"fn_name":null},{"line":95,"address":[5777181],"length":1,"stats":{"Line":1},"fn_name":null},{"line":96,"address":[5776869],"length":1,"stats":{"Line":1},"fn_name":null},{"line":97,"address":[5777045],"length":1,"stats":{"Line":1},"fn_name":null},{"line":98,"address":[5777113],"length":1,"stats":{"Line":1},"fn_name":null},{"line":117,"address":[5777312,5782623,5780092],"length":1,"stats":{"Line":1},"fn_name":"save_input_files"},{"line":123,"address":[5777394],"length":1,"stats":{"Line":1},"fn_name":null},{"line":125,"address":[5777507,5777555],"length":1,"stats":{"Line":2},"fn_name":null},{"line":126,"address":[5777571],"length":1,"stats":{"Line":1},"fn_name":null},{"line":129,"address":[5777624],"length":1,"stats":{"Line":1},"fn_name":null},{"line":131,"address":[5777719],"length":1,"stats":{"Line":1},"fn_name":null},{"line":132,"address":[5778017],"length":1,"stats":{"Line":0},"fn_name":null},{"line":133,"address":[5778081],"length":1,"stats":{"Line":0},"fn_name":null},{"line":137,"address":[5778254,5777943,5780472],"length":1,"stats":{"Line":3},"fn_name":null},{"line":138,"address":[5778512],"length":1,"stats":{"Line":1},"fn_name":null},{"line":139,"address":[5778664,5778568],"length":1,"stats":{"Line":2},"fn_name":null},{"line":141,"address":[5778776,5778859],"length":1,"stats":{"Line":2},"fn_name":null},{"line":142,"address":[5778994],"length":1,"stats":{"Line":1},"fn_name":null},{"line":144,"address":[5779121],"length":1,"stats":{"Line":1},"fn_name":null},{"line":145,"address":[5779143],"length":1,"stats":{"Line":1},"fn_name":null},{"line":146,"address":[5779198],"length":1,"stats":{"Line":1},"fn_name":null},{"line":147,"address":[5779292],"length":1,"stats":{"Line":1},"fn_name":null},{"line":148,"address":[5779319],"length":1,"stats":{"Line":1},"fn_name":null},{"line":149,"address":[5779346],"length":1,"stats":{"Line":1},"fn_name":null},{"line":150,"address":[5779364],"length":1,"stats":{"Line":1},"fn_name":null},{"line":154,"address":[5779603],"length":1,"stats":{"Line":1},"fn_name":null},{"line":158,"address":[5779710],"length":1,"stats":{"Line":1},"fn_name":null},{"line":160,"address":[5779726,5779788],"length":1,"stats":{"Line":2},"fn_name":null},{"line":161,"address":[5780199,5779892],"length":1,"stats":{"Line":0},"fn_name":null},{"line":162,"address":[5779908],"length":1,"stats":{"Line":0},"fn_name":null},{"line":163,"address":[5780155],"length":1,"stats":{"Line":0},"fn_name":null},{"line":164,"address":[5780065,5779935],"length":1,"stats":{"Line":0},"fn_name":null},{"line":168,"address":[5779794,5780353],"length":1,"stats":{"Line":2},"fn_name":null},{"line":173,"address":[5780743,5781620,5780492],"length":1,"stats":{"Line":3},"fn_name":null},{"line":174,"address":[5780767],"length":1,"stats":{"Line":1},"fn_name":null},{"line":176,"address":[5780938,5781048],"length":1,"stats":{"Line":2},"fn_name":null},{"line":180,"address":[5781197],"length":1,"stats":{"Line":1},"fn_name":null},{"line":181,"address":[6046448,6046638],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"},{"line":182,"address":[6046535],"length":1,"stats":{"Line":0},"fn_name":null},{"line":183,"address":[6046471],"length":1,"stats":{"Line":0},"fn_name":null},{"line":187,"address":[5781245,5781539,5781558],"length":1,"stats":{"Line":2},"fn_name":null},{"line":190,"address":[5781941,5780709,5781660],"length":1,"stats":{"Line":3},"fn_name":null},{"line":191,"address":[5781983,5782231],"length":1,"stats":{"Line":1},"fn_name":null},{"line":192,"address":[5781962],"length":1,"stats":{"Line":1},"fn_name":null},{"line":194,"address":[6046672,6046690],"length":1,"stats":{"Line":0},"fn_name":"{closure#1}"},{"line":195,"address":[5782358,5782324,5782146],"length":1,"stats":{"Line":2},"fn_name":null},{"line":196,"address":[5782331,5782436],"length":1,"stats":{"Line":2},"fn_name":null},{"line":199,"address":[5781804],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":64,"coverable":80},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","mod.rs"],"content":"use serde::{Deserialize, Serialize};\nuse thiserror::Error;\nuse ts_rs::TS;\n\npub mod date_time;\npub mod db_adapter;\npub mod element_repository;\npub mod file_data_manager;\npub mod network_manager;\npub mod project_manager;\n\n#[derive(Error, Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum AppError {\n    #[error(\"internal error\")]\n    InternalError(String),\n    #[error(\"project manager error\")]\n    ProjectManagerError(project_manager::ProjectManagerError),\n    #[error(\"file upload error\")]\n    FileUploadError(file_data_manager::FileUploadError),\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","network_manager.rs"],"content":"use std::path::PathBuf;\nuse std::{collections::HashMap, path::Path};\n\nuse anyhow::Result;\nuse mockall::{automock, predicate::*};\nuse serde::{Deserialize, Serialize};\nuse tauri::api::process::Command;\nuse ts_rs::TS;\n\nuse std::fs;\nuse std::io::Write;\nuse thiserror::Error;\n\nuse crate::aml_core::db_adapter::DbConn;\nuse crate::aml_core::project_manager::get_projects;\n\npub struct AmlSimulatorSidecar {\n    pub sidecar_name: String,\n}\n\n#[derive(Error, Debug, Serialize, Deserialize, TS, PartialEq, Clone)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum SimulatorError {\n    #[error(\"Failed to Build sidecar command\")]\n    CommandBuildError(String),\n    #[error(\"Failed to execute sidecar command\")]\n    CommandExecutionError(String),\n    #[error(\"Failed to parse sidecar output as JSON\")]\n    JsonParseError(String),\n    #[error(\"Directory not found\")]\n    DirectoryError(String),\n    #[error(\"File not found\")]\n    FileError(String),\n    #[error(\"Unsuccessful serialization\")]\n    SerializationError(String),\n    #[error(\"Project Not Found\")]\n    ProjectNotFoundError(String),\n}\n\n#[derive(Error, Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum RequestParseError {\n    #[error(\"Failed to parse request to proper type\")]\n    MalformedRequest(String),\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct SimulateNetworkRequest {\n    pub network: NetworkVO,\n    pub project_slug: String,\n    pub audio_file_path: String,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct SimulateNetworkResponse {\n    //// Not exported because of the size of the HashMap (2MB+)\n    //// Also, the frontend doesn't need this data yet\n    // pub response: HashMap\u003cString, Vec\u003cf64\u003e\u003e,\n    pub py_code_path: String,\n    pub visualization_path: String,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct Node {\n    pub id: String,\n    pub name: String,\n    pub parent_network_id: Option\u003cu32\u003e,\n    pub terminal_ids: Vec\u003cString\u003e,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct NetworkVO {\n    //id is optional so that frontend doesn't need to send an id to backend\n    //if backend notices id is null, this means backend needs to generate an\n    //id for this network (and propagage to corresponding parent_network_id fields)\n    pub id: Option\u003cu32\u003e,\n    pub name: String,\n    pub elements: Vec\u003cElementVO\u003e,\n    pub nodes: Vec\u003cNode\u003e,\n\n    pub creator_id: u32,\n}\n\nimpl NetworkVO {\n    pub fn to_network(self) -\u003e Result\u003cNetwork, RequestParseError\u003e {\n        let mut elements: Vec\u003cElement\u003e = Vec::new();\n        for element in self.elements {\n            elements.push(element.to_element()?);\n        }\n\n        Ok(Network {\n            id: self.id,\n            name: self.name,\n            elements: elements,\n            nodes: vec![],\n            creator_id: self.creator_id,\n        })\n    }\n}\n\n//// Not exported due to NetworkVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct Network {\n    //id is optional so that frontend doesn't need to send an id to backend\n    //if backend notices id is null, this means backend needs to generate an\n    //id for this network (and propagage to corresponding parent_network_id fields)\n    pub id: Option\u003cu32\u003e,\n    pub name: String,\n    pub elements: Vec\u003cElement\u003e,\n    pub nodes: Vec\u003cNode\u003e,\n\n    pub creator_id: u32,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct ElementVO {\n    pub id: String,\n    pub parent_network_id: Option\u003cu32\u003e,\n    pub name: String,\n\n    pub type_name: String,\n    pub element_type_params: HashMap\u003cString, HashMap\u003cString, String\u003e\u003e,\n\n    pub terminals: Vec\u003cTerminal\u003e,\n    pub position: Position,\n}\n\nimpl ElementVO {\n    fn to_element(self) -\u003e Result\u003cElement, RequestParseError\u003e {\n        let params: Parameters = match self.type_name.as_str() {\n            \"AcDiff\" =\u003e Parameters::AcDiff(AcDiffParams::from_hashmap(\n                self.element_type_params.get(\"AcDiff\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: AcDiff\".to_string()),\n                )?,\n            )?),\n            \"AsymmetricIntegrator\" =\u003e {\n                Parameters::AsymmetricIntegrator(AsymmetricIntegratorParams::from_hashmap(\n                    self.element_type_params.get(\"AsymmetricIntegrator\").ok_or(\n                        RequestParseError::MalformedRequest(\n                            \"Missing key: AsymmetricIntegrator\".to_string(),\n                        ),\n                    )?,\n                )?)\n            }\n            \"Comparator\" =\u003e Parameters::Comparator(ComparatorParams::from_hashmap(\n                self.element_type_params.get(\"Comparator\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: Comparator\".to_string()),\n                )?,\n            )?),\n            \"Filter\" =\u003e Parameters::Filter(FilterParams::from_hashmap(\n                self.element_type_params.get(\"Filter\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: Filter\".to_string()),\n                )?,\n            )?),\n            \"Filterbank\" =\u003e Parameters::Filterbank(FilterbankParams::from_hashmap(\n                self.element_type_params.get(\"Filterbank\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: Filterbank\".to_string()),\n                )?,\n            )?),\n            \"GainOpamp\" =\u003e Parameters::GainOpamp(GainOpampParams::from_hashmap(\n                self.element_type_params.get(\"GainOpamp\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: GainOpamp\".to_string()),\n                )?,\n            )?),\n            \"LookupTable\" =\u003e Parameters::LookupTable(LookupTableParams::from_hashmap(\n                self.element_type_params.get(\"LookupTable\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: LookupTable\".to_string()),\n                )?,\n            )?),\n            \"DelayFlipFlop\" =\u003e Parameters::DelayFlipFlop,\n            \"Multiplier\" =\u003e Parameters::Multiplier(MultiplierParams::from_hashmap(\n                self.element_type_params.get(\"Multiplier\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: Multiplier\".to_string()),\n                )?,\n            )?),\n            \"Mux2\" =\u003e Parameters::Mux2,\n            \"NeuralNet\" =\u003e Parameters::NeuralNet(NeuralNetParams::from_hashmap(\n                self.element_type_params.get(\"NeuralNet\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: NeuralNet\".to_string()),\n                )?,\n            )?),\n            \"PeakDetector\" =\u003e Parameters::PeakDetector(PeakDetectorParams::from_hashmap(\n                self.element_type_params.get(\"PeakDetector\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: PeakDetector\".to_string()),\n                )?,\n            )?),\n            \"PGA\" =\u003e {\n                Parameters::PGA(PGAParams::from_hashmap(\n                    self.element_type_params.get(\"PGA\").ok_or(\n                        RequestParseError::MalformedRequest(\"Missing key: PGA\".to_string()),\n                    )?,\n                )?)\n            }\n            \"SynthesizedFilter\" =\u003e {\n                Parameters::SynthesizedFilter(SynthesizedFilterParams::from_hashmap(\n                    self.element_type_params.get(\"SynthesizedFilter\").ok_or(\n                        RequestParseError::MalformedRequest(\n                            \"Missing key: SynthesizedFilter\".to_string(),\n                        ),\n                    )?,\n                )?)\n            }\n            \"Terminal\" =\u003e Parameters::Terminal(TerminalParams::from_hashmap(\n                self.element_type_params.get(\"Terminal\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: Terminal\".to_string()),\n                )?,\n            )?),\n            \u0026_ =\u003e {\n                return Err(RequestParseError::MalformedRequest(format!(\n                    \"Invalid element type {}\",\n                    self.type_name\n                )))\n            }\n        };\n\n        Ok(Element {\n            id: self.id,\n            parent_network_id: self.parent_network_id,\n            name: self.name,\n            type_name: self.type_name,\n            element_type_params: params,\n            terminals: self.terminals,\n            position: self.position,\n        })\n    }\n}\n\n//// Not exported dueto ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct Element {\n    pub id: String,\n    pub parent_network_id: Option\u003cu32\u003e,\n    pub name: String,\n\n    pub type_name: String,\n    pub element_type_params: Parameters,\n\n    pub terminals: Vec\u003cTerminal\u003e,\n    pub position: Position,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct Position {\n    pub x: f32,\n    pub y: f32,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct Terminal {\n    pub id: String,\n    pub parent_element_id: String,\n    pub type_name: String,\n    pub node_name: String,\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum Parameters {\n    AcDiff(AcDiffParams),\n    AsymmetricIntegrator(AsymmetricIntegratorParams),\n    Comparator(ComparatorParams),\n    Filter(FilterParams),\n    Filterbank(FilterbankParams),\n    GainOpamp(GainOpampParams),\n    LookupTable(LookupTableParams),\n    DelayFlipFlop, //has no params\n    Multiplier(MultiplierParams),\n    Mux2, //has no params\n    NeuralNet(NeuralNetParams),\n    PeakDetector(PeakDetectorParams),\n    PGA(PGAParams),\n    SynthesizedFilter(SynthesizedFilterParams),\n    Terminal(TerminalParams),\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct AcDiffParams {\n    pub gain: f64,\n    pub bias: Option\u003cf64\u003e,\n}\n\nimpl AcDiffParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let gain = params\n            .get(\"gain\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: gain\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: gain (expected - float)\".to_string(),\n                )\n            })?;\n        let bias = match params.get(\"bias\") {\n            Some(bias) =\u003e Some(bias.parse::\u003cf64\u003e().map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: bias (expected - float)\".to_string(),\n                )\n            })?),\n            None =\u003e None,\n        };\n\n        Ok(AcDiffParams {\n            gain: gain,\n            bias: bias,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct AsymmetricIntegratorParams {\n    pub up: f64,\n    pub down: f64,\n    pub up_down_type: UpDownType,\n    pub comparator_enable: bool,\n    pub buffer_gm: Option\u003cf64\u003e,\n    pub capacitor_configuration: Option\u003cCapacitorConfiguration\u003e,\n    pub parasitic_capacitance: Option\u003cf64\u003e,\n    pub unit_capacitance: Option\u003cf64\u003e,\n}\n\nimpl AsymmetricIntegratorParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let up = params\n            .get(\"up\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: up\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: up (expected - float)\".to_string(),\n                )\n            })?;\n        let down = params\n            .get(\"down\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: down\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: down (expected - float)\".to_string(),\n                )\n            })?;\n        let up_down_type = match params\n            .get(\"up_down_type\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: up_down_type\".to_string(),\n            ))?\n            .as_str()\n        {\n            \"Rate\" =\u003e UpDownType::Rate,\n            \"Hang\" =\u003e UpDownType::Hang,\n            _ =\u003e {\n                return Err(RequestParseError::MalformedRequest(\n                    \"Invalid value for key: up_down_type (expected - Rate or Hang)\".to_string(),\n                ))\n            }\n        };\n\n        let comparator_enable = params\n            .get(\"comparator_enable\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: comparator_enable\".to_string(),\n            ))?\n            .parse::\u003cbool\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: comparator_enable (expected - bool)\".to_string(),\n                )\n            })?;\n\n        Ok(AsymmetricIntegratorParams {\n            up: up,\n            down: down,\n            up_down_type: up_down_type,\n            comparator_enable: comparator_enable,\n            buffer_gm: None,\n            capacitor_configuration: None,\n            parasitic_capacitance: None,\n            unit_capacitance: None,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct ComparatorParams {\n    pub threshold: f64,\n    pub hysteresis_voltage: Option\u003cf64\u003e,\n}\n\nimpl ComparatorParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let threshold = params\n            .get(\"threshold\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: threshold\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: threshold (expected - float)\".to_string(),\n                )\n            })?;\n        let hysteresis_voltage = match params.get(\"hysteresis_voltage\") {\n            Some(hysteresis_voltage) =\u003e Some(hysteresis_voltage.parse::\u003cf64\u003e().map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: hysteresis_voltage (expected - float)\".to_string(),\n                )\n            })?),\n            None =\u003e None,\n        };\n\n        Ok(ComparatorParams {\n            threshold: threshold,\n            hysteresis_voltage: hysteresis_voltage,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct FilterParams {\n    pub characteristic_frequency: f64,\n    pub quality_factor: f64,\n    pub filter_type: FilterType,\n}\n\nimpl FilterParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let characteristic_frequency = params\n            .get(\"characteristic_frequency\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: characteristic_frequency\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: characteristic_frequency (expected - float)\"\n                        .to_string(),\n                )\n            })?;\n        let quality_factor = params\n            .get(\"quality_factor\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: quality_factor\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: quality_factor (expected - float)\".to_string(),\n                )\n            })?;\n        let filter_type =\n            match params\n                .get(\"filter_type\")\n                .ok_or(RequestParseError::MalformedRequest(\n                    \"Missing key: filter_type\".to_string(),\n                ))?\n                .as_str()\n            {\n                \"lpf1\" =\u003e FilterType::lpf1,\n                \"lpf2\" =\u003e FilterType::lpf2,\n                \"bpf2\" =\u003e FilterType::bpf2,\n                \"hpf1\" =\u003e FilterType::hpf1,\n                \"hpf2\" =\u003e FilterType::hpf2,\n                _ =\u003e return Err(RequestParseError::MalformedRequest(\n                    \"Invalid value for key: filter_type (expected - lpf1, lpf2, bpf2, hpf1, hpf2)\"\n                        .to_string(),\n                )),\n            };\n\n        Ok(FilterParams {\n            characteristic_frequency: characteristic_frequency,\n            quality_factor: quality_factor,\n            filter_type: filter_type,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct FilterbankParams {\n    pub band_frequencies: Vec\u003cu64\u003e,\n    pub quality_factor: Vec\u003cf64\u003e,\n    pub attack_rates: Vec\u003cf64\u003e,\n    pub decay_rates: Vec\u003cf64\u003e,\n}\n\nfn parse_float_vector(input: \u0026str) -\u003e Option\u003cVec\u003cf64\u003e\u003e {\n    // Remove leading and trailing whitespaces and square brackets\n    let trimmed_input = input.trim_start_matches('[').trim_end_matches(']');\n\n    if trimmed_input.len() == 0 {\n        return Some(vec![]);\n    }\n\n    // Split the input string by commas\n    let values: Vec\u003c\u0026str\u003e = trimmed_input.split(',').collect();\n\n    // Parse each value as a float and collect into a Vec\u003cf64\u003e\n    let result: Option\u003cVec\u003cf64\u003e\u003e = values\n        .into_iter()\n        .map(|v| v.trim().parse::\u003cf64\u003e().ok())\n        .collect();\n\n    result\n}\n\nfn parse_int_vector(input: \u0026str) -\u003e Option\u003cVec\u003cu64\u003e\u003e {\n    // Remove leading and trailing whitespaces and square brackets\n    let trimmed_input = input.trim_start_matches('[').trim_end_matches(']');\n\n    if trimmed_input.len() == 0 {\n        return Some(vec![]);\n    }\n\n    // Split the input string by commas\n    let values: Vec\u003c\u0026str\u003e = trimmed_input.split(',').collect();\n\n    // Parse each value as a float and collect into a Vec\u003cu64\u003e\n    let result: Option\u003cVec\u003cu64\u003e\u003e = values\n        .into_iter()\n        .map(|v| v.trim().parse::\u003cu64\u003e().ok())\n        .collect();\n\n    result\n}\n\nimpl FilterbankParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let band_frequencies = parse_int_vector(params.get(\"band_frequencies\").ok_or(\n            RequestParseError::MalformedRequest(\"Missing key: band_frequencies\".to_string()),\n        )?)\n        .ok_or(RequestParseError::MalformedRequest(\n            \"Invalid value for key: band_frequencies (expected - Vec\u003cf64\u003e)\".to_string(),\n        ))?;\n\n        let quality_factor = parse_float_vector(params.get(\"quality_factor\").ok_or(\n            RequestParseError::MalformedRequest(\"Missing key: quality_factor\".to_string()),\n        )?)\n        .ok_or(RequestParseError::MalformedRequest(\n            \"Invalid value for key: quality_factor (expected - Vec\u003cf64\u003e)\".to_string(),\n        ))?;\n\n        let attack_rates = parse_float_vector(params.get(\"attack_rates\").ok_or(\n            RequestParseError::MalformedRequest(\"Missing key: attack_rates\".to_string()),\n        )?)\n        .ok_or(RequestParseError::MalformedRequest(\n            \"Invalid value for key: attack_rates (expected - Vec\u003cf64\u003e)\".to_string(),\n        ))?;\n\n        let decay_rates = parse_float_vector(params.get(\"decay_rates\").ok_or(\n            RequestParseError::MalformedRequest(\"Missing key: decay_rates\".to_string()),\n        )?)\n        .ok_or(RequestParseError::MalformedRequest(\n            \"Invalid value for key: decay_rates (expected - Vec\u003cf64\u003e)\".to_string(),\n        ))?;\n\n        Ok(FilterbankParams {\n            band_frequencies: band_frequencies,\n            quality_factor: quality_factor,\n            attack_rates: attack_rates,\n            decay_rates: decay_rates,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct GainOpampParams {\n    pub gain_mode: GainOpampMode,\n    //pub opamp_implementation: OpampType,  //not supported as it is not exposed\n    pub feedback_cap_count: f64,\n}\n\nimpl GainOpampParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let gain_mode = match params.get(\"gain_mode\")\n            .ok_or(RequestParseError::MalformedRequest(\"Missing key: gain_mode\".to_string()))?\n            .as_str() {\n                \"Noninverting1x\" =\u003e GainOpampMode::Noninverting1x,\n                \"Noninverting11x\" =\u003e GainOpampMode::Noninverting11x,\n                \"Inverting2x\" =\u003e GainOpampMode::Inverting2x,\n                \"Inverting4x\" =\u003e GainOpampMode::Inverting4x,\n                \"Inverting10x\" =\u003e GainOpampMode::Inverting10x,\n                \"Inverting20x\" =\u003e GainOpampMode::Inverting20x,\n                _ =\u003e return Err(RequestParseError::MalformedRequest(\"Invalid value for key: gain_mode (expected - Noninverting1x, Noninverting11x, Inverting2x, Inverting4x, Inverting10x, Inverting20x)\".to_string())),\n            };\n        let feedback_cap_count = params\n            .get(\"feedback_cap_count\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: feedback_cap_count\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: feedback_cap_count (expected - float)\".to_string(),\n                )\n            })?;\n\n        Ok(GainOpampParams {\n            gain_mode: gain_mode,\n            feedback_cap_count: feedback_cap_count,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct LookupTableParams {\n    pub expression: String,\n}\n\nimpl LookupTableParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        // TODO: Validate expression\n        let expression = params\n            .get(\"expression\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: expression\".to_string(),\n            ))?\n            .to_string();\n\n        Ok(LookupTableParams {\n            expression: expression,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct MultiplierParams {\n    pub slope: f64,\n}\n\nimpl MultiplierParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let slope = params\n            .get(\"slope\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: slope\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: slope (expected - float)\".to_string(),\n                )\n            })?;\n\n        Ok(MultiplierParams { slope: slope })\n    }\n}\n\nfn parse_activation_function_vector(input: \u0026str) -\u003e Option\u003cVec\u003cActivationFunction\u003e\u003e {\n    // Remove leading and trailing whitespaces and square brackets\n    let trimmed_input = input.trim_start_matches('[').trim_end_matches(']');\n\n    if trimmed_input.len() == 0 {\n        return Some(vec![]);\n    }\n\n    // Split the input string by commas\n    let values: Vec\u003c\u0026str\u003e = trimmed_input.split(',').collect();\n\n    // Parse each value as a float and collect into a Vec\u003cActivationFunction\u003e\n    let result: Option\u003cVec\u003cActivationFunction\u003e\u003e = values\n        .into_iter()\n        .map(|v| match v.trim() {\n            \"Tanh\" =\u003e Some(ActivationFunction::Tanh),\n            \"Sigmoid\" =\u003e Some(ActivationFunction::Sigmoid),\n            \"ReLU\" =\u003e Some(ActivationFunction::ReLU),\n            \"Linear\" =\u003e Some(ActivationFunction::Linear),\n            _ =\u003e None,\n        })\n        .collect();\n\n    result\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct NeuralNetParams {\n    pub weights: Vec\u003cf64\u003e,\n    pub biases: Vec\u003cf64\u003e,\n    pub activation_function: Vec\u003cActivationFunction\u003e,\n    pub activation_scale: Option\u003cf64\u003e,\n    pub input_compress_scale: Option\u003cf64\u003e,\n    pub input_compression_type: Option\u003cActivationFunction\u003e,\n}\n\nimpl NeuralNetParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let weights = parse_float_vector(params.get(\"weights\").ok_or(\n            RequestParseError::MalformedRequest(\"Missing key: weights\".to_string()),\n        )?)\n        .ok_or(RequestParseError::MalformedRequest(\n            \"Invalid value for key: weights (expected - Vec\u003cf64\u003e)\".to_string(),\n        ))?;\n\n        let biases = parse_float_vector(params.get(\"biases\").ok_or(\n            RequestParseError::MalformedRequest(\"Missing key: biases\".to_string()),\n        )?)\n        .ok_or(RequestParseError::MalformedRequest(\n            \"Invalid value for key: biases (expected - Vec\u003cf64\u003e)\".to_string(),\n        ))?;\n\n        let activation_function =\n            parse_activation_function_vector(params.get(\"activation_function\").ok_or(\n                RequestParseError::MalformedRequest(\"Missing key: activation_function\".to_string()),\n            )?)\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Invalid value for key: activation_function (expected - Vec\u003cActivationFunction\u003e)\"\n                    .to_string(),\n            ))?;\n\n        let activation_scale = match params.get(\"activation_scale\") {\n            Some(activation_scale) =\u003e Some(activation_scale.parse::\u003cf64\u003e().map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: activation_scale (expected - float)\".to_string(),\n                )\n            })?),\n            None =\u003e None,\n        };\n        let input_compress_scale = match params.get(\"input_compress_scale\") {\n            Some(input_compress_scale) =\u003e {\n                Some(input_compress_scale.parse::\u003cf64\u003e().map_err(|_| {\n                    RequestParseError::MalformedRequest(\n                        \"Invalid value for key: input_compress_scale (expected - float)\"\n                            .to_string(),\n                    )\n                })?)\n            }\n            None =\u003e None,\n        };\n        let input_compression_type = match params.get(\"input_compression_type\") {\n            Some(input_compression_type) =\u003e Some(\n                match input_compression_type.as_str() {\n                    \"Tanh\" =\u003e ActivationFunction::Tanh,\n                    \"Sigmoid\" =\u003e ActivationFunction::Sigmoid,\n                    \"ReLU\" =\u003e ActivationFunction::ReLU,\n                    \"Linear\" =\u003e ActivationFunction::Linear,\n                    _ =\u003e return Err(RequestParseError::MalformedRequest(\"Invalid value for key: input_compression_type (expected - Tanh, Sigmoid, ReLU, Linear)\".to_string())),\n                }\n            ),\n            None =\u003e None,\n        };\n        Ok(NeuralNetParams {\n            weights: weights,\n            biases: biases,\n            activation_function: activation_function,\n            activation_scale: activation_scale,\n            input_compress_scale: input_compress_scale,\n            input_compression_type: input_compression_type,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct PeakDetectorParams {\n    pub atk: f64,\n    pub dec: f64,\n    pub model_version: ModelVersion,\n    pub buff: Option\u003cf64\u003e,\n    pub parasitic_ratio: Option\u003cf64\u003e,\n}\n\nimpl PeakDetectorParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let atk = params\n            .get(\"atk\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: atk\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: atk (expected - float)\".to_string(),\n                )\n            })?;\n        let dec = params\n            .get(\"dec\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: dec\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: dec (expected - float)\".to_string(),\n                )\n            })?;\n        let model_version = match params\n            .get(\"model_version\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: model_version\".to_string(),\n            ))?\n            .as_str()\n        {\n            \"FirstOrder\" =\u003e ModelVersion::FirstOrder,\n            \"SecondOrder\" =\u003e ModelVersion::SecondOrder,\n            _ =\u003e {\n                return Err(RequestParseError::MalformedRequest(\n                    \"Invalid value for key: model_version (expected - FirstOrder, SecondOrder)\"\n                        .to_string(),\n                ))\n            }\n        };\n        let buff = match params.get(\"buff\") {\n            Some(buff) =\u003e Some(buff.parse::\u003cf64\u003e().map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: buff (expected - float)\".to_string(),\n                )\n            })?),\n            None =\u003e None,\n        };\n        let parasitic_ratio = match params.get(\"parasitic_ratio\") {\n            Some(parasitic_ratio) =\u003e Some(parasitic_ratio.parse::\u003cf64\u003e().map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: parasitic_ratio (expected - float)\".to_string(),\n                )\n            })?),\n            None =\u003e None,\n        };\n        Ok(PeakDetectorParams {\n            atk: atk,\n            dec: dec,\n            model_version: model_version,\n            buff: buff,\n            parasitic_ratio: parasitic_ratio,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\n#[allow(non_snake_case)]\npub struct PGAParams {\n    pub Av1: f64,\n    pub Av2: f64,\n    pub den: Option\u003cf64\u003e,\n}\n\nimpl PGAParams {\n    #[allow(non_snake_case)]\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let Av1 = params\n            .get(\"Av1\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: Av1\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: Av1 (expected - float)\".to_string(),\n                )\n            })?;\n        let Av2 = params\n            .get(\"Av2\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: Av2\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: Av2 (expected - float)\".to_string(),\n                )\n            })?;\n        let den = match params.get(\"den\") {\n            Some(den) =\u003e Some(den.parse::\u003cf64\u003e().map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: den (expected - float)\".to_string(),\n                )\n            })?),\n            None =\u003e None,\n        };\n        Ok(PGAParams {\n            Av1: Av1,\n            Av2: Av2,\n            den: den,\n        })\n    }\n}\n\nfn parse_vector_vector_floats(input: \u0026str) -\u003e Option\u003cVec\u003cVec\u003cf64\u003e\u003e\u003e {\n    // Remove leading and trailing whitespaces and square brackets\n    let trimmed_input = input.trim_start_matches('[').trim_end_matches(']');\n\n    if trimmed_input.len() == 0 {\n        return Some(vec![]);\n    }\n\n    // Split the input string by commas\n    let values: Vec\u003c\u0026str\u003e = trimmed_input.split(\"],[\").collect();\n\n    // Parse each value as a float and collect into a Vec\u003cVec\u003cf64\u003e\u003e\n    let result: Option\u003cVec\u003cVec\u003cf64\u003e\u003e\u003e = values.into_iter().map(|v| parse_float_vector(v)).collect();\n\n    result\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct SynthesizedFilterParams {\n    pub coefficients: Vec\u003cVec\u003cf64\u003e\u003e,\n}\n\nimpl SynthesizedFilterParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let coefficients = parse_vector_vector_floats(params.get(\"coefficients\").ok_or(\n            RequestParseError::MalformedRequest(\"Missing key: coefficients\".to_string()),\n        )?)\n        .ok_or(RequestParseError::MalformedRequest(\n            \"Invalid value for key: coefficients (e.g. `[[1.0,2.0],[3.0,4.0]]`)\".to_string(),\n        ))?;\n\n        Ok(SynthesizedFilterParams {\n            coefficients: coefficients,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct TerminalParams {\n    pub hardware_pin: Option\u003cString\u003e,\n    pub is_input: bool,\n    pub is_output: bool,\n    pub is_ac_coupled: Option\u003cbool\u003e,\n    pub is_extern: Option\u003cbool\u003e,\n}\n\nimpl TerminalParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let hardware_pin = match params.get(\"hardware_pin\") {\n            Some(hardware_pin) =\u003e Some(hardware_pin.to_string()),\n            None =\u003e None,\n        };\n        let is_input = params\n            .get(\"is_input\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: is_input\".to_string(),\n            ))?\n            .parse::\u003cbool\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: is_input (expected - bool)\".to_string(),\n                )\n            })?;\n        let is_output = params\n            .get(\"is_output\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: is_output\".to_string(),\n            ))?\n            .parse::\u003cbool\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: is_output (expected - bool)\".to_string(),\n                )\n            })?;\n        let is_ac_coupled = match params.get(\"is_ac_coupled\") {\n            Some(is_ac_coupled) =\u003e Some(is_ac_coupled.parse::\u003cbool\u003e().map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: is_ac_coupled (expected - bool)\".to_string(),\n                )\n            })?),\n            None =\u003e None,\n        };\n        let is_extern = match params.get(\"is_extern\") {\n            Some(is_extern) =\u003e Some(is_extern.parse::\u003cbool\u003e().map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: is_extern (expected - bool)\".to_string(),\n                )\n            })?),\n            None =\u003e None,\n        };\n        Ok(TerminalParams {\n            hardware_pin: hardware_pin,\n            is_input: is_input,\n            is_output: is_output,\n            is_ac_coupled: is_ac_coupled,\n            is_extern: is_extern,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\n#[allow(non_camel_case_types)]\n#[derive(PartialEq)]\npub enum CapacitorConfiguration {\n    Internal,\n    Internal2x,\n    Internal3x,\n    Internal4x,\n    Internal4x_2xS4_S3,\n    Internal4x_2xS4_S3_S2,\n    Internal4x_S4,\n    ParasiticOnly,\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\n#[allow(non_camel_case_types)]\n#[derive(PartialEq)]\npub enum FilterType {\n    lpf1,\n    lpf2,\n    bpf2,\n    hpf1,\n    hpf2,\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\n#[allow(non_camel_case_types)]\n#[derive(PartialEq)]\npub enum GainOpampMode {\n    Noninverting1x,\n    Noninverting11x,\n    Inverting2x,\n    Inverting4x,\n    Inverting10x,\n    Inverting20x,\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\n#[allow(non_camel_case_types)]\n#[derive(PartialEq)]\npub enum OpampType {\n    StageZero,\n    Pin,\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\n#[allow(non_camel_case_types)]\n#[derive(PartialEq)]\npub enum ModelVersion {\n    FirstOrder,\n    SecondOrder,\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\n#[allow(non_camel_case_types)]\n#[derive(PartialEq)]\npub enum UpDownType {\n    Rate,\n    Hang,\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize, PartialEq)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\n#[allow(non_camel_case_types)]\npub enum ActivationFunction {\n    Tanh,\n    Sigmoid,\n    ReLU,\n    Linear,\n}\n\nimpl AmlSimulatorSidecar {\n    pub fn new() -\u003e Self {\n        AmlSimulatorSidecar {\n            sidecar_name: String::from(\"aspinity_wrapper\"),\n        }\n    }\n\n    fn get_sidecar_name(\u0026self) -\u003e String {\n        self.sidecar_name.clone()\n    }\n}\n\n#[automock]\npub trait ExecutableSidecar {\n    fn get_output(\u0026self, params: Vec\u003cString\u003e) -\u003e Result\u003cString, SimulatorError\u003e;\n}\n\nimpl ExecutableSidecar for AmlSimulatorSidecar {\n    fn get_output(\u0026self, params: Vec\u003cString\u003e) -\u003e Result\u003cString, SimulatorError\u003e {\n        let command_output = Command::new_sidecar(self.get_sidecar_name())\n            .map_err(|e| SimulatorError::CommandBuildError(e.to_string()))?\n            .args(\u0026params)\n            .output()\n            .map_err(|e| SimulatorError::CommandExecutionError(e.to_string()))?;\n\n        Ok(command_output.stdout)\n    }\n}\n\npub trait NetworkSimulator {\n    fn list_elements\u003cE: ExecutableSidecar\u003e(sidecar: \u0026E) -\u003e Result\u003cString, SimulatorError\u003e;\n    fn sidecar_simulate_network\u003cE: ExecutableSidecar\u003e(\n        project_slug: \u0026str,\n        sidecar: \u0026E,\n        network: \u0026Network,\n        audio_file_path: \u0026Path,\n        app_dir: \u0026PathBuf,\n        db_conn: \u0026mut DbConn,\n    ) -\u003e Result\u003cSimulateNetworkResponse, SimulatorError\u003e;\n}\n\nfn save_network_to_dir(network: \u0026Network, dir: \u0026Path) -\u003e Result\u003cString, SimulatorError\u003e {\n    fs::create_dir_all(dir).map_err(|e| SimulatorError::DirectoryError(e.to_string()))?;\n\n    let network_json = serde_json::to_string(\u0026network).map_err(|e| {\n        SimulatorError::SerializationError(format!(\n            \"Failed to serialize network to JSON: {}\",\n            e.to_string()\n        ))\n    })?;\n\n    let file_path = dir.join(\"network.json\");\n    let mut file = fs::OpenOptions::new()\n        .write(true)\n        .create(true)\n        .truncate(true)\n        .open(\u0026file_path)\n        .map_err(|e| SimulatorError::FileError(e.to_string()))?;\n\n    file.write_all(network_json.as_bytes()).map_err(|e| {\n        SimulatorError::FileError(format!(\n            \"Failed to write network JSON to file: {}\",\n            e.to_string()\n        ))\n    })?;\n\n    // Flush the file buffer and sync all metadata to disk\n    file.flush()\n        .map_err(|e| SimulatorError::FileError(e.to_string()))?;\n    file.sync_all()\n        .map_err(|e| SimulatorError::FileError(e.to_string()))?;\n\n    Ok(file_path.as_os_str().to_str().unwrap().to_string())\n}\n\npub struct AmlSimulator {}\n\nimpl NetworkSimulator for AmlSimulator {\n    fn list_elements\u003cE: ExecutableSidecar\u003e(sidecar: \u0026E) -\u003e Result\u003cString, SimulatorError\u003e {\n        let params = vec![\"--get_elements\".to_string()];\n        sidecar.get_output(params)\n    }\n\n    fn sidecar_simulate_network\u003cE: ExecutableSidecar\u003e(\n        project_slug: \u0026str,\n        sidecar: \u0026E,\n        network: \u0026Network,\n        audio_file_path: \u0026Path,\n        app_dir: \u0026PathBuf,\n        db_conn: \u0026mut DbConn,\n    ) -\u003e Result\u003cSimulateNetworkResponse, SimulatorError\u003e {\n        let found: bool =\n            get_projects::project_exists_by_slug(project_slug, db_conn).map_err(|e| {\n                SimulatorError::ProjectNotFoundError(format!(\n                    \"Error: Could not query project_slug={} in database due to {}\",\n                    project_slug,\n                    e.to_string()\n                ))\n            })?;\n\n        if !found {\n            return Err(SimulatorError::ProjectNotFoundError(format!(\n                \"Error: Could not find project_slug={} in database\",\n                project_slug\n            )));\n        }\n\n        let absolute_file_path = Path::new(app_dir)\n            .join(project_slug)\n            .join(\"audio\")\n            .join(audio_file_path);\n\n        if !absolute_file_path.exists() {\n            return Err(SimulatorError::FileError(format!(\n                \"Audio file does not exist at path: {}\",\n                absolute_file_path.to_str().unwrap().to_string()\n            )));\n        }\n\n        let tmp_dir = Path::new(app_dir).join(project_slug).join(\"tmp\");\n        let network_file_path: String = save_network_to_dir(network, \u0026tmp_dir)?;\n\n        let params = vec![\n            \"--simulate_network\".to_string(),\n            \"-network\".to_string(),\n            network_file_path,\n            \"-wavfile\".to_string(),\n            absolute_file_path.to_str().unwrap().to_string(),\n            \"-tmp_dir\".to_string(),\n            tmp_dir.to_str().unwrap().to_string(),\n        ];\n\n        let binding = sidecar\n            .get_output(params.clone())\n            .map_err(|e| {\n                SimulatorError::CommandExecutionError(format!(\n                    \"Failed to execute sidecar: {}\",\n                    e.to_string()\n                ))\n            })?\n            .replace(\"\\'\", \"\\\"\");\n\n        let simulator_output = binding.as_str();\n\n        let output: SimulateNetworkResponse =\n            serde_json::from_str(simulator_output).map_err(|_| {\n                SimulatorError::SerializationError(format!(\n                    \"Failed to deserialize sidecar output: {}\",\n                    simulator_output\n                ))\n            })?;\n\n        Ok(output)\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use std::env;\n\n    use crate::aml_core::network_manager::*;\n    use mockall::*;\n\n    #[test]\n    fn test_aml_simulator_sidecar_name() {\n        // arrange\n        let obj = AmlSimulatorSidecar::new();\n        // act\n        let sidecar_file: String = obj.get_sidecar_name();\n        // assert\n        assert_eq!(sidecar_file, \"aspinity_wrapper\".to_string());\n    }\n\n    #[test]\n    fn test_list_elements_uses_correct_params() {\n        // arrange\n        let expected_param: Vec\u003cString\u003e = vec![\"--get_elements\".to_string()];\n        let expected_output: String = String::from(\"Dummy output\");\n        let expected_output_result: Result\u003cString, SimulatorError\u003e = Ok(expected_output.clone());\n\n        let mut mock = MockExecutableSidecar::new();\n        mock.expect_get_output()\n            .with(predicate::eq(expected_param))\n            .times(1)\n            .return_once(move |_| expected_output_result);\n\n        // act\n        let output = AmlSimulator::list_elements(\u0026mock);\n\n        //assert\n        assert_eq!(Ok(expected_output), output);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_AcDiffParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"gain\".to_string(), \"1.0\".to_string());\n        params.insert(\"bias\".to_string(), \"2.0\".to_string());\n\n        // act\n        let result = AcDiffParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().gain, 1.0);\n        assert_eq!(result.as_ref().unwrap().bias.unwrap(), 2.0);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_AcDiffParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"gain\".to_string(), \"not_float\".to_string());\n        params.insert(\"bias\".to_string(), \"2.0\".to_string());\n\n        // act\n        let result = AcDiffParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_AcDiffParams_from_hashmap_neg2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"gain\".to_string(), \"1.0\".to_string());\n        params.insert(\"bias\".to_string(), \"not_float\".to_string());\n\n        // act\n        let result = AcDiffParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_AsymmetricIntegratorParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"up\".to_string(), \"1.0\".to_string());\n        params.insert(\"down\".to_string(), \"2.0\".to_string());\n        params.insert(\"up_down_type\".to_string(), \"Rate\".to_string());\n        params.insert(\"comparator_enable\".to_string(), \"true\".to_string());\n\n        // act\n        let result = AsymmetricIntegratorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().up, 1.0);\n        assert_eq!(result.as_ref().unwrap().down, 2.0);\n        assert!(result.as_ref().unwrap().up_down_type == UpDownType::Rate);\n        assert_eq!(result.as_ref().unwrap().comparator_enable, true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_AsymmetricIntegratorParams_from_hashmap_2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"up\".to_string(), \"1.0\".to_string());\n        params.insert(\"down\".to_string(), \"2.0\".to_string());\n        params.insert(\"up_down_type\".to_string(), \"Hang\".to_string());\n        params.insert(\"comparator_enable\".to_string(), \"true\".to_string());\n\n        // act\n        let result = AsymmetricIntegratorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().up, 1.0);\n        assert_eq!(result.as_ref().unwrap().down, 2.0);\n        assert!(result.as_ref().unwrap().up_down_type == UpDownType::Hang);\n        assert_eq!(result.as_ref().unwrap().comparator_enable, true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_AsymmetricIntegratorParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"up\".to_string(), \"1.0\".to_string());\n        params.insert(\"down\".to_string(), \"2.0\".to_string());\n        params.insert(\"up_down_type\".to_string(), \"InvalidEnum\".to_string());\n        params.insert(\"comparator_enable\".to_string(), \"true\".to_string());\n\n        // act\n        let result = AsymmetricIntegratorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_AsymmetricIntegratorParams_from_hashmap_neg2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"up\".to_string(), \"not_float\".to_string());\n        params.insert(\"down\".to_string(), \"2.0\".to_string());\n        params.insert(\"up_down_type\".to_string(), \"Rate\".to_string());\n        params.insert(\"comparator_enable\".to_string(), \"true\".to_string());\n\n        // act\n        let result = AsymmetricIntegratorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_AsymmetricIntegratorParams_from_hashmap_neg3() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"up\".to_string(), \"1.0\".to_string());\n        params.insert(\"down\".to_string(), \"not_float\".to_string());\n        params.insert(\"up_down_type\".to_string(), \"Rate\".to_string());\n        params.insert(\"comparator_enable\".to_string(), \"true\".to_string());\n\n        // act\n        let result = AsymmetricIntegratorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_AsymmetricIntegratorParams_from_hashmap_neg4() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"up\".to_string(), \"1.0\".to_string());\n        params.insert(\"down\".to_string(), \"2.0\".to_string());\n        params.insert(\"up_down_type\".to_string(), \"Rate\".to_string());\n        params.insert(\"comparator_enable\".to_string(), \"not_bool\".to_string());\n\n        // act\n        let result = AsymmetricIntegratorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_ComparatorParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"threshold\".to_string(), \"1.0\".to_string());\n        params.insert(\"hysteresis_voltage\".to_string(), \"2.0\".to_string());\n\n        // act\n        let result = ComparatorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().threshold, 1.0);\n        assert_eq!(result.as_ref().unwrap().hysteresis_voltage.unwrap(), 2.0);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_ComparatorParams_from_hashmap_withNone() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"threshold\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = ComparatorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().threshold, 1.0);\n        assert_eq!(result.as_ref().unwrap().hysteresis_voltage, None);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_ComparatorParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"threshold\".to_string(), \"not_float\".to_string());\n        params.insert(\"hysteresis_voltage\".to_string(), \"2.0\".to_string());\n\n        // act\n        let result = ComparatorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_ComparatorParams_from_hashmap_neg2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"threshold\".to_string(), \"1.0\".to_string());\n        params.insert(\"hysteresis_voltage\".to_string(), \"not_float\".to_string());\n\n        // act\n        let result = ComparatorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_FilterParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"characteristic_frequency\".to_string(), \"1.0\".to_string());\n        params.insert(\"quality_factor\".to_string(), \"2.0\".to_string());\n        params.insert(\"filter_type\".to_string(), \"lpf1\".to_string());\n\n        // act\n        let result = FilterParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().characteristic_frequency, 1.0);\n        assert_eq!(result.as_ref().unwrap().quality_factor, 2.0);\n        assert!(result.as_ref().unwrap().filter_type == FilterType::lpf1);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_FilterParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"characteristic_frequency\".to_string(), \"not_float\".to_string());\n        params.insert(\"quality_factor\".to_string(), \"2.0\".to_string());\n        params.insert(\"filter_type\".to_string(), \"lpf1\".to_string());\n\n        // act\n        let result = FilterParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_FilterParams_from_hashmap_neg2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"characteristic_frequency\".to_string(), \"1.0\".to_string());\n        params.insert(\"quality_factor\".to_string(), \"not_float\".to_string());\n        params.insert(\"filter_type\".to_string(), \"lpf1\".to_string());\n\n        // act\n        let result = FilterParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_FilterParams_from_hashmap_neg3() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"characteristic_frequency\".to_string(), \"1.0\".to_string());\n        params.insert(\"quality_factor\".to_string(), \"2.0\".to_string());\n        params.insert(\"filter_type\".to_string(), \"invalid_enum\".to_string());\n\n        // act\n        let result = FilterParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_FilterbankParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"band_frequencies\".to_string(), \"[1,2,3]\".to_string());\n        params.insert(\"quality_factor\".to_string(), \"[1.0,2.0,3.0]\".to_string());\n        params.insert(\"attack_rates\".to_string(), \"[1.0,2.0,3.0]\".to_string());\n        params.insert(\"decay_rates\".to_string(), \"[1.0,2.0,3.0]\".to_string());\n\n        // act\n        let result = FilterbankParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().band_frequencies, vec![1, 2, 3]);\n        assert_eq!(result.as_ref().unwrap().quality_factor, vec![1.0, 2.0, 3.0]);\n        assert_eq!(result.as_ref().unwrap().attack_rates, vec![1.0, 2.0, 3.0]);\n        assert_eq!(result.as_ref().unwrap().decay_rates, vec![1.0, 2.0, 3.0]);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_GainOpampParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"gain_mode\".to_string(), \"Noninverting1x\".to_string());\n        params.insert(\"feedback_cap_count\".to_string(), \"2.0\".to_string());\n\n        // act\n        let result = GainOpampParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert!(result.as_ref().unwrap().gain_mode == GainOpampMode::Noninverting1x);\n        assert_eq!(result.as_ref().unwrap().feedback_cap_count, 2.0);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_GainOpampParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"gain_mode\".to_string(), \"Noninverting200x\".to_string());\n        params.insert(\"feedback_cap_count\".to_string(), \"2.0\".to_string());\n\n        // act\n        let result = GainOpampParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_GainOpampParams_from_hashmap_neg2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"gain_mode\".to_string(), \"Noninverting200x\".to_string());\n        params.insert(\"feedback_cap_count\".to_string(), \"not_float\".to_string());\n\n        // act\n        let result = GainOpampParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_GainOpampParams_from_hashmap2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"gain_mode\".to_string(), \"Inverting20x\".to_string());\n        params.insert(\"feedback_cap_count\".to_string(), \"2.0\".to_string());\n\n        // act\n        let result = GainOpampParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert!(result.as_ref().unwrap().gain_mode == GainOpampMode::Inverting20x);\n        assert_eq!(result.as_ref().unwrap().feedback_cap_count, 2.0);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_LookupTableParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"expression\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = LookupTableParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().expression, \"1.0\".to_string());\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_MultiplierParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"slope\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = MultiplierParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().slope, 1.0);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_MultiplierParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"slope\".to_string(), \"not_float\".to_string());\n\n        // act\n        let result = MultiplierParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_NeuralNetParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"weights\".to_string(), \"[1.0,2.0]\".to_string());\n        params.insert(\"biases\".to_string(), \"[1.0,2.0]\".to_string());\n        params.insert(\n            \"activation_function\".to_string(),\n            \"[Tanh,Sigmoid]\".to_string(),\n        );\n        params.insert(\"activation_scale\".to_string(), \"1.0\".to_string());\n        params.insert(\"input_compress_scale\".to_string(), \"1.0\".to_string());\n        params.insert(\"input_compression_type\".to_string(), \"Tanh\".to_string());\n\n        // act\n        let result = NeuralNetParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().weights, vec![1.0, 2.0]);\n        assert_eq!(result.as_ref().unwrap().biases, vec![1.0, 2.0]);\n        assert_eq!(\n            result.as_ref().unwrap().activation_function,\n            vec![ActivationFunction::Tanh, ActivationFunction::Sigmoid]\n        );\n        assert_eq!(result.as_ref().unwrap().activation_scale, Some(1.0));\n        assert_eq!(result.as_ref().unwrap().input_compress_scale, Some(1.0));\n        assert_eq!(\n            result.as_ref().unwrap().input_compression_type,\n            Some(ActivationFunction::Tanh)\n        );\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_NeuralNetParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"weights\".to_string(), \"[1.0,2.0]\".to_string());\n        params.insert(\"biases\".to_string(), \"[1.0,2.0]\".to_string());\n        params.insert(\n            \"activation_function\".to_string(),\n            \"[Tanh,Sigmoid]\".to_string(),\n        );\n        params.insert(\"activation_scale\".to_string(), \"not_float\".to_string());\n        params.insert(\"input_compress_scale\".to_string(), \"1.0\".to_string());\n        params.insert(\"input_compression_type\".to_string(), \"Tanh\".to_string());\n\n        // act\n        let result = NeuralNetParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_NeuralNetParams_from_hashmap_neg2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"weights\".to_string(), \"[1.0,2.0]\".to_string());\n        params.insert(\"biases\".to_string(), \"[1.0,2.0]\".to_string());\n        params.insert(\n            \"activation_function\".to_string(),\n            \"[Tanh,Sigmoid]\".to_string(),\n        );\n        params.insert(\"activation_scale\".to_string(), \"1.0\".to_string());\n        params.insert(\"input_compress_scale\".to_string(), \"not_float\".to_string());\n        params.insert(\"input_compression_type\".to_string(), \"Tanh\".to_string());\n\n        // act\n        let result = NeuralNetParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_NeuralNetParams_from_hashmap_neg3() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"weights\".to_string(), \"[1.0,2.0]\".to_string());\n        params.insert(\"biases\".to_string(), \"[1.0,2.0]\".to_string());\n        params.insert(\n            \"activation_function\".to_string(),\n            \"[Tanh,Sigmoid]\".to_string(),\n        );\n        params.insert(\"activation_scale\".to_string(), \"1.0\".to_string());\n        params.insert(\"input_compress_scale\".to_string(), \"2.0\".to_string());\n        params.insert(\"input_compression_type\".to_string(), \"invalid_enum\".to_string());\n\n        // act\n        let result = NeuralNetParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PeakDetectorParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"atk\".to_string(), \"1.0\".to_string());\n        params.insert(\"dec\".to_string(), \"2.0\".to_string());\n        params.insert(\"model_version\".to_string(), \"FirstOrder\".to_string());\n        params.insert(\"buff\".to_string(), \"1.0\".to_string());\n        params.insert(\"parasitic_ratio\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = PeakDetectorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().atk, 1.0);\n        assert_eq!(result.as_ref().unwrap().dec, 2.0);\n        assert!(result.as_ref().unwrap().model_version == ModelVersion::FirstOrder);\n        assert_eq!(result.as_ref().unwrap().buff, Some(1.0));\n        assert_eq!(result.as_ref().unwrap().parasitic_ratio, Some(1.0));\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PeakDetectorParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"atk\".to_string(), \"not_float\".to_string());\n        params.insert(\"dec\".to_string(), \"2.0\".to_string());\n        params.insert(\"model_version\".to_string(), \"FirstOrder\".to_string());\n        params.insert(\"buff\".to_string(), \"1.0\".to_string());\n        params.insert(\"parasitic_ratio\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = PeakDetectorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PeakDetectorParams_from_hashmap_neg2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"atk\".to_string(), \"1.0\".to_string());\n        params.insert(\"dec\".to_string(), \"not_float\".to_string());\n        params.insert(\"model_version\".to_string(), \"FirstOrder\".to_string());\n        params.insert(\"buff\".to_string(), \"1.0\".to_string());\n        params.insert(\"parasitic_ratio\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = PeakDetectorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PeakDetectorParams_from_hashmap_neg3() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"atk\".to_string(), \"1.0\".to_string());\n        params.insert(\"dec\".to_string(), \"2.0\".to_string());\n        params.insert(\"model_version\".to_string(), \"invalid_enum\".to_string());\n        params.insert(\"buff\".to_string(), \"1.0\".to_string());\n        params.insert(\"parasitic_ratio\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = PeakDetectorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PeakDetectorParams_from_hashmap_neg4() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"atk\".to_string(), \"1.0\".to_string());\n        params.insert(\"dec\".to_string(), \"2.0\".to_string());\n        params.insert(\"model_version\".to_string(), \"FirstOrder\".to_string());\n        params.insert(\"buff\".to_string(), \"not_float\".to_string());\n        params.insert(\"parasitic_ratio\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = PeakDetectorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PeakDetectorParams_from_hashmap_neg5() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"atk\".to_string(), \"1.0\".to_string());\n        params.insert(\"dec\".to_string(), \"2.0\".to_string());\n        params.insert(\"model_version\".to_string(), \"FirstOrder\".to_string());\n        params.insert(\"buff\".to_string(), \"1.0\".to_string());\n        params.insert(\"parasitic_ratio\".to_string(), \"not_float\".to_string());\n\n        // act\n        let result = PeakDetectorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PGAParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"Av1\".to_string(), \"1.0\".to_string());\n        params.insert(\"Av2\".to_string(), \"2.0\".to_string());\n        params.insert(\"den\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = PGAParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().Av1, 1.0);\n        assert_eq!(result.as_ref().unwrap().Av2, 2.0);\n        assert_eq!(result.as_ref().unwrap().den, Some(1.0));\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PGAParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"Av1\".to_string(), \"not float\".to_string());\n        params.insert(\"Av2\".to_string(), \"2.0\".to_string());\n        params.insert(\"den\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = PGAParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PGAParams_from_hashmap_neg2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"Av1\".to_string(), \"1.0\".to_string());\n        params.insert(\"Av2\".to_string(), \"not float\".to_string());\n        params.insert(\"den\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = PGAParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PGAParams_from_hashmap_neg3() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"Av1\".to_string(), \"1.0\".to_string());\n        params.insert(\"Av2\".to_string(), \"2.0\".to_string());\n        params.insert(\"den\".to_string(), \"not float\".to_string());\n\n        // act\n        let result = PGAParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_SynthesizedFilterParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\n            \"coefficients\".to_string(),\n            \"[[1.0,2.0],[3.0,4.0]]\".to_string(),\n        );\n\n        // act\n        let result = SynthesizedFilterParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(\n            result.as_ref().unwrap().coefficients,\n            vec![vec![1.0, 2.0], vec![3.0, 4.0]]\n        );\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_TerminalParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"hardware_pin\".to_string(), \"1.0\".to_string());\n        params.insert(\"is_input\".to_string(), \"true\".to_string());\n        params.insert(\"is_output\".to_string(), \"true\".to_string());\n        params.insert(\"is_ac_coupled\".to_string(), \"true\".to_string());\n        params.insert(\"is_extern\".to_string(), \"true\".to_string());\n\n        // act\n        let result = TerminalParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(\n            result.as_ref().unwrap().hardware_pin,\n            Some(\"1.0\".to_string())\n        );\n        assert_eq!(result.as_ref().unwrap().is_input, true);\n        assert_eq!(result.as_ref().unwrap().is_output, true);\n        assert_eq!(result.as_ref().unwrap().is_ac_coupled, Some(true));\n        assert_eq!(result.as_ref().unwrap().is_extern, Some(true));\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_TerminalParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"hardware_pin\".to_string(), \"1.0\".to_string());\n        params.insert(\"is_input\".to_string(), \"not_boolean\".to_string());\n        params.insert(\"is_output\".to_string(), \"true\".to_string());\n        params.insert(\"is_ac_coupled\".to_string(), \"true\".to_string());\n        params.insert(\"is_extern\".to_string(), \"true\".to_string());\n\n        // act\n        let result = TerminalParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_TerminalParams_from_hashmap_neg2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"hardware_pin\".to_string(), \"1.0\".to_string());\n        params.insert(\"is_input\".to_string(), \"true\".to_string());\n        params.insert(\"is_output\".to_string(), \"not_boolean\".to_string());\n        params.insert(\"is_ac_coupled\".to_string(), \"true\".to_string());\n        params.insert(\"is_extern\".to_string(), \"true\".to_string());\n\n        // act\n        let result = TerminalParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_TerminalParams_from_hashmap_neg3() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"hardware_pin\".to_string(), \"1.0\".to_string());\n        params.insert(\"is_input\".to_string(), \"true\".to_string());\n        params.insert(\"is_output\".to_string(), \"true\".to_string());\n        params.insert(\"is_ac_coupled\".to_string(), \"not_boolean\".to_string());\n        params.insert(\"is_extern\".to_string(), \"true\".to_string());\n\n        // act\n        let result = TerminalParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_TerminalParams_from_hashmap_neg4() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"hardware_pin\".to_string(), \"1.0\".to_string());\n        params.insert(\"is_input\".to_string(), \"true\".to_string());\n        params.insert(\"is_output\".to_string(), \"true\".to_string());\n        params.insert(\"is_ac_coupled\".to_string(), \"true\".to_string());\n        params.insert(\"is_extern\".to_string(), \"not_boolean\".to_string());\n\n        // act\n        let result = TerminalParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_to_network_json_file() {\n        // arrange\n        let mut test_resources_dir = env::current_dir().unwrap().parent().unwrap().to_path_buf();\n        test_resources_dir.push(\"test_resources\");\n        let file_path = test_resources_dir.join(\"sample_request.json\");\n        let req: SimulateNetworkRequest =\n            serde_json::from_str(\u0026std::fs::read_to_string(file_path).unwrap()).unwrap();\n        let nvo: NetworkVO = req.network;\n\n        // act\n        let result = nvo.to_network();\n\n        // assert\n        assert_eq!(result.is_ok(), true);\n    }\n\n    #[test]\n    fn test_save_network_to_dir() {\n        // arrange\n        let mut test_resources_dir = env::current_dir().unwrap().parent().unwrap().to_path_buf();\n        test_resources_dir.push(\"test_resources\");\n        let file_path = test_resources_dir.join(\"sample_request.json\");\n        let req: SimulateNetworkRequest =\n            serde_json::from_str(\u0026std::fs::read_to_string(file_path.clone()).unwrap()).unwrap();\n        let nvo: NetworkVO = req.network;\n        let tmp_dir = std::env::temp_dir().join(\"aml_simulator_test\");\n\n        // act\n        let result = save_network_to_dir(\u0026nvo.to_network().unwrap(), \u0026tmp_dir);\n\n        // assert\n        assert_eq!(result.is_ok(), true);\n        assert!(tmp_dir.join(\"network.json\").exists());\n    }\n}\n","traces":[{"line":95,"address":[5673152,5673890],"length":1,"stats":{"Line":1},"fn_name":null},{"line":96,"address":[5673174],"length":1,"stats":{"Line":1},"fn_name":null},{"line":97,"address":[5673372,5673772,5673276],"length":1,"stats":{"Line":2},"fn_name":null},{"line":98,"address":[5673929,5673590],"length":1,"stats":{"Line":2},"fn_name":null},{"line":101,"address":[5674102],"length":1,"stats":{"Line":1},"fn_name":null},{"line":102,"address":[5673939],"length":1,"stats":{"Line":1},"fn_name":null},{"line":103,"address":[5673953],"length":1,"stats":{"Line":1},"fn_name":null},{"line":104,"address":[5673984],"length":1,"stats":{"Line":1},"fn_name":null},{"line":105,"address":[5674018],"length":1,"stats":{"Line":1},"fn_name":null},{"line":106,"address":[5674099],"length":1,"stats":{"Line":1},"fn_name":null},{"line":143,"address":[5674432,5682826],"length":1,"stats":{"Line":1},"fn_name":null},{"line":144,"address":[5674489,5674576],"length":1,"stats":{"Line":2},"fn_name":null},{"line":145,"address":[5674989,5674598,5674895,5675177],"length":1,"stats":{"Line":3},"fn_name":null},{"line":146,"address":[5674788,5674690,5674942],"length":1,"stats":{"Line":2},"fn_name":null},{"line":147,"address":[5674721],"length":1,"stats":{"Line":1},"fn_name":null},{"line":150,"address":[5674653,5675791],"length":1,"stats":{"Line":2},"fn_name":null},{"line":151,"address":[5676133,5676055,5676299],"length":1,"stats":{"Line":2},"fn_name":null},{"line":152,"address":[5675850,5675948,5676102],"length":1,"stats":{"Line":2},"fn_name":null},{"line":153,"address":[5675916],"length":1,"stats":{"Line":1},"fn_name":null},{"line":154,"address":[5675881],"length":1,"stats":{"Line":1},"fn_name":null},{"line":159,"address":[5676679,5676601,5675813,5676337,5676870],"length":1,"stats":{"Line":4},"fn_name":null},{"line":160,"address":[5676494,5676396,5676648],"length":1,"stats":{"Line":2},"fn_name":null},{"line":161,"address":[5676427],"length":1,"stats":{"Line":1},"fn_name":null},{"line":164,"address":[5677250,5676359,5677172,5676908,5677441],"length":1,"stats":{"Line":4},"fn_name":null},{"line":165,"address":[5677219,5676967,5677065],"length":1,"stats":{"Line":2},"fn_name":null},{"line":166,"address":[5676998],"length":1,"stats":{"Line":1},"fn_name":null},{"line":169,"address":[5677990,5677821,5677479,5676930,5677743],"length":1,"stats":{"Line":4},"fn_name":null},{"line":170,"address":[5677538,5677636,5677790],"length":1,"stats":{"Line":2},"fn_name":null},{"line":171,"address":[5677569],"length":1,"stats":{"Line":1},"fn_name":null},{"line":174,"address":[5678370,5678513,5678292,5678028,5677501],"length":1,"stats":{"Line":4},"fn_name":null},{"line":175,"address":[5678087,5678339,5678185],"length":1,"stats":{"Line":2},"fn_name":null},{"line":176,"address":[5678118],"length":1,"stats":{"Line":1},"fn_name":null},{"line":179,"address":[5679075,5678050,5678551,5678884,5678806],"length":1,"stats":{"Line":4},"fn_name":null},{"line":180,"address":[5678699,5678607,5678853],"length":1,"stats":{"Line":2},"fn_name":null},{"line":181,"address":[5678635],"length":1,"stats":{"Line":1},"fn_name":null},{"line":184,"address":[5678573,5679110,5679155],"length":1,"stats":{"Line":3},"fn_name":null},{"line":185,"address":[5679431,5679509,5679649,5679132,5679176],"length":1,"stats":{"Line":4},"fn_name":null},{"line":186,"address":[5679324,5679478,5679232],"length":1,"stats":{"Line":2},"fn_name":null},{"line":187,"address":[5679260],"length":1,"stats":{"Line":1},"fn_name":null},{"line":190,"address":[5679684,5679729,5679198],"length":1,"stats":{"Line":3},"fn_name":null},{"line":191,"address":[5680083,5680233,5680005,5679706,5679750],"length":1,"stats":{"Line":4},"fn_name":null},{"line":192,"address":[5679898,5679806,5680052],"length":1,"stats":{"Line":2},"fn_name":null},{"line":193,"address":[5679834],"length":1,"stats":{"Line":1},"fn_name":null},{"line":196,"address":[5680523,5680767,5680601,5679772,5680268],"length":1,"stats":{"Line":4},"fn_name":null},{"line":197,"address":[5680416,5680570,5680324],"length":1,"stats":{"Line":2},"fn_name":null},{"line":198,"address":[5680352],"length":1,"stats":{"Line":1},"fn_name":null},{"line":201,"address":[5680290,5680802],"length":1,"stats":{"Line":2},"fn_name":null},{"line":202,"address":[5681135,5681377,5681057],"length":1,"stats":{"Line":2},"fn_name":null},{"line":203,"address":[5680950,5680858,5681104],"length":1,"stats":{"Line":2},"fn_name":null},{"line":204,"address":[5680886],"length":1,"stats":{"Line":1},"fn_name":null},{"line":208,"address":[5680824,5681412],"length":1,"stats":{"Line":2},"fn_name":null},{"line":209,"address":[5681667,5681936,5681745],"length":1,"stats":{"Line":2},"fn_name":null},{"line":210,"address":[5681714,5681468,5681560],"length":1,"stats":{"Line":2},"fn_name":null},{"line":211,"address":[5681528],"length":1,"stats":{"Line":1},"fn_name":null},{"line":212,"address":[5681496],"length":1,"stats":{"Line":1},"fn_name":null},{"line":217,"address":[5682539,5682298,5682220,5681971,5681434],"length":1,"stats":{"Line":4},"fn_name":null},{"line":218,"address":[5682267,5682113,5682021],"length":1,"stats":{"Line":2},"fn_name":null},{"line":219,"address":[5682049],"length":1,"stats":{"Line":1},"fn_name":null},{"line":223,"address":[5681985,5682596],"length":1,"stats":{"Line":0},"fn_name":null},{"line":230,"address":[5675471],"length":1,"stats":{"Line":1},"fn_name":null},{"line":231,"address":[5675216],"length":1,"stats":{"Line":1},"fn_name":null},{"line":232,"address":[5675252],"length":1,"stats":{"Line":1},"fn_name":null},{"line":233,"address":[5675278],"length":1,"stats":{"Line":1},"fn_name":null},{"line":234,"address":[5675314],"length":1,"stats":{"Line":1},"fn_name":null},{"line":235,"address":[5675350],"length":1,"stats":{"Line":1},"fn_name":null},{"line":236,"address":[5675398],"length":1,"stats":{"Line":1},"fn_name":null},{"line":237,"address":[5675443],"length":1,"stats":{"Line":1},"fn_name":null},{"line":308,"address":[5682864],"length":1,"stats":{"Line":1},"fn_name":null},{"line":309,"address":[5682902,5683209,5683248,5683369,5683003],"length":1,"stats":{"Line":4},"fn_name":null},{"line":311,"address":[5682955],"length":1,"stats":{"Line":1},"fn_name":null},{"line":312,"address":[5682925],"length":1,"stats":{"Line":1},"fn_name":null},{"line":315,"address":[6699872],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":316,"address":[6699927],"length":1,"stats":{"Line":1},"fn_name":null},{"line":317,"address":[6699895],"length":1,"stats":{"Line":1},"fn_name":null},{"line":320,"address":[5683268],"length":1,"stats":{"Line":1},"fn_name":null},{"line":321,"address":[5683412,5683617],"length":1,"stats":{"Line":3},"fn_name":null},{"line":322,"address":[6700023],"length":1,"stats":{"Line":1},"fn_name":null},{"line":323,"address":[6699991],"length":1,"stats":{"Line":1},"fn_name":null},{"line":326,"address":[5683395],"length":1,"stats":{"Line":1},"fn_name":null},{"line":329,"address":[5683670],"length":1,"stats":{"Line":1},"fn_name":null},{"line":331,"address":[5683653],"length":1,"stats":{"Line":1},"fn_name":null},{"line":352,"address":[5683744],"length":1,"stats":{"Line":1},"fn_name":null},{"line":353,"address":[5684113,5684396,5683883,5683782,5684152],"length":1,"stats":{"Line":4},"fn_name":null},{"line":355,"address":[5683835],"length":1,"stats":{"Line":1},"fn_name":null},{"line":356,"address":[5683805],"length":1,"stats":{"Line":1},"fn_name":null},{"line":359,"address":[6700064],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":360,"address":[6700119],"length":1,"stats":{"Line":1},"fn_name":null},{"line":361,"address":[6700087],"length":1,"stats":{"Line":1},"fn_name":null},{"line":364,"address":[5684173,5684422,5684274,5684591,5684878],"length":1,"stats":{"Line":4},"fn_name":null},{"line":366,"address":[5684226],"length":1,"stats":{"Line":1},"fn_name":null},{"line":367,"address":[5684196],"length":1,"stats":{"Line":1},"fn_name":null},{"line":370,"address":[6700160],"length":1,"stats":{"Line":1},"fn_name":"{closure#1}"},{"line":371,"address":[6700215],"length":1,"stats":{"Line":1},"fn_name":null},{"line":372,"address":[6700183],"length":1,"stats":{"Line":1},"fn_name":null},{"line":375,"address":[5684747,5685017,5684646,5684904],"length":1,"stats":{"Line":3},"fn_name":null},{"line":377,"address":[5684699],"length":1,"stats":{"Line":1},"fn_name":null},{"line":378,"address":[5684669],"length":1,"stats":{"Line":1},"fn_name":null},{"line":382,"address":[5684941,5685083],"length":1,"stats":{"Line":2},"fn_name":null},{"line":383,"address":[5685053,5685403],"length":1,"stats":{"Line":2},"fn_name":null},{"line":385,"address":[5685307],"length":1,"stats":{"Line":1},"fn_name":null},{"line":386,"address":[5685277],"length":1,"stats":{"Line":1},"fn_name":null},{"line":391,"address":[5685096,5685195,5685575,5685917,5685416],"length":1,"stats":{"Line":4},"fn_name":null},{"line":393,"address":[5685147],"length":1,"stats":{"Line":1},"fn_name":null},{"line":394,"address":[5685118],"length":1,"stats":{"Line":1},"fn_name":null},{"line":397,"address":[6700256],"length":1,"stats":{"Line":1},"fn_name":"{closure#2}"},{"line":398,"address":[6700300],"length":1,"stats":{"Line":1},"fn_name":null},{"line":399,"address":[6700269],"length":1,"stats":{"Line":1},"fn_name":null},{"line":403,"address":[5685688],"length":1,"stats":{"Line":1},"fn_name":null},{"line":406,"address":[5685637],"length":1,"stats":{"Line":1},"fn_name":null},{"line":408,"address":[5685644],"length":1,"stats":{"Line":1},"fn_name":null},{"line":409,"address":[5685656],"length":1,"stats":{"Line":1},"fn_name":null},{"line":410,"address":[5685664],"length":1,"stats":{"Line":1},"fn_name":null},{"line":411,"address":[5685676],"length":1,"stats":{"Line":1},"fn_name":null},{"line":426,"address":[5685952],"length":1,"stats":{"Line":1},"fn_name":null},{"line":427,"address":[5686091,5686297,5685990,5686336,5686457],"length":1,"stats":{"Line":4},"fn_name":null},{"line":429,"address":[5686043],"length":1,"stats":{"Line":1},"fn_name":null},{"line":430,"address":[5686013],"length":1,"stats":{"Line":1},"fn_name":null},{"line":433,"address":[6700336],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":434,"address":[6700391],"length":1,"stats":{"Line":1},"fn_name":null},{"line":435,"address":[6700359],"length":1,"stats":{"Line":1},"fn_name":null},{"line":438,"address":[5686356],"length":1,"stats":{"Line":1},"fn_name":null},{"line":439,"address":[5686705,5686500],"length":1,"stats":{"Line":3},"fn_name":null},{"line":440,"address":[6700487],"length":1,"stats":{"Line":1},"fn_name":null},{"line":441,"address":[6700455],"length":1,"stats":{"Line":1},"fn_name":null},{"line":444,"address":[5686483],"length":1,"stats":{"Line":1},"fn_name":null},{"line":447,"address":[5686758],"length":1,"stats":{"Line":1},"fn_name":null},{"line":449,"address":[5686741],"length":1,"stats":{"Line":1},"fn_name":null},{"line":465,"address":[5686832],"length":1,"stats":{"Line":1},"fn_name":null},{"line":466,"address":[5687484,5686971,5687201,5687240,5686870],"length":1,"stats":{"Line":4},"fn_name":null},{"line":468,"address":[5686923],"length":1,"stats":{"Line":1},"fn_name":null},{"line":469,"address":[5686893],"length":1,"stats":{"Line":1},"fn_name":null},{"line":472,"address":[6700528],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":473,"address":[6700583],"length":1,"stats":{"Line":1},"fn_name":null},{"line":474,"address":[6700551],"length":1,"stats":{"Line":1},"fn_name":null},{"line":478,"address":[5687966,5687510,5687261,5687362,5687679],"length":1,"stats":{"Line":4},"fn_name":null},{"line":480,"address":[5687314],"length":1,"stats":{"Line":1},"fn_name":null},{"line":481,"address":[5687284],"length":1,"stats":{"Line":1},"fn_name":null},{"line":484,"address":[6700624],"length":1,"stats":{"Line":1},"fn_name":"{closure#1}"},{"line":485,"address":[6700679],"length":1,"stats":{"Line":1},"fn_name":null},{"line":486,"address":[6700647],"length":1,"stats":{"Line":1},"fn_name":null},{"line":489,"address":[5687734,5687992,5687835,5688104],"length":1,"stats":{"Line":3},"fn_name":null},{"line":492,"address":[5687787],"length":1,"stats":{"Line":1},"fn_name":null},{"line":493,"address":[5687757],"length":1,"stats":{"Line":1},"fn_name":null},{"line":497,"address":[5688166,5688028],"length":1,"stats":{"Line":2},"fn_name":null},{"line":498,"address":[5688139,5688303],"length":1,"stats":{"Line":2},"fn_name":null},{"line":499,"address":[5688280,5688348],"length":1,"stats":{"Line":1},"fn_name":null},{"line":500,"address":[5688397,5688325],"length":1,"stats":{"Line":1},"fn_name":null},{"line":501,"address":[5688370,5688536],"length":1,"stats":{"Line":2},"fn_name":null},{"line":502,"address":[5688440],"length":1,"stats":{"Line":1},"fn_name":null},{"line":503,"address":[5688410],"length":1,"stats":{"Line":1},"fn_name":null},{"line":508,"address":[5688198],"length":1,"stats":{"Line":1},"fn_name":null},{"line":511,"address":[5688191],"length":1,"stats":{"Line":1},"fn_name":null},{"line":527,"address":[5688560],"length":1,"stats":{"Line":1},"fn_name":"parse_float_vector"},{"line":529,"address":[5688617],"length":1,"stats":{"Line":1},"fn_name":null},{"line":531,"address":[5688677],"length":1,"stats":{"Line":1},"fn_name":null},{"line":532,"address":[5688688],"length":1,"stats":{"Line":1},"fn_name":null},{"line":536,"address":[5688745],"length":1,"stats":{"Line":1},"fn_name":null},{"line":539,"address":[5688777],"length":1,"stats":{"Line":1},"fn_name":null},{"line":541,"address":[6700765,6700720],"length":1,"stats":{"Line":2},"fn_name":"{closure#0}"},{"line":544,"address":[5688887],"length":1,"stats":{"Line":1},"fn_name":null},{"line":547,"address":[5688944],"length":1,"stats":{"Line":1},"fn_name":"parse_int_vector"},{"line":549,"address":[5689001],"length":1,"stats":{"Line":1},"fn_name":null},{"line":551,"address":[5689061],"length":1,"stats":{"Line":1},"fn_name":null},{"line":552,"address":[5689072],"length":1,"stats":{"Line":0},"fn_name":null},{"line":556,"address":[5689129],"length":1,"stats":{"Line":1},"fn_name":null},{"line":559,"address":[5689161],"length":1,"stats":{"Line":1},"fn_name":null},{"line":561,"address":[6700816,6700861],"length":1,"stats":{"Line":2},"fn_name":"{closure#0}"},{"line":564,"address":[5689271],"length":1,"stats":{"Line":1},"fn_name":null},{"line":568,"address":[5689328,5689904,5689938],"length":1,"stats":{"Line":1},"fn_name":null},{"line":569,"address":[5689366,5689866,5689700,5689499,5689954,5690096,5689815],"length":1,"stats":{"Line":5},"fn_name":null},{"line":570,"address":[5689421],"length":1,"stats":{"Line":1},"fn_name":null},{"line":572,"address":[5689783],"length":1,"stats":{"Line":1},"fn_name":null},{"line":573,"address":[5689617],"length":1,"stats":{"Line":1},"fn_name":null},{"line":576,"address":[5690808,5690227,5690614,5690448,5690563,5690015,5690663,5690380],"length":1,"stats":{"Line":6},"fn_name":null},{"line":577,"address":[5690163],"length":1,"stats":{"Line":1},"fn_name":null},{"line":579,"address":[5690531],"length":1,"stats":{"Line":1},"fn_name":null},{"line":580,"address":[5690463],"length":1,"stats":{"Line":1},"fn_name":null},{"line":583,"address":[5690947,5690743,5691100,5691389,5691289,5691340,5691174,5691534],"length":1,"stats":{"Line":6},"fn_name":null},{"line":584,"address":[5690883],"length":1,"stats":{"Line":1},"fn_name":null},{"line":586,"address":[5691257],"length":1,"stats":{"Line":1},"fn_name":null},{"line":587,"address":[5691189],"length":1,"stats":{"Line":1},"fn_name":null},{"line":590,"address":[5692015,5691826,5691900,5692573,5692066,5691673,5691469,5692115],"length":1,"stats":{"Line":6},"fn_name":null},{"line":591,"address":[5691609],"length":1,"stats":{"Line":1},"fn_name":null},{"line":593,"address":[5691983],"length":1,"stats":{"Line":1},"fn_name":null},{"line":594,"address":[5691915],"length":1,"stats":{"Line":1},"fn_name":null},{"line":597,"address":[5692321],"length":1,"stats":{"Line":1},"fn_name":null},{"line":598,"address":[5692183],"length":1,"stats":{"Line":1},"fn_name":null},{"line":599,"address":[5692225],"length":1,"stats":{"Line":1},"fn_name":null},{"line":600,"address":[5692273],"length":1,"stats":{"Line":1},"fn_name":null},{"line":617,"address":[5692608],"length":1,"stats":{"Line":1},"fn_name":null},{"line":618,"address":[5692646,5692741,5692900],"length":1,"stats":{"Line":2},"fn_name":null},{"line":619,"address":[5692861,5692669],"length":1,"stats":{"Line":1},"fn_name":null},{"line":621,"address":[5692833,5692974],"length":1,"stats":{"Line":2},"fn_name":null},{"line":622,"address":[5693198,5692944],"length":1,"stats":{"Line":1},"fn_name":null},{"line":623,"address":[5693175,5693241],"length":1,"stats":{"Line":1},"fn_name":null},{"line":624,"address":[5693218,5693284],"length":1,"stats":{"Line":1},"fn_name":null},{"line":625,"address":[5693331,5693261],"length":1,"stats":{"Line":2},"fn_name":null},{"line":626,"address":[5693304,5693467],"length":1,"stats":{"Line":2},"fn_name":null},{"line":627,"address":[5693341],"length":1,"stats":{"Line":1},"fn_name":null},{"line":629,"address":[5693804,5693477,5692984,5693646,5693083],"length":1,"stats":{"Line":3},"fn_name":null},{"line":631,"address":[5693035],"length":1,"stats":{"Line":1},"fn_name":null},{"line":632,"address":[5693006],"length":1,"stats":{"Line":1},"fn_name":null},{"line":635,"address":[6700912],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"},{"line":636,"address":[6700967],"length":1,"stats":{"Line":0},"fn_name":null},{"line":637,"address":[6700935],"length":1,"stats":{"Line":0},"fn_name":null},{"line":641,"address":[5693699],"length":1,"stats":{"Line":1},"fn_name":null},{"line":642,"address":[5693695],"length":1,"stats":{"Line":1},"fn_name":null},{"line":657,"address":[5693840],"length":1,"stats":{"Line":1},"fn_name":null},{"line":659,"address":[5693973,5693878,5694239],"length":1,"stats":{"Line":2},"fn_name":null},{"line":661,"address":[5693931],"length":1,"stats":{"Line":1},"fn_name":null},{"line":662,"address":[5693901],"length":1,"stats":{"Line":1},"fn_name":null},{"line":666,"address":[5694102],"length":1,"stats":{"Line":1},"fn_name":null},{"line":667,"address":[5694063],"length":1,"stats":{"Line":1},"fn_name":null},{"line":681,"address":[5694288],"length":1,"stats":{"Line":1},"fn_name":null},{"line":682,"address":[5694326,5694427,5694763,5694672,5694633],"length":1,"stats":{"Line":4},"fn_name":null},{"line":684,"address":[5694379],"length":1,"stats":{"Line":1},"fn_name":null},{"line":685,"address":[5694349],"length":1,"stats":{"Line":1},"fn_name":null},{"line":688,"address":[6701008],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":689,"address":[6701063],"length":1,"stats":{"Line":1},"fn_name":null},{"line":690,"address":[6701031],"length":1,"stats":{"Line":1},"fn_name":null},{"line":694,"address":[5694687],"length":1,"stats":{"Line":1},"fn_name":null},{"line":698,"address":[5694800],"length":1,"stats":{"Line":1},"fn_name":"parse_activation_function_vector"},{"line":700,"address":[5694857],"length":1,"stats":{"Line":1},"fn_name":null},{"line":702,"address":[5694917],"length":1,"stats":{"Line":1},"fn_name":null},{"line":703,"address":[5694928],"length":1,"stats":{"Line":0},"fn_name":null},{"line":707,"address":[5694985],"length":1,"stats":{"Line":1},"fn_name":null},{"line":710,"address":[5695017],"length":1,"stats":{"Line":1},"fn_name":null},{"line":712,"address":[6701104,6701149],"length":1,"stats":{"Line":2},"fn_name":"{closure#0}"},{"line":713,"address":[6701224,6701170],"length":1,"stats":{"Line":2},"fn_name":null},{"line":714,"address":[6701279,6701201],"length":1,"stats":{"Line":2},"fn_name":null},{"line":715,"address":[6701256,6701327],"length":1,"stats":{"Line":2},"fn_name":null},{"line":716,"address":[6701349,6701304],"length":1,"stats":{"Line":2},"fn_name":null},{"line":717,"address":[6701342],"length":1,"stats":{"Line":0},"fn_name":null},{"line":721,"address":[5695127],"length":1,"stats":{"Line":1},"fn_name":null},{"line":738,"address":[5695184,5695776,5695810],"length":1,"stats":{"Line":1},"fn_name":null},{"line":739,"address":[5695687,5695980,5695365,5695569,5695738,5695829,5695234],"length":1,"stats":{"Line":5},"fn_name":null},{"line":740,"address":[5695284],"length":1,"stats":{"Line":1},"fn_name":null},{"line":742,"address":[5695655],"length":1,"stats":{"Line":1},"fn_name":null},{"line":743,"address":[5695483],"length":1,"stats":{"Line":1},"fn_name":null},{"line":746,"address":[5696279,5696117,5696571,5696356,5696725,5695893,5696471,5696522],"length":1,"stats":{"Line":6},"fn_name":null},{"line":747,"address":[5696050],"length":1,"stats":{"Line":1},"fn_name":null},{"line":749,"address":[5696439],"length":1,"stats":{"Line":1},"fn_name":null},{"line":750,"address":[5696371],"length":1,"stats":{"Line":1},"fn_name":null},{"line":753,"address":[5697463,5697312,5697263,5697097,5697212,5697023,5696867,5696654],"length":1,"stats":{"Line":6},"fn_name":null},{"line":755,"address":[5696800],"length":1,"stats":{"Line":1},"fn_name":null},{"line":757,"address":[5697180],"length":1,"stats":{"Line":1},"fn_name":null},{"line":758,"address":[5697112],"length":1,"stats":{"Line":1},"fn_name":null},{"line":762,"address":[5697543,5697395],"length":1,"stats":{"Line":2},"fn_name":null},{"line":763,"address":[5697823,5697597],"length":1,"stats":{"Line":3},"fn_name":null},{"line":764,"address":[6701431],"length":1,"stats":{"Line":1},"fn_name":null},{"line":765,"address":[6701399],"length":1,"stats":{"Line":1},"fn_name":null},{"line":768,"address":[5697580],"length":1,"stats":{"Line":0},"fn_name":null},{"line":770,"address":[5697881],"length":1,"stats":{"Line":1},"fn_name":null},{"line":771,"address":[5697968],"length":1,"stats":{"Line":1},"fn_name":null},{"line":772,"address":[5698194,5697984],"length":1,"stats":{"Line":3},"fn_name":null},{"line":773,"address":[6701527],"length":1,"stats":{"Line":1},"fn_name":null},{"line":774,"address":[6701495],"length":1,"stats":{"Line":1},"fn_name":null},{"line":779,"address":[5697951],"length":1,"stats":{"Line":0},"fn_name":null},{"line":781,"address":[5698233],"length":1,"stats":{"Line":1},"fn_name":null},{"line":783,"address":[5698332],"length":1,"stats":{"Line":1},"fn_name":null},{"line":784,"address":[5698375,5698441],"length":1,"stats":{"Line":2},"fn_name":null},{"line":785,"address":[5698418,5698511,5698472],"length":1,"stats":{"Line":2},"fn_name":null},{"line":786,"address":[5698525,5698564,5698488],"length":1,"stats":{"Line":2},"fn_name":null},{"line":787,"address":[5698614,5698578,5698541],"length":1,"stats":{"Line":2},"fn_name":null},{"line":788,"address":[5698584,5699036],"length":1,"stats":{"Line":2},"fn_name":null},{"line":791,"address":[5698303],"length":1,"stats":{"Line":0},"fn_name":null},{"line":793,"address":[5698820],"length":1,"stats":{"Line":1},"fn_name":null},{"line":794,"address":[5698635],"length":1,"stats":{"Line":1},"fn_name":null},{"line":795,"address":[5698683],"length":1,"stats":{"Line":1},"fn_name":null},{"line":796,"address":[5698731],"length":1,"stats":{"Line":1},"fn_name":null},{"line":797,"address":[5698779],"length":1,"stats":{"Line":1},"fn_name":null},{"line":798,"address":[5698796],"length":1,"stats":{"Line":1},"fn_name":null},{"line":799,"address":[5698813],"length":1,"stats":{"Line":1},"fn_name":null},{"line":817,"address":[5699136],"length":1,"stats":{"Line":1},"fn_name":null},{"line":818,"address":[5699174,5699544,5699788,5699505,5699275],"length":1,"stats":{"Line":4},"fn_name":null},{"line":820,"address":[5699227],"length":1,"stats":{"Line":1},"fn_name":null},{"line":821,"address":[5699197],"length":1,"stats":{"Line":1},"fn_name":null},{"line":824,"address":[6701568],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":825,"address":[6701623],"length":1,"stats":{"Line":1},"fn_name":null},{"line":826,"address":[6701591],"length":1,"stats":{"Line":1},"fn_name":null},{"line":829,"address":[5699983,5699565,5700270,5699814,5699666],"length":1,"stats":{"Line":4},"fn_name":null},{"line":831,"address":[5699618],"length":1,"stats":{"Line":1},"fn_name":null},{"line":832,"address":[5699588],"length":1,"stats":{"Line":1},"fn_name":null},{"line":835,"address":[6701664],"length":1,"stats":{"Line":1},"fn_name":"{closure#1}"},{"line":836,"address":[6701719],"length":1,"stats":{"Line":1},"fn_name":null},{"line":837,"address":[6701687],"length":1,"stats":{"Line":1},"fn_name":null},{"line":840,"address":[5700408,5700038,5700139,5700296],"length":1,"stats":{"Line":3},"fn_name":null},{"line":842,"address":[5700091],"length":1,"stats":{"Line":1},"fn_name":null},{"line":843,"address":[5700061],"length":1,"stats":{"Line":1},"fn_name":null},{"line":847,"address":[5700332,5700470],"length":1,"stats":{"Line":2},"fn_name":null},{"line":848,"address":[5700443,5700673],"length":1,"stats":{"Line":2},"fn_name":null},{"line":850,"address":[5700577],"length":1,"stats":{"Line":1},"fn_name":null},{"line":851,"address":[5700547],"length":1,"stats":{"Line":1},"fn_name":null},{"line":856,"address":[5700483],"length":1,"stats":{"Line":1},"fn_name":null},{"line":857,"address":[5700703,5700908],"length":1,"stats":{"Line":3},"fn_name":null},{"line":858,"address":[6701815],"length":1,"stats":{"Line":1},"fn_name":null},{"line":859,"address":[6701783],"length":1,"stats":{"Line":1},"fn_name":null},{"line":862,"address":[5700686],"length":1,"stats":{"Line":1},"fn_name":null},{"line":864,"address":[5700939],"length":1,"stats":{"Line":1},"fn_name":null},{"line":865,"address":[5701216,5701011],"length":1,"stats":{"Line":3},"fn_name":null},{"line":866,"address":[6701911],"length":1,"stats":{"Line":1},"fn_name":null},{"line":867,"address":[6701879],"length":1,"stats":{"Line":1},"fn_name":null},{"line":870,"address":[5700994],"length":1,"stats":{"Line":1},"fn_name":null},{"line":872,"address":[5701300],"length":1,"stats":{"Line":1},"fn_name":null},{"line":875,"address":[5701259],"length":1,"stats":{"Line":1},"fn_name":null},{"line":876,"address":[5701266],"length":1,"stats":{"Line":1},"fn_name":null},{"line":877,"address":[5701283],"length":1,"stats":{"Line":1},"fn_name":null},{"line":895,"address":[5701392],"length":1,"stats":{"Line":1},"fn_name":null},{"line":896,"address":[5701794,5701531,5701755,5702038,5701430],"length":1,"stats":{"Line":4},"fn_name":null},{"line":898,"address":[5701483],"length":1,"stats":{"Line":1},"fn_name":null},{"line":899,"address":[5701453],"length":1,"stats":{"Line":1},"fn_name":null},{"line":902,"address":[6701952],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":903,"address":[6702007],"length":1,"stats":{"Line":1},"fn_name":null},{"line":904,"address":[6701975],"length":1,"stats":{"Line":1},"fn_name":null},{"line":907,"address":[5701815,5702064,5701916,5702233,5702398],"length":1,"stats":{"Line":4},"fn_name":null},{"line":909,"address":[5701868],"length":1,"stats":{"Line":1},"fn_name":null},{"line":910,"address":[5701838],"length":1,"stats":{"Line":1},"fn_name":null},{"line":913,"address":[6702048],"length":1,"stats":{"Line":1},"fn_name":"{closure#1}"},{"line":914,"address":[6702103],"length":1,"stats":{"Line":1},"fn_name":null},{"line":915,"address":[6702071],"length":1,"stats":{"Line":1},"fn_name":null},{"line":918,"address":[5702288],"length":1,"stats":{"Line":1},"fn_name":null},{"line":919,"address":[5702441,5702646],"length":1,"stats":{"Line":3},"fn_name":null},{"line":920,"address":[6702199],"length":1,"stats":{"Line":1},"fn_name":null},{"line":921,"address":[6702167],"length":1,"stats":{"Line":1},"fn_name":null},{"line":924,"address":[5702424],"length":1,"stats":{"Line":1},"fn_name":null},{"line":926,"address":[5702706],"length":1,"stats":{"Line":1},"fn_name":null},{"line":929,"address":[5702689],"length":1,"stats":{"Line":1},"fn_name":null},{"line":934,"address":[5702800],"length":1,"stats":{"Line":1},"fn_name":"parse_vector_vector_floats"},{"line":936,"address":[5702859],"length":1,"stats":{"Line":1},"fn_name":null},{"line":938,"address":[5702919],"length":1,"stats":{"Line":1},"fn_name":null},{"line":939,"address":[5702930],"length":1,"stats":{"Line":0},"fn_name":null},{"line":943,"address":[5702987],"length":1,"stats":{"Line":1},"fn_name":null},{"line":946,"address":[5703027],"length":1,"stats":{"Line":3},"fn_name":null},{"line":948,"address":[5703137],"length":1,"stats":{"Line":1},"fn_name":null},{"line":960,"address":[5703200,5703723,5703754],"length":1,"stats":{"Line":1},"fn_name":null},{"line":961,"address":[5703345,5703949,5703534,5703694,5703770,5703236,5703649],"length":1,"stats":{"Line":5},"fn_name":null},{"line":962,"address":[5703267],"length":1,"stats":{"Line":1},"fn_name":null},{"line":964,"address":[5703617],"length":1,"stats":{"Line":1},"fn_name":null},{"line":965,"address":[5703454],"length":1,"stats":{"Line":1},"fn_name":null},{"line":968,"address":[5703809],"length":1,"stats":{"Line":1},"fn_name":null},{"line":987,"address":[5703984,5705882],"length":1,"stats":{"Line":1},"fn_name":null},{"line":988,"address":[5704034],"length":1,"stats":{"Line":1},"fn_name":null},{"line":989,"address":[5704103],"length":1,"stats":{"Line":1},"fn_name":null},{"line":990,"address":[5704089],"length":1,"stats":{"Line":1},"fn_name":null},{"line":992,"address":[5704489,5704188,5704330,5704740,5704549],"length":1,"stats":{"Line":4},"fn_name":null},{"line":994,"address":[5704298],"length":1,"stats":{"Line":1},"fn_name":null},{"line":995,"address":[5704263],"length":1,"stats":{"Line":1},"fn_name":null},{"line":998,"address":[6702320],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":999,"address":[6702364],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1000,"address":[6702333],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1003,"address":[5704672,5704991,5704835,5705223],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1005,"address":[5704803],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1006,"address":[5704771],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1009,"address":[6702400],"length":1,"stats":{"Line":1},"fn_name":"{closure#1}"},{"line":1010,"address":[6702444],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1011,"address":[6702413],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1014,"address":[5705155,5705259],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1015,"address":[5705519,5705309],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1016,"address":[6702524],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1017,"address":[6702493],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1020,"address":[5705296],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1022,"address":[5705558],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1023,"address":[5705641,5705851],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1024,"address":[6702604],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1025,"address":[6702573],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1028,"address":[5705628],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1030,"address":[5706004],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1031,"address":[5705942],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1034,"address":[5705990],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1035,"address":[5705997],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1132,"address":[5706144],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1134,"address":[5706157],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1138,"address":[5706224],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1139,"address":[5706241],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1149,"address":[5706272,5706987],"length":1,"stats":{"Line":2},"fn_name":"get_output"},{"line":1150,"address":[5706358,5706310,5706563,5706607,5706930],"length":1,"stats":{"Line":6},"fn_name":null},{"line":1151,"address":[5706531],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1154,"address":[5706904],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1156,"address":[5706826],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1172,"address":[5708898,5708849,5707024],"length":1,"stats":{"Line":2},"fn_name":"save_network_to_dir"},{"line":1173,"address":[5707285,5707109],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1175,"address":[5707573,5707402,5707180],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1176,"address":[6703207,6703384],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1178,"address":[6703142],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1182,"address":[5707466],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1183,"address":[5707643,5707703,5707991],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1188,"address":[5707959],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1190,"address":[5707931,5708095,5708260],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1191,"address":[6703783,6703960],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1193,"address":[6703718],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1198,"address":[5708196,5708315,5708451],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1199,"address":[5708419],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1200,"address":[5708624,5708387,5708487],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1201,"address":[5708592],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1203,"address":[5708684,5708567],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1209,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":1210,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":1211,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":1214,"address":[6705487,6704432],"length":1,"stats":{"Line":1},"fn_name":"sidecar_simulate_network\u003caml_connect::aml_core::network_manager::AmlSimulatorSidecar\u003e"},{"line":1222,"address":[6704616],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1223,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1224,"address":[6709002,6708891,6709214],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1225,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1226,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1227,"address":[6708983],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1231,"address":[6704767],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1232,"address":[6704983],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1233,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1234,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1238,"address":[6705449,6704896,6705310],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1239,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1241,"address":[6705373,6705513,6705250,6705468],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1243,"address":[6705622],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1244,"address":[6705877],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1245,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1246,"address":[6705734],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1250,"address":[6705696,6706320],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1251,"address":[6706549,6706776],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1253,"address":[6707346,6706942,6707554,6707185,6707005,6707113,6706750,6707415],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1254,"address":[6706907],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1255,"address":[6706978],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1256,"address":[6707046],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1257,"address":[6707086],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1258,"address":[6707239,6707165],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1259,"address":[6707319],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1260,"address":[6707398,6707466],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1263,"address":[6708264,6707921,6708160],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1264,"address":[6707842],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1265,"address":[6709624,6709769,6709376],"length":1,"stats":{"Line":0},"fn_name":"{closure#1}\u003caml_connect::aml_core::network_manager::AmlSimulatorSidecar\u003e"},{"line":1266,"address":[6709635,6709458],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1267,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1268,"address":[6709398],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1273,"address":[6708384],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1275,"address":[6708427,6708719,6709792,6710058],"length":1,"stats":{"Line":1},"fn_name":"{closure#2}\u003caml_connect::aml_core::network_manager::AmlSimulatorSidecar\u003e"},{"line":1276,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1277,"address":[6709819,6709896],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1278,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1279,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1283,"address":[6708625],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":400,"coverable":439},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","project_manager","create_project.rs"],"content":"use std::path::PathBuf;\n\nuse diesel::{ExpressionMethods, QueryDsl, RunQueryDsl};\n\nuse crate::aml_core::{\n    db_adapter::{models::NewProject, models::Project, schema::projects, DbConn},\n    file_data_manager, AppError,\n};\n\nuse super::{\n    get_projects::{project_exists_by_slug, transform_project_for_response},\n    CreateProjectRequest, CreateProjectResponse, CreateProjectResponseResult, ProjectDetails,\n    ProjectManagerError,\n};\n\npub fn create_project(\n    req: \u0026CreateProjectRequest,\n    app_dir: \u0026PathBuf,\n    conn: \u0026mut DbConn\n) -\u003e CreateProjectResponseResult {\n    log::info!(\"create_project request received\");\n\n    let match_count = projects::table\n        .filter(projects::name.eq(req.name.as_str()))\n        .count()\n        .get_result::\u003ci64\u003e(conn);\n\n    match match_count {\n        Ok(count) =\u003e {\n            if count \u003e= 1 {\n                let error_message = format!(\"Project with name '{}' already exists\", req.name);\n                return Err(AppError::ProjectManagerError(\n                    ProjectManagerError::ProjectAlreadyExists(error_message.into()),\n                ));\n            } else {\n                log::info!(\"project doesnt exist, can create\");\n                let new_slug_result = generate_unique_slug(\u0026req.name, app_dir, conn);\n                match new_slug_result {\n                    Ok(new_slug) =\u003e {\n                        let new_project: NewProject = NewProject {\n                            slug: new_slug.to_owned(),\n                            name: req.name.to_owned(),\n                            description: req.description.as_ref().map(|desc| desc.clone()),\n                        };\n\n                        let insertion_result = diesel::insert_into(projects::table)\n                            .values(\u0026new_project)\n                            .returning((\n                                projects::id,\n                                projects::slug,\n                                projects::name,\n                                projects::description,\n                                projects::modified_at,\n                                projects::created_at,\n                            ))\n                            .get_result(conn);\n\n                        let project: Project = match insertion_result {\n                            Ok((id, slug, name, description, modified_at, created_at)) =\u003e Project {\n                                id,\n                                slug,\n                                name,\n                                description,\n                                modified_at,\n                                created_at,\n                            },\n                            Err(error) =\u003e {\n                                return Err(AppError::ProjectManagerError(\n                                    ProjectManagerError::InternalError(error.to_string()),\n                                ));\n                            }\n                        };\n\n                        let project_details: ProjectDetails =\n                            transform_project_for_response(project);\n\n                        let _ = file_data_manager::create_project_dir(\u0026new_slug, app_dir).map_err(\n                            |error| {\n                                AppError::ProjectManagerError(\n                                    ProjectManagerError::ProjectAlreadyExists(error.to_string()),\n                                )\n                            },\n                        );\n\n                        //panic!(\"Could not create project dir :{:?}\", e); //TODO: return error instead of panic\n\n                        log::info!(\"create_project response: {:?}\", project_details);\n\n                        return Ok(CreateProjectResponse {\n                            project: project_details,\n                        });\n                    }\n                    Err(error) =\u003e {\n                        return Err(AppError::ProjectManagerError(error));\n                    }\n                }\n            }\n        }\n        Err(e) =\u003e Err(AppError::InternalError(e.to_string())),\n    }\n}\n\n//slug generation logic\n//trim leading / trailing whitespace, convert to lowercase, and use hyphenate\n//check both database and local file system whether slug exists\n//will add -\u003ccounter\u003e to project_slug until its unique\npub fn generate_unique_slug(\n    project_name: \u0026str,\n    app_dir: \u0026PathBuf,\n    conn: \u0026mut DbConn,\n) -\u003e Result\u003cString, ProjectManagerError\u003e {\n    let base_slug = project_name.trim().to_lowercase().replace(\" \", \"-\");\n    let mut new_slug = base_slug.clone();\n\n    let mut counter = 1;\n    while project_exists_by_slug(\u0026new_slug, conn)? || project_exists_in_fs(app_dir, \u0026new_slug) {\n        new_slug = format!(\"{}-{}\", base_slug, counter);\n        counter += 1;\n    }\n\n    Ok(new_slug)\n}\n\nfn project_exists_in_fs(app_dir: \u0026PathBuf, project_slug: \u0026str) -\u003e bool {\n    let project_dir_path = app_dir.join(project_slug);\n\n    std::fs::metadata(\u0026project_dir_path)\n        .map(|metadata| metadata.is_dir())\n        .unwrap_or(false)\n}\n","traces":[{"line":16,"address":[5937697,5937072],"length":1,"stats":{"Line":1},"fn_name":"create_project"},{"line":21,"address":[5937197,5937128,5937342],"length":1,"stats":{"Line":2},"fn_name":null},{"line":23,"address":[5937275],"length":1,"stats":{"Line":1},"fn_name":null},{"line":24,"address":[5937248],"length":1,"stats":{"Line":1},"fn_name":null},{"line":28,"address":[5937315],"length":1,"stats":{"Line":1},"fn_name":null},{"line":29,"address":[5937431],"length":1,"stats":{"Line":1},"fn_name":null},{"line":30,"address":[5937447],"length":1,"stats":{"Line":1},"fn_name":null},{"line":31,"address":[5937787],"length":1,"stats":{"Line":0},"fn_name":null},{"line":32,"address":[5938008],"length":1,"stats":{"Line":0},"fn_name":null},{"line":33,"address":[5937921],"length":1,"stats":{"Line":0},"fn_name":null},{"line":36,"address":[5938283,5938124,5938162,5937736],"length":1,"stats":{"Line":2},"fn_name":null},{"line":37,"address":[5938216],"length":1,"stats":{"Line":1},"fn_name":null},{"line":38,"address":[5938252],"length":1,"stats":{"Line":1},"fn_name":null},{"line":39,"address":[5938375],"length":1,"stats":{"Line":1},"fn_name":null},{"line":41,"address":[5938407],"length":1,"stats":{"Line":1},"fn_name":null},{"line":42,"address":[5938671],"length":1,"stats":{"Line":1},"fn_name":null},{"line":43,"address":[5938802,5938740],"length":1,"stats":{"Line":4},"fn_name":null},{"line":46,"address":[5938917,5938972],"length":1,"stats":{"Line":2},"fn_name":null},{"line":58,"address":[5939058],"length":1,"stats":{"Line":1},"fn_name":null},{"line":67,"address":[5939454],"length":1,"stats":{"Line":0},"fn_name":null},{"line":68,"address":[5939622],"length":1,"stats":{"Line":0},"fn_name":null},{"line":69,"address":[5939502,5939578],"length":1,"stats":{"Line":0},"fn_name":null},{"line":74,"address":[5939424],"length":1,"stats":{"Line":1},"fn_name":null},{"line":77,"address":[5939759,5939835],"length":1,"stats":{"Line":2},"fn_name":null},{"line":78,"address":[6900741,6900560],"length":1,"stats":{"Line":0},"fn_name":"{closure#1}"},{"line":79,"address":[6900677],"length":1,"stats":{"Line":0},"fn_name":null},{"line":80,"address":[6900578,6900638],"length":1,"stats":{"Line":0},"fn_name":null},{"line":87,"address":[5940140,5939894,5939998],"length":1,"stats":{"Line":2},"fn_name":null},{"line":89,"address":[5940086],"length":1,"stats":{"Line":1},"fn_name":null},{"line":90,"address":[5940060],"length":1,"stats":{"Line":1},"fn_name":null},{"line":93,"address":[5938442],"length":1,"stats":{"Line":0},"fn_name":null},{"line":94,"address":[5938506],"length":1,"stats":{"Line":0},"fn_name":null},{"line":99,"address":[5937462],"length":1,"stats":{"Line":0},"fn_name":null},{"line":107,"address":[5940336,5940622],"length":1,"stats":{"Line":1},"fn_name":"generate_unique_slug"},{"line":112,"address":[5940433],"length":1,"stats":{"Line":1},"fn_name":null},{"line":113,"address":[5940689],"length":1,"stats":{"Line":1},"fn_name":null},{"line":115,"address":[5940716],"length":1,"stats":{"Line":1},"fn_name":null},{"line":116,"address":[5941032,5940735,5940808,5941629],"length":1,"stats":{"Line":3},"fn_name":null},{"line":117,"address":[5941232],"length":1,"stats":{"Line":0},"fn_name":null},{"line":118,"address":[5941634,5941598],"length":1,"stats":{"Line":0},"fn_name":null},{"line":121,"address":[5941122],"length":1,"stats":{"Line":1},"fn_name":null},{"line":124,"address":[5941888,5941680],"length":1,"stats":{"Line":1},"fn_name":"project_exists_in_fs"},{"line":125,"address":[5941721],"length":1,"stats":{"Line":1},"fn_name":null},{"line":127,"address":[5941817,5941763],"length":1,"stats":{"Line":2},"fn_name":null},{"line":128,"address":[6900768,6900769],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"}],"covered":30,"coverable":45},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","project_manager","delete_project.rs"],"content":"use diesel::{QueryDsl, RunQueryDsl};\n\nuse crate::aml_core::{\n    db_adapter::{models::Project, schema::projects, DbConn},\n    file_data_manager,\n    project_manager::{DeleteProjectResponse, ProjectManagerError},\n    AppError,\n};\n\nuse super::{DeleteProjectRequest, DeleteProjectResponseResult};\n\npub fn delete_project(\n    req: \u0026DeleteProjectRequest,\n    app_dir: \u0026std::path::PathBuf,\n    conn: \u0026mut DbConn,\n) -\u003e DeleteProjectResponseResult {\n    log::info!(\"delete_project request received\");\n\n    let get_project_result = projects::table.find(req.id).first::\u003cProject\u003e(conn);\n\n    let project = match get_project_result {\n        Ok(project) =\u003e project,\n        Err(diesel::result::Error::NotFound) =\u003e {\n            log::warn!(\"project not found\");\n            return Err(AppError::ProjectManagerError(\n                ProjectManagerError::ProjectNotFound(\"Project not found\".to_string()),\n            ));\n        }\n        Err(_) =\u003e {\n            return Err(AppError::ProjectManagerError(\n                ProjectManagerError::InternalError(\"Error getting project\".to_string()),\n            ))\n        }\n    };\n\n    match diesel::delete(\u0026project).execute(conn) {\n        Ok(_) =\u003e {\n            log::info!(\"project deleted\");\n            // TODO: delete audio file metadata if needed from DB\n            match file_data_manager::delete_project_dir(\u0026project.slug, app_dir) {\n                Ok(_) =\u003e log::info!(\"project directory deleted for {}\", \u0026project.slug),\n                Err(e) =\u003e {\n                    log::error!(\"error deleting project files - disk might not be in sync with database: {}\", e);\n                    return Err(AppError::ProjectManagerError(\n                        ProjectManagerError::InternalError(e.to_string()),\n                    ));\n                }\n            }\n            Ok(DeleteProjectResponse {})\n        }\n        Err(error) =\u003e {\n            log::error!(\"error deleting project: {}\", error);\n            Err(AppError::ProjectManagerError(\n                ProjectManagerError::InternalError(error.to_string()),\n            ))\n        }\n    }\n}\n","traces":[{"line":12,"address":[6273724,6272208],"length":1,"stats":{"Line":1},"fn_name":"delete_project"},{"line":17,"address":[6272475,6272279,6272354],"length":1,"stats":{"Line":2},"fn_name":null},{"line":19,"address":[6272411],"length":1,"stats":{"Line":1},"fn_name":null},{"line":21,"address":[6272441,6272817],"length":1,"stats":{"Line":1},"fn_name":null},{"line":22,"address":[6272567],"length":1,"stats":{"Line":1},"fn_name":null},{"line":24,"address":[6137909,6138251,6138315,6138410],"length":1,"stats":{"Line":0},"fn_name":null},{"line":25,"address":[6273496],"length":1,"stats":{"Line":0},"fn_name":null},{"line":26,"address":[6138383,6138514],"length":1,"stats":{"Line":0},"fn_name":null},{"line":30,"address":[6138112],"length":1,"stats":{"Line":0},"fn_name":null},{"line":31,"address":[6137957,6138052],"length":1,"stats":{"Line":0},"fn_name":null},{"line":36,"address":[6138765,6137865],"length":1,"stats":{"Line":2},"fn_name":null},{"line":38,"address":[6274560,6273765,6274647,6274502],"length":1,"stats":{"Line":3},"fn_name":null},{"line":40,"address":[6274622,6274761],"length":1,"stats":{"Line":2},"fn_name":null},{"line":41,"address":[6140674,6140732,6139922,6140814],"length":1,"stats":{"Line":3},"fn_name":null},{"line":42,"address":[6139967],"length":1,"stats":{"Line":0},"fn_name":null},{"line":43,"address":[6140223,6139983,6140131,6140073],"length":1,"stats":{"Line":0},"fn_name":null},{"line":44,"address":[6140441],"length":1,"stats":{"Line":0},"fn_name":null},{"line":45,"address":[6140193,6140397],"length":1,"stats":{"Line":0},"fn_name":null},{"line":49,"address":[6140802],"length":1,"stats":{"Line":1},"fn_name":null},{"line":51,"address":[6138904],"length":1,"stats":{"Line":0},"fn_name":null},{"line":52,"address":[6139048,6138952,6139210,6139112],"length":1,"stats":{"Line":0},"fn_name":null},{"line":53,"address":[6139434],"length":1,"stats":{"Line":0},"fn_name":null},{"line":54,"address":[6139180,6139390],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":10,"coverable":23},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","project_manager","get_projects.rs"],"content":"use diesel::{result::Error::NotFound, ExpressionMethods, QueryDsl, RunQueryDsl};\n\nuse crate::aml_core::{\n    db_adapter::{models::Project, schema::projects, DbConn},\n    AppError,\n};\n\nuse super::{\n    GetProjectsResponse, GetProjectsResponseResult, ProjectDetails,\n    ProjectManagerError,\n};\n\npub fn get_projects(conn: \u0026mut DbConn) -\u003e GetProjectsResponseResult {\n    let projects = projects::table\n        .load::\u003cProject\u003e(conn)\n        .map_err(|e| ProjectManagerError::InternalError(e.to_string()));\n\n    let project_details = match projects {\n        Ok(projects) =\u003e {\n            let project_details: Vec\u003cProjectDetails\u003e = projects\n                .into_iter()\n                .map(|p| transform_project_for_response(p.clone()))\n                .collect();\n            project_details\n        }\n        Err(e) =\u003e {\n            log::error!(\"Error getting projects: {}\", e);\n            return Err(AppError::ProjectManagerError(e)).into();\n        }\n    };\n\n    Ok(GetProjectsResponse {\n        projects: project_details,\n    })\n}\n\npub fn transform_project_for_response(db_project: Project) -\u003e ProjectDetails {\n    ProjectDetails {\n        id: db_project.id,\n        slug: db_project.slug,\n        name: db_project.name,\n        description: db_project.description,\n        created_at: db_project.created_at,\n        modified_at: db_project.modified_at,\n    }\n}\n\npub fn get_project(proj_id: i32, conn: \u0026mut DbConn) -\u003e Result\u003cProject, ProjectManagerError\u003e {\n    if !project_exists(proj_id, conn)? {\n        log::error!(\"Project not found\");\n        return Err(ProjectManagerError::ProjectNotFound(proj_id.to_string()));\n    }\n    let found_project = projects::table\n        .find(proj_id)\n        .first::\u003cProject\u003e(conn)\n        .map_err(|e| ProjectManagerError::InternalError(e.to_string()))?;\n    Ok(found_project)\n}\n\npub fn project_exists(proj_id: i32, db_conn: \u0026mut DbConn) -\u003e Result\u003cbool, ProjectManagerError\u003e {\n    let found_project = projects::table.find(proj_id).first::\u003cProject\u003e(db_conn);\n\n    match found_project {\n        Ok(_) =\u003e Ok(true),\n        Err(NotFound) =\u003e Ok(false),\n        Err(e) =\u003e {\n            eprintln!(\"Error finding project - {}\", proj_id);\n            Err(ProjectManagerError::InternalError(e.to_string()))\n            // Err(anyhow::anyhow!(\"Error finding project - {}\", proj_id))\n        }\n    }\n}\n\n// TODO: This should be removed once the front end API switches to using ID instead of slug\npub fn get_project_by_slug(\n    proj_slug: \u0026str,\n    conn: \u0026mut DbConn,\n) -\u003e Result\u003cProject, ProjectManagerError\u003e {\n    if !project_exists_by_slug(proj_slug, conn)? {\n        log::error!(\"Project not found\");\n        return Err(ProjectManagerError::ProjectNotFound(proj_slug.to_string()));\n    }\n    let found_project = projects::table\n        .filter(projects::slug.eq(proj_slug))\n        .first::\u003cProject\u003e(conn)\n        .map_err(|e| ProjectManagerError::InternalError(e.to_string()))?;\n    Ok(found_project)\n}\n\npub fn project_exists_by_slug(\n    proj_slug: \u0026str,\n    db_conn: \u0026mut DbConn,\n) -\u003e Result\u003cbool, ProjectManagerError\u003e {\n    let found_project = projects::table\n        .filter(projects::slug.eq(proj_slug))\n        .first::\u003cProject\u003e(db_conn);\n\n    match found_project {\n        Ok(_) =\u003e Ok(true),\n        Err(NotFound) =\u003e Ok(false),\n        Err(e) =\u003e {\n            eprintln!(\"Error finding project - {}\", proj_slug);\n            Err(ProjectManagerError::InternalError(e.to_string()))\n        }\n    }\n}\n","traces":[{"line":13,"address":[6141728,6142683,6142649],"length":1,"stats":{"Line":1},"fn_name":"get_projects"},{"line":14,"address":[6141753],"length":1,"stats":{"Line":1},"fn_name":null},{"line":16,"address":[5497618,5497600],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"},{"line":18,"address":[6141788],"length":1,"stats":{"Line":1},"fn_name":null},{"line":19,"address":[6141815],"length":1,"stats":{"Line":1},"fn_name":null},{"line":20,"address":[6141854],"length":1,"stats":{"Line":1},"fn_name":null},{"line":22,"address":[5497760,5497801],"length":1,"stats":{"Line":2},"fn_name":"{closure#1}"},{"line":24,"address":[6141925],"length":1,"stats":{"Line":1},"fn_name":null},{"line":26,"address":[6142069],"length":1,"stats":{"Line":0},"fn_name":null},{"line":27,"address":[6142103,6142190,6142248,6142473],"length":1,"stats":{"Line":0},"fn_name":null},{"line":28,"address":[6142319],"length":1,"stats":{"Line":0},"fn_name":null},{"line":32,"address":[6141973],"length":1,"stats":{"Line":1},"fn_name":null},{"line":37,"address":[6142720],"length":1,"stats":{"Line":1},"fn_name":"transform_project_for_response"},{"line":39,"address":[6142723],"length":1,"stats":{"Line":1},"fn_name":null},{"line":40,"address":[6142726],"length":1,"stats":{"Line":1},"fn_name":null},{"line":41,"address":[6142753],"length":1,"stats":{"Line":1},"fn_name":null},{"line":42,"address":[6142780],"length":1,"stats":{"Line":1},"fn_name":null},{"line":43,"address":[6142806],"length":1,"stats":{"Line":1},"fn_name":null},{"line":44,"address":[6142822],"length":1,"stats":{"Line":1},"fn_name":null},{"line":48,"address":[6142960],"length":1,"stats":{"Line":1},"fn_name":"get_project"},{"line":49,"address":[6142994],"length":1,"stats":{"Line":1},"fn_name":null},{"line":50,"address":[6143268,6143343,6143540],"length":1,"stats":{"Line":2},"fn_name":null},{"line":51,"address":[6143396],"length":1,"stats":{"Line":1},"fn_name":null},{"line":53,"address":[6143755,6143632,6143155],"length":1,"stats":{"Line":2},"fn_name":null},{"line":56,"address":[5497938,5497920],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"},{"line":57,"address":[6143663],"length":1,"stats":{"Line":1},"fn_name":null},{"line":60,"address":[6143792,6144362,6144273],"length":1,"stats":{"Line":1},"fn_name":"project_exists"},{"line":61,"address":[6143826],"length":1,"stats":{"Line":1},"fn_name":null},{"line":63,"address":[6143870,6143917],"length":1,"stats":{"Line":2},"fn_name":null},{"line":64,"address":[6143901],"length":1,"stats":{"Line":1},"fn_name":null},{"line":65,"address":[6143933],"length":1,"stats":{"Line":1},"fn_name":null},{"line":66,"address":[6143949],"length":1,"stats":{"Line":0},"fn_name":null},{"line":67,"address":[6144079,6143999],"length":1,"stats":{"Line":0},"fn_name":null},{"line":68,"address":[6144155],"length":1,"stats":{"Line":0},"fn_name":null},{"line":75,"address":[6144464],"length":1,"stats":{"Line":1},"fn_name":"get_project_by_slug"},{"line":79,"address":[6144519],"length":1,"stats":{"Line":1},"fn_name":null},{"line":80,"address":[6145083,6144807,6144882],"length":1,"stats":{"Line":0},"fn_name":null},{"line":81,"address":[6144945],"length":1,"stats":{"Line":0},"fn_name":null},{"line":83,"address":[6145298,6144698,6145175],"length":1,"stats":{"Line":2},"fn_name":null},{"line":84,"address":[6144686],"length":1,"stats":{"Line":1},"fn_name":null},{"line":86,"address":[5498098,5498080],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"},{"line":87,"address":[6145206],"length":1,"stats":{"Line":1},"fn_name":null},{"line":90,"address":[6145921,6145832,6145328],"length":1,"stats":{"Line":3},"fn_name":"project_exists_by_slug"},{"line":94,"address":[6145398,6145368],"length":1,"stats":{"Line":6},"fn_name":null},{"line":95,"address":[6145376],"length":1,"stats":{"Line":3},"fn_name":null},{"line":98,"address":[6145478,6145431],"length":1,"stats":{"Line":6},"fn_name":null},{"line":99,"address":[6145462],"length":1,"stats":{"Line":2},"fn_name":null},{"line":100,"address":[6145494],"length":1,"stats":{"Line":3},"fn_name":null},{"line":101,"address":[6145510],"length":1,"stats":{"Line":0},"fn_name":null},{"line":102,"address":[6145638,6145560],"length":1,"stats":{"Line":0},"fn_name":null},{"line":103,"address":[6145714],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":37,"coverable":51},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","project_manager","mod.rs"],"content":"use serde::{Deserialize, Serialize};\nuse thiserror::Error;\nuse ts_rs::TS;\n\nuse super::{date_time::AMLDateTime, AppError};\n\npub mod create_project;\npub mod delete_project;\npub mod get_projects;\npub mod update_project;\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct ProjectDetails {\n    pub id: i32,\n    pub slug: String,\n    pub name: String,\n    pub description: Option\u003cString\u003e,\n    pub modified_at: AMLDateTime,\n    pub created_at: AMLDateTime,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct CreateProjectRequest {\n    pub name: String,\n    pub description: Option\u003cString\u003e,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct CreateProjectResponse {\n    pub project: ProjectDetails,\n}\n\npub type CreateProjectResponseResult = Result\u003cCreateProjectResponse, AppError\u003e;\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct UpdateProjectRequest {\n    pub id: i32,\n    pub name: Option\u003cString\u003e,\n    pub description: Option\u003cString\u003e,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct UpdateProjectResponse {\n    pub project: ProjectDetails,\n}\n\npub type UpdateProjectResponseResult = Result\u003cUpdateProjectResponse, AppError\u003e;\n\n\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct GetProjectResponse {\n    pub project: ProjectDetails,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct GetProjectsRequest {}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct GetProjectsResponse {\n    pub projects: Vec\u003cProjectDetails\u003e,\n}\n\npub type GetProjectsResponseResult = Result\u003cGetProjectsResponse, AppError\u003e;\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct DeleteProjectRequest {\n    pub id: i32,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct DeleteProjectResponse {}\n\npub type DeleteProjectResponseResult = Result\u003cDeleteProjectResponse, AppError\u003e;\n\n#[derive(Error, Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum ProjectManagerError {\n    #[error(\"project not found\")]\n    ProjectNotFound(String),\n    #[error(\"project already exists\")]\n    ProjectAlreadyExists(String),\n    #[error(\"internal error\")]\n    InternalError(String),\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","project_manager","update_project.rs"],"content":"use std::path::PathBuf;\n\nuse diesel::{ExpressionMethods, QueryDsl, RunQueryDsl};\n\nuse crate::aml_core::{\n    db_adapter::{models::Project, schema::projects, DbConn},\n    file_data_manager, AppError,\n};\n\nuse super::{\n    create_project::generate_unique_slug,\n    get_projects::{get_project, transform_project_for_response},\n    ProjectDetails, ProjectManagerError, UpdateProjectRequest, UpdateProjectResponse,\n    UpdateProjectResponseResult,\n};\n\npub fn update_project(\n    req: \u0026UpdateProjectRequest,\n    app_dir: \u0026PathBuf,\n    conn: \u0026mut DbConn,\n) -\u003e UpdateProjectResponseResult {\n    log::info!(\"update_project request received\");\n\n    // find project by ID\n    let find_proj_result = get_project(req.id, conn);\n\n    match find_proj_result {\n        Err(e) =\u003e Err(AppError::InternalError(e.to_string())),\n        Ok(project) =\u003e {\n            match \u0026req.name {\n                Some(name) =\u003e {\n                    let old_slug = project.slug;\n                    let new_slug_result: Result\u003cString, ProjectManagerError\u003e =\n                        generate_unique_slug(\u0026name, app_dir, conn);\n\n                    match new_slug_result {\n                        Err(error) =\u003e {\n                            return Err(AppError::ProjectManagerError(\n                                ProjectManagerError::InternalError(error.to_string()),\n                            ));\n                        }\n                        Ok(new_slug) =\u003e {\n                            let new_slug_owned = new_slug.clone();\n                            //set ONLY if req.name || req.description is filled\n                            let update_result =\n                                diesel::update(projects::table.filter(projects::id.eq(project.id)))\n                                    .set((\n                                        req.name.as_ref().map(|n| {\n                                            (projects::name.eq(n), projects::slug.eq(new_slug))\n                                        }),\n                                        req.description\n                                            .as_ref()\n                                            .map(|d| (projects::description.eq(d))),\n                                    ))\n                                    .returning((\n                                        projects::id,\n                                        projects::slug,\n                                        projects::name,\n                                        projects::description,\n                                        projects::modified_at,\n                                        projects::created_at,\n                                    ))\n                                    .get_result(conn);\n\n                            let project: Project = match update_result {\n                                Ok((id, slug, name, description, modified_at, created_at)) =\u003e {\n                                    Project {\n                                        id,\n                                        slug,\n                                        name,\n                                        description,\n                                        modified_at,\n                                        created_at,\n                                    }\n                                }\n                                Err(error) =\u003e {\n                                    return Err(AppError::ProjectManagerError(\n                                        ProjectManagerError::InternalError(error.to_string()),\n                                    ));\n                                }\n                            };\n\n                            let project_details: ProjectDetails =\n                                transform_project_for_response(project);\n                            let _ = file_data_manager::update_project_dir(\n                                \u0026old_slug,\n                                \u0026new_slug_owned,\n                                app_dir,\n                            )\n                            .map_err(|error| {\n                                AppError::ProjectManagerError(\n                                    ProjectManagerError::ProjectAlreadyExists(error.to_string()),\n                                )\n                            })?;\n                            \n                            log::info!(\"update_project response: {:?}\", project_details);\n                            return Ok(UpdateProjectResponse {\n                                project: project_details,\n                            });\n                        }\n                    }\n                }\n                None =\u003e {\n                    // name was not updated\n                    let update_result =\n                        diesel::update(projects::table.filter(projects::id.eq(project.id)))\n                            .set((req\n                                .description\n                                .as_ref()\n                                .map(|d| (projects::description.eq(d))),))\n                            .returning((\n                                projects::id,\n                                projects::slug,\n                                projects::name,\n                                projects::description,\n                                projects::modified_at,\n                                projects::created_at,\n                            ))\n                            .get_result(conn);\n\n                    let project: Project = match update_result {\n                        Ok((id, slug, name, description, modified_at, created_at)) =\u003e Project {\n                            id,\n                            slug,\n                            name,\n                            description,\n                            modified_at,\n                            created_at,\n                        },\n                        Err(error) =\u003e {\n                            return Err(AppError::ProjectManagerError(\n                                ProjectManagerError::InternalError(error.to_string()),\n                            ));\n                        }\n                    };\n\n                    let project_details: ProjectDetails = transform_project_for_response(project);\n                    log::info!(\"update_project response: {:?}\", project_details);\n                    return Ok(UpdateProjectResponse {\n                        project: project_details,\n                    });\n                }\n            }\n        }\n    }\n}\n","traces":[{"line":17,"address":[6744016,6744695],"length":1,"stats":{"Line":1},"fn_name":"update_project"},{"line":22,"address":[6744087,6744302,6744186],"length":1,"stats":{"Line":2},"fn_name":null},{"line":25,"address":[6744251],"length":1,"stats":{"Line":1},"fn_name":null},{"line":27,"address":[6744268],"length":1,"stats":{"Line":1},"fn_name":null},{"line":28,"address":[6744470],"length":1,"stats":{"Line":0},"fn_name":null},{"line":29,"address":[6744394],"length":1,"stats":{"Line":1},"fn_name":null},{"line":30,"address":[6744436],"length":1,"stats":{"Line":1},"fn_name":null},{"line":31,"address":[6744773],"length":1,"stats":{"Line":1},"fn_name":null},{"line":32,"address":[6744781],"length":1,"stats":{"Line":1},"fn_name":null},{"line":33,"address":[6744928,6744821],"length":1,"stats":{"Line":2},"fn_name":null},{"line":36,"address":[6744947],"length":1,"stats":{"Line":1},"fn_name":null},{"line":37,"address":[6745043],"length":1,"stats":{"Line":0},"fn_name":null},{"line":38,"address":[6745198],"length":1,"stats":{"Line":0},"fn_name":null},{"line":39,"address":[6745075,6745154],"length":1,"stats":{"Line":0},"fn_name":null},{"line":42,"address":[6744973],"length":1,"stats":{"Line":1},"fn_name":null},{"line":43,"address":[6745013],"length":1,"stats":{"Line":1},"fn_name":null},{"line":45,"address":[6745368,6745743,6745441],"length":1,"stats":{"Line":3},"fn_name":null},{"line":47,"address":[6745703],"length":1,"stats":{"Line":1},"fn_name":null},{"line":48,"address":[5499448,5499475,5499264],"length":1,"stats":{"Line":2},"fn_name":"{closure#0}"},{"line":49,"address":[5499355,5499300],"length":1,"stats":{"Line":2},"fn_name":null},{"line":51,"address":[6745594,6745669],"length":1,"stats":{"Line":2},"fn_name":null},{"line":53,"address":[5499488,5499497],"length":1,"stats":{"Line":2},"fn_name":"{closure#1}"},{"line":65,"address":[6745832],"length":1,"stats":{"Line":1},"fn_name":null},{"line":66,"address":[6745865],"length":1,"stats":{"Line":1},"fn_name":null},{"line":76,"address":[6746228],"length":1,"stats":{"Line":0},"fn_name":null},{"line":77,"address":[6746399],"length":1,"stats":{"Line":0},"fn_name":null},{"line":78,"address":[6746276,6746355],"length":1,"stats":{"Line":0},"fn_name":null},{"line":83,"address":[6746198,6746528],"length":1,"stats":{"Line":2},"fn_name":null},{"line":86,"address":[6746544],"length":1,"stats":{"Line":1},"fn_name":null},{"line":87,"address":[6746651],"length":1,"stats":{"Line":1},"fn_name":null},{"line":90,"address":[5499520,5499701],"length":1,"stats":{"Line":0},"fn_name":"{closure#2}"},{"line":91,"address":[5499637],"length":1,"stats":{"Line":0},"fn_name":null},{"line":92,"address":[5499598,5499538],"length":1,"stats":{"Line":0},"fn_name":null},{"line":96,"address":[6746813,6747179,6746968,6747026],"length":1,"stats":{"Line":3},"fn_name":null},{"line":97,"address":[6747122],"length":1,"stats":{"Line":1},"fn_name":null},{"line":98,"address":[6747088],"length":1,"stats":{"Line":1},"fn_name":null},{"line":105,"address":[6744737,6747479,6747579],"length":1,"stats":{"Line":0},"fn_name":null},{"line":107,"address":[6747521],"length":1,"stats":{"Line":0},"fn_name":null},{"line":110,"address":[5499728,5499737],"length":1,"stats":{"Line":0},"fn_name":"{closure#3}"},{"line":121,"address":[6747672],"length":1,"stats":{"Line":0},"fn_name":null},{"line":130,"address":[6748068],"length":1,"stats":{"Line":0},"fn_name":null},{"line":131,"address":[6748239],"length":1,"stats":{"Line":0},"fn_name":null},{"line":132,"address":[6748116,6748195],"length":1,"stats":{"Line":0},"fn_name":null},{"line":137,"address":[6748038],"length":1,"stats":{"Line":0},"fn_name":null},{"line":138,"address":[6748644,6748351,6748441,6748499],"length":1,"stats":{"Line":0},"fn_name":null},{"line":139,"address":[6748587],"length":1,"stats":{"Line":0},"fn_name":null},{"line":140,"address":[6748561],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":26,"coverable":47},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","lib.rs"],"content":"pub mod aml_core;\n\npub mod uicontroller {\n\n    use crate::aml_core::file_data_manager;\n    use crate::aml_core::network_manager::{self, NetworkSimulator};\n    use crate::aml_core::{element_repository, project_manager};\n    use diesel::r2d2::{ConnectionManager, Pool};\n    use diesel::SqliteConnection;\n    use tauri::State;\n\n    #[tauri::command]\n    #[cfg(not(tarpaulin_include))]\n    pub fn get_elements(handle: tauri::AppHandle) -\u003e element_repository::GetElementsResponseResult {\n        let resource_path = handle.path_resolver()\n            .resolve_resource(\"resources/elements.json\")\n            .ok_or(element_repository::GetElementsError::FileError(\n                \"Could not load elements.json\".to_string()\n            ))?;\n        element_repository::list_elements_from_simulator(\u0026resource_path)\n    }\n\n    #[tauri::command]\n    #[cfg(not(tarpaulin_include))]\n    pub fn put_files(\n        input: file_data_manager::FilesUploadRequest,\n        app_dir: State\u003cstd::path::PathBuf\u003e,\n        db_conn: State\u003cPool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e\u003e,\n    ) -\u003e file_data_manager::SaveFilesResponseResult {\n        let conn = \u0026mut db_conn.get().expect(\"Unable to get db connection\");\n        file_data_manager::put_files::save_input_files(\u0026input, \u0026app_dir, conn)\n    }\n\n    #[tauri::command]\n    #[cfg(not(tarpaulin_include))]\n    pub fn get_files(\n        req: file_data_manager::GetFilesRequest,\n        db_conn: State\u003cPool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e\u003e,\n    ) -\u003e file_data_manager::GetFilesResponseResult {\n        let conn = \u0026mut db_conn.get().expect(\"Unable to get db connection\");\n        file_data_manager::get_files::get_input_files(\u0026req, conn)\n    }\n\n    #[tauri::command]\n    #[cfg(not(tarpaulin_include))]\n    pub fn get_projects(\n        db_conn: State\u003cPool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e\u003e,\n    ) -\u003e project_manager::GetProjectsResponseResult {\n        let conn = \u0026mut db_conn.get().expect(\"Unable to get db connection\");\n        project_manager::get_projects::get_projects(conn)\n    }\n\n    #[tauri::command]\n    #[cfg(not(tarpaulin_include))]\n    pub fn simulate_network(\n        req: network_manager::SimulateNetworkRequest,\n        app_dir: State\u003cstd::path::PathBuf\u003e,\n        db_conn: State\u003cPool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e\u003e\n    ) -\u003e Result\u003cnetwork_manager::SimulateNetworkResponse, network_manager::SimulatorError\u003e {\n        let conn = \u0026mut db_conn.get().expect(\"Unable to get db connection\");\n\n        let nvo: network_manager::NetworkVO = req.network;\n        let project_slug: String = req.project_slug;\n        let sc = network_manager::AmlSimulatorSidecar::new();\n        let actual_network: network_manager::Network = nvo.to_network().unwrap();\n        let audio_path_str: String = req.audio_file_path;\n        let audio_path = std::path::Path::new(\u0026audio_path_str);\n\n        // call simulate network\n        let audio_path = std::path::Path::new(\u0026audio_path);\n        let resp: network_manager::SimulateNetworkResponse =\n            network_manager::AmlSimulator::sidecar_simulate_network(\n                \u0026project_slug,\n                \u0026sc,\n                \u0026actual_network,\n                \u0026audio_path,\n                \u0026app_dir,\n                conn\n            )?;\n\n        Ok(resp)\n    }\n\n    #[tauri::command]\n    #[cfg(not(tarpaulin_include))]\n    pub fn create_project(\n        req: project_manager::CreateProjectRequest,\n        app_dir: State\u003cstd::path::PathBuf\u003e,\n        db_conn: State\u003cPool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e\u003e,\n    ) -\u003e project_manager::CreateProjectResponseResult {\n        let conn = \u0026mut db_conn.get().expect(\"Unable to get db connection\");\n        project_manager::create_project::create_project(\u0026req, \u0026app_dir, conn)\n    }\n\n    #[tauri::command]\n    #[cfg(not(tarpaulin_include))]\n    pub fn delete_project(\n        req: project_manager::DeleteProjectRequest,\n        app_dir: State\u003cstd::path::PathBuf\u003e,\n        db_conn: State\u003cPool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e\u003e,\n    ) -\u003e project_manager::DeleteProjectResponseResult {\n        let conn = \u0026mut db_conn.get().expect(\"Unable to get db connection\");\n        project_manager::delete_project::delete_project(\u0026req, \u0026app_dir, conn)\n    }\n\n    #[tauri::command]\n    #[cfg(not(tarpaulin_include))]\n    pub fn update_project(\n        req: project_manager::UpdateProjectRequest,\n        app_dir: State\u003cstd::path::PathBuf\u003e,\n        db_conn: State\u003cPool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e\u003e,\n    ) -\u003e project_manager::UpdateProjectResponseResult {\n        let conn = \u0026mut db_conn.get().expect(\"Unable to get db connection\");\n        project_manager::update_project::update_project(\u0026req, \u0026app_dir, conn)\n    }\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","main.rs"],"content":"// Prevents additional console window on Windows in release, DO NOT REMOVE!!\n#![cfg_attr(not(debug_assertions), windows_subsystem = \"windows\")]\n\nuse diesel::r2d2::{ConnectionManager, Pool};\nuse diesel::SqliteConnection;\nuse log::{info, warn};\nuse simple_logger::SimpleLogger;\nuse std::path::PathBuf;\n\nuse aml_connect::aml_core::db_adapter;\nuse aml_connect::aml_core::file_data_manager;\nuse aml_connect::uicontroller;\n\n\n#[cfg(not(tarpaulin_include))]\nfn main() {\n    info!(\"Starting AML Connect...\");\n\n    tauri::Builder::default()\n        .setup(|app| {\n            init_logger();\n            info!(\"Initializing AML Connect...\");\n            let app_dir = init_fs(\u0026app.path_resolver());\n            let db_conn_pool = init_db(app_dir.clone());\n            tauri::Manager::manage(app, db_conn_pool);\n            tauri::Manager::manage(app, app_dir);\n            Ok(())\n        })\n        .invoke_handler(tauri::generate_handler![\n            uicontroller::get_elements,\n            uicontroller::put_files,\n            uicontroller::get_files,\n            uicontroller::get_projects,\n            uicontroller::create_project,\n            uicontroller::delete_project,\n            uicontroller::update_project,\n            uicontroller::simulate_network,  \n        ])\n        .run(tauri::generate_context!())\n        .expect(\"error while running tauri application\");\n}\n\n#[cfg(not(tarpaulin_include))]\nfn init_db(_: PathBuf) -\u003e Pool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e {\n    let db_conn_pool = db_adapter::establish_connection().unwrap_or_else(|e| {\n        panic!(\"Could not establish connection to database :{:?}\", e);\n    });\n\n    //Ensures that the migrations are run before the application starts\n    db_adapter::run_db_migrations(\u0026db_conn_pool).unwrap_or_else(|e| {\n        warn!(\"Failed to run pending database migrations :{:?}\", e);\n        ()\n    });\n\n    db_conn_pool\n}\n\n#[cfg(not(tarpaulin_include))]\nfn init_fs(path_resolver: \u0026tauri::PathResolver) -\u003e PathBuf {\n    // TODO: Fix\n    file_data_manager::create_app_dir_if_not_exists(path_resolver).unwrap_or_else(|e| {\n        panic!(\"Could not create app dir :{:?}\", e);\n    })\n}\n\n#[cfg(not(tarpaulin_include))]\nfn init_logger() {\n    SimpleLogger::new().init().unwrap_or_else(|e| {\n        panic!(\"Failed to initialize logger :{:?}\", e.to_string());\n    });\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","tests","integration_test.rs"],"content":"use crate::aml_connect::aml_core::db_adapter::models::*;\nuse aml_connect::{\n    self,\n    aml_core::{\n        db_adapter::{\n            self,\n            schema::{audio_files, input_data, projects},\n        },\n        file_data_manager::{\n            self, DataSet, FileUploadRequest, FilesUploadRequest, GetFilesRequest,\n        },\n    },\n};\nuse anyhow::Result;\nuse diesel::{\n    delete,\n    query_dsl::methods::FilterDsl,\n    r2d2::{ConnectionManager, PooledConnection},\n    Connection, ExpressionMethods, RunQueryDsl, SelectableHelper, SqliteConnection,\n};\nuse directories::BaseDirs;\nuse log::info;\nuse std::fs;\nuse std::path::MAIN_SEPARATOR;\nuse std::{\n    env,\n    path::{Path, PathBuf},\n};\n\nuse aml_connect::aml_core::network_manager::{self, NetworkSimulator, SimulatorError};\nuse serde_json::{self, Value};\n\nfn create_app_dir_if_not_exists() -\u003e Result\u003cPathBuf\u003e {\n    let app_dir = PathBuf::from(BaseDirs::new().unwrap().data_local_dir()).join(\"com.aml-connect.aspinity\");\n    if !app_dir.exists() {\n        fs::create_dir_all(app_dir.clone())?;\n    }\n    Ok(app_dir)\n}\n\nfn integration_test_setup(app_dir: PathBuf) {\n    let destination_dir = app_dir.join(\"test_project\").join(\"audio\");\n    fs::create_dir_all(\u0026destination_dir).unwrap();\n\n    let mut source_dir = env::current_dir().unwrap().parent().unwrap().to_path_buf();\n    source_dir.push(\"test_resources\");\n\n    let files_to_copy = [\"bearing-faults.wav\", \"rising-chirp.wav\", \"heart-rate.wav\"];\n\n    for file_name in \u0026files_to_copy {\n        let source_path = source_dir.join(file_name);\n        let destination_path = destination_dir.join(file_name);\n\n        fs::copy(\u0026source_path, \u0026destination_path).unwrap();\n    }\n}\n\n#[test]\nfn save_on_db() {\n    env::set_var(\"DATABASE_PATH\", \"./tests\");\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    let mut conn = conn_pool.get().unwrap();\n    conn.begin_test_transaction().unwrap();\n}\n\n#[test]\nfn test_list_elements_from_simulator() {\n    let mut sc = network_manager::AmlSimulatorSidecar::new();\n    sc.sidecar_name = String::from(format!(\"..{}aspinity_wrapper\", MAIN_SEPARATOR));\n    let elements_json_str = network_manager::AmlSimulator::list_elements(\u0026sc).unwrap();\n    let elements_json: Value = serde_json::from_str(elements_json_str.as_str())\n        .map_err(|e| SimulatorError::JsonParseError(e.to_string()))\n        .unwrap();\n\n    // check that one of the keys \"AcDiff\" exist in elements_json\n    assert!(elements_json[\"AcDiff\"].is_object());\n}\n\n// #[ignore]\n#[test]\nfn save_file_metadata() {\n    // set DATABASE_PATH env var\n    let db_dir_path = \"./tests\";\n    env::set_var(\"DATABASE_PATH\", \u0026db_dir_path);\n\n    // if exists, purge db under \"./tests\" before test\n    let db_name = db_adapter::DB_NAME;\n    let db_path = format!(\"{db_dir_path}/{db_name}\");\n    if Path::new(\u0026db_path).exists() {\n        std::fs::remove_file(\u0026db_path).unwrap();\n    }\n\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    db_adapter::run_db_migrations(\u0026conn_pool).unwrap();\n    let conn = \u0026mut conn_pool.get().unwrap();\n\n    use crate::aml_connect::aml_core::db_adapter::schema::projects;\n    let new_project = NewProject {\n        name: \"Test project\".to_string(),\n        description: Some(\"Test Project\".to_string()),\n        slug: \"test_project\".to_string(),\n    };\n\n    let project = diesel::insert_into(projects::table)\n        .values(\u0026new_project)\n        .returning(Project::as_returning())\n        .get_result::\u003cProject\u003e(conn)\n        .unwrap();\n\n    info!(\"Project: {:?}\", project);\n\n    let new_input_data = NewInputData {\n        file_name: Some(\"file1.wav\"),\n        project_id: project.id,\n        ml_dataset_type: None,\n        file_type: None,\n        file_extension: None,\n        file_size: None,\n        file_path: None,\n        uploaded_data: None,\n    };\n\n    use crate::aml_connect::aml_core::db_adapter::schema::input_data;\n    let input_data = diesel::insert_into(input_data::table)\n        .values(\u0026new_input_data)\n        .returning(InputData::as_returning())\n        .get_result::\u003cInputData\u003e(conn)\n        .unwrap();\n\n    let new_audio_file = NewAudioFile {\n        input_data_id: input_data.id,\n        length: Some(1),\n        category: Some(\"noisy\"),\n        peak_frequency: None,\n        spi_level: None,\n    };\n\n    use crate::aml_connect::aml_core::db_adapter::schema::audio_files;\n    diesel::insert_into(audio_files::table)\n        .values(\u0026new_audio_file)\n        .returning(AudioFile::as_returning())\n        .execute(conn)\n        .unwrap();\n\n    let found_project = projects::table\n        .filter(projects::id.eq(project.id))\n        .first::\u003cProject\u003e(conn)\n        .unwrap();\n\n    clear_db(conn);\n\n    assert!(found_project.description == project.description);\n}\n\n// #[ignore]\n#[test]\nfn validate_file_and_save_metadata() {\n    // set DATABASE_PATH env var\n    let db_dir_path = \"./tests\";\n    env::set_var(\"DATABASE_PATH\", \u0026db_dir_path);\n\n    // if exists, purge db under \"./tests\" before test\n    let db_name = db_adapter::DB_NAME;\n    let db_path = format!(\"{db_dir_path}/{db_name}\");\n    if Path::new(\u0026db_path).exists() {\n        std::fs::remove_file(\u0026db_path).unwrap();\n    }\n\n    let app_dir = create_app_dir_if_not_exists().unwrap();\n    integration_test_setup(app_dir.clone());\n\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    db_adapter::run_db_migrations(\u0026conn_pool).unwrap();\n    let conn = \u0026mut conn_pool.get().unwrap();\n\n    let request = FilesUploadRequest {\n        proj_slug: \"test_project\".to_string(),\n        input_files: vec![\n            FileUploadRequest {\n                file_name: \"bearing-faults.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n            FileUploadRequest {\n                file_name: \"rising-chirp.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n        ],\n    };\n\n    let project_slug = \"test_project\";\n    let dummy_project = NewProject {\n        name: \"Test project\".to_string(),\n        slug: project_slug.to_owned(),\n        description: Some(\"This is a test project\".to_owned()),\n    };\n    diesel::insert_into(projects::table)\n        .values(\u0026dummy_project)\n        .execute(conn)\n        .unwrap();\n\n    let file_upload_response =\n        file_data_manager::put_files::save_input_files(\u0026request, \u0026app_dir, conn);\n\n    println!(\n        \"file_upload_response : {}\",\n        file_upload_response.as_ref().unwrap().succeeded\n    );\n\n    clear_db(conn);\n    assert!(file_upload_response.as_ref().is_ok());\n    assert!(\n        file_upload_response\n            .as_ref()\n            .unwrap()\n            .upload_success_files\n            .len()\n            == 2\n    );\n    assert!(\n        file_upload_response.as_ref().unwrap().upload_success_files[0].file_name\n            == \"bearing-faults.wav\"\n    );\n    assert!(\n        file_upload_response.as_ref().unwrap().upload_success_files[1].file_name\n            == \"rising-chirp.wav\"\n    );\n    assert!(\n        file_upload_response\n            .as_ref()\n            .unwrap()\n            .upload_failed_files\n            .len()\n            == 0\n    );\n    assert!(file_upload_response.as_ref().unwrap().attempted == 2);\n    assert!(file_upload_response.as_ref().unwrap().succeeded == 2);\n    assert!(file_upload_response.as_ref().unwrap().failed == 0);\n}\n\n// #[ignore]\n#[test]\nfn validate_file_and_save_metadata_check_exists() {\n    // set DATABASE_PATH env var\n    let db_dir_path = \"./tests\";\n    env::set_var(\"DATABASE_PATH\", \u0026db_dir_path);\n\n    // if exists, purge db under \"./tests\" before test\n    let db_name = db_adapter::DB_NAME;\n    let db_path = format!(\"{db_dir_path}/{db_name}\");\n    if Path::new(\u0026db_path).exists() {\n        std::fs::remove_file(\u0026db_path).unwrap();\n    }\n\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    db_adapter::run_db_migrations(\u0026conn_pool).unwrap();\n    let conn = \u0026mut conn_pool.get().unwrap();\n\n    let request = FilesUploadRequest {\n        proj_slug: \"test_project\".to_string(),\n        input_files: vec![\n            FileUploadRequest {\n                file_name: \"gaga.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n            FileUploadRequest {\n                file_name: \"gaga_2.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n        ],\n    };\n\n    let project_slug = \"test_project\";\n    let dummy_project = NewProject {\n        name: \"Test project\".to_string(),\n        slug: project_slug.to_owned(),\n        description: Some(\"This is a test project\".to_owned()),\n    };\n    diesel::insert_into(projects::table)\n        .values(\u0026dummy_project)\n        .execute(conn)\n        .unwrap();\n\n    let app_dir = create_app_dir_if_not_exists().unwrap();\n    integration_test_setup(app_dir.clone());\n\n    let file_upload_response =\n        file_data_manager::put_files::save_input_files(\u0026request, \u0026app_dir, conn);\n    println!(\"file_upload_response : {:?}\", file_upload_response);\n\n    clear_db(conn);\n    assert!(file_upload_response.as_ref().is_ok());\n    assert!(\n        file_upload_response\n            .as_ref()\n            .unwrap()\n            .upload_failed_files\n            .len()\n            == 2\n    );\n    assert!(file_upload_response.as_ref().unwrap().attempted == 2);\n    assert!(file_upload_response.as_ref().unwrap().succeeded == 0);\n    assert!(file_upload_response.as_ref().unwrap().failed == 2);\n}\n\n#[test]\nfn get_audio_files_invalid_request() {\n    let db_dir_path = \"./tests\";\n    env::set_var(\"DATABASE_PATH\", \u0026db_dir_path);\n\n    // if exists, purge db under \"./tests\" before test\n    let db_name = db_adapter::DB_NAME;\n    let db_path = format!(\"{db_dir_path}/{db_name}\");\n    if Path::new(\u0026db_path).exists() {\n        std::fs::remove_file(\u0026db_path).unwrap();\n    }\n\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    db_adapter::run_db_migrations(\u0026conn_pool).unwrap();\n\n    let conn = \u0026mut conn_pool.get().unwrap();\n\n    let request = GetFilesRequest {\n        proj_slug: \"\".to_string(),\n        dataset_type: None,\n    };\n\n    let files = file_data_manager::get_files::get_input_files(\u0026request, conn);\n\n    assert!(files.is_err());\n\n    let request = GetFilesRequest {\n        proj_slug: \"invalid_project\".to_string(),\n        dataset_type: Some(DataSet::Training),\n    };\n\n    let files = file_data_manager::get_files::get_input_files(\u0026request, conn);\n    clear_db(conn);\n    assert!(files.is_err());\n}\n\n#[test]\nfn get_non_existent_files() {\n    let db_dir_path = \"./tests\";\n    env::set_var(\"DATABASE_PATH\", \u0026db_dir_path);\n\n    // if exists, purge db under \"./tests\" before test\n    let db_name = db_adapter::DB_NAME;\n    let db_path = format!(\"{db_dir_path}/{db_name}\");\n    if Path::new(\u0026db_path).exists() {\n        std::fs::remove_file(\u0026db_path).unwrap();\n    }\n\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    db_adapter::run_db_migrations(\u0026conn_pool).unwrap();\n    let conn = \u0026mut conn_pool.get().unwrap();\n\n    let request = FilesUploadRequest {\n        proj_slug: \"test_project\".to_string(),\n        input_files: vec![\n            FileUploadRequest {\n                file_name: \"bearing-faults.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n            FileUploadRequest {\n                file_name: \"heart-rate.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n            FileUploadRequest {\n                file_name: \"rising-chirp.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n        ],\n    };\n\n    let project_slug = \"test_project\";\n    let dummy_project = NewProject {\n        name: \"Test project\".to_string(),\n        slug: project_slug.to_owned(),\n        description: Some(\"This is a test project\".to_owned()),\n    };\n    diesel::insert_into(projects::table)\n        .values(\u0026dummy_project)\n        .execute(conn)\n        .unwrap();\n\n    let app_dir = create_app_dir_if_not_exists().unwrap();\n    integration_test_setup(app_dir.clone());\n\n    let file_upload_response =\n        file_data_manager::put_files::save_input_files(\u0026request, \u0026app_dir, conn);\n    println!(\"file_upload_response : {:?}\", file_upload_response);\n    assert!(file_upload_response.is_ok());\n    assert!(file_upload_response.unwrap().upload_success_files.len() == 3);\n\n    let get_file_request = file_data_manager::GetFilesRequest {\n        proj_slug: \"test_project\".to_string(),\n        dataset_type: Some(DataSet::Validation),\n    };\n\n    let get_file_response = file_data_manager::get_files::get_input_files(\u0026get_file_request, conn);\n    clear_db(conn);\n    assert!(get_file_response.unwrap().files.len() == 0);\n}\n\n// ignore unless - youve created bearing-faults.wav, heart-rate.wav and rising-chirp.wav in ~/.local/share/aml_connect\n// #[ignore]\n#[test]\nfn put_files_then_check_get_files() {\n    let db_dir_path = \"./tests\";\n    env::set_var(\"DATABASE_PATH\", \u0026db_dir_path);\n\n    // if exists, purge db under \"./tests\" before test\n    let db_name = db_adapter::DB_NAME;\n    let db_path = format!(\"{db_dir_path}/{db_name}\");\n    if Path::new(\u0026db_path).exists() {\n        std::fs::remove_file(\u0026db_path).unwrap();\n    }\n\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    db_adapter::run_db_migrations(\u0026conn_pool).unwrap();\n    let conn = \u0026mut conn_pool.get().unwrap();\n\n    let request = FilesUploadRequest {\n        proj_slug: \"test_project\".to_string(),\n        input_files: vec![\n            FileUploadRequest {\n                file_name: \"bearing-faults.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n            FileUploadRequest {\n                file_name: \"heart-rate.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n            FileUploadRequest {\n                file_name: \"rising-chirp.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n        ],\n    };\n\n    let project_slug = \"test_project\";\n    let dummy_project = NewProject {\n        name: \"Test project\".to_string(),\n        slug: project_slug.to_owned(),\n        description: Some(\"This is a test project\".to_owned()),\n    };\n    diesel::insert_into(projects::table)\n        .values(\u0026dummy_project)\n        .execute(conn)\n        .unwrap();\n\n    let app_dir = create_app_dir_if_not_exists().unwrap();\n    integration_test_setup(app_dir.clone());\n\n    let file_upload_response =\n        file_data_manager::put_files::save_input_files(\u0026request, \u0026app_dir, conn);\n    println!(\"file_upload_response : {:?}\", file_upload_response);\n    assert!(file_upload_response.is_ok());\n    assert!(file_upload_response.unwrap().upload_success_files.len() == 3);\n\n    let get_file_request = file_data_manager::GetFilesRequest {\n        proj_slug: \"test_project\".to_string(),\n        dataset_type: Some(DataSet::Training),\n    };\n    let get_files_response = file_data_manager::get_files::get_input_files(\u0026get_file_request, conn);\n    assert!(get_files_response.unwrap().files.len() == 3);\n    clear_db(conn);\n}\n\n#[test]\nfn validate_file_and_save_metadata_check_extension() {\n    let db_dir_path = \"./tests\";\n    env::set_var(\"DATABASE_PATH\", \u0026db_dir_path);\n\n    // if exists, purge db under \"./tests\" before test\n    let db_name = db_adapter::DB_NAME;\n    let db_path = format!(\"{db_dir_path}/{db_name}\");\n    if Path::new(\u0026db_path).exists() {\n        std::fs::remove_file(\u0026db_path).unwrap();\n    }\n\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    db_adapter::run_db_migrations(\u0026conn_pool).unwrap();\n    let conn = \u0026mut conn_pool.get().unwrap();\n\n    let request = FilesUploadRequest {\n        proj_slug: \"test_project\".to_string(),\n        input_files: vec![FileUploadRequest {\n            file_name: \"f2.txt\".to_string(),\n            dataset_type: DataSet::Training,\n        }],\n    };\n\n    let project_slug = \"test_project\";\n    let dummy_project = NewProject {\n        name: \"Test project\".to_string(),\n        slug: project_slug.to_owned(),\n        description: Some(\"This is a test project\".to_owned()),\n    };\n    diesel::insert_into(projects::table)\n        .values(\u0026dummy_project)\n        .execute(conn)\n        .unwrap();\n\n    let app_dir = create_app_dir_if_not_exists().unwrap();\n    integration_test_setup(app_dir.clone());\n\n    let file_upload_response =\n        file_data_manager::put_files::save_input_files(\u0026request, \u0026app_dir, conn);\n    println!(\"file_upload_response : {:?}\", file_upload_response);\n    assert!(file_upload_response.is_ok());\n    assert!(file_upload_response.unwrap().upload_failed_files.len() == 1);\n    clear_db(conn);\n}\n\nfn clear_db(conn: \u0026mut PooledConnection\u003cConnectionManager\u003cSqliteConnection\u003e\u003e) {\n    // The order in which these databases is deleted is important since there are foreign key relations that must be kept consistent.\n    delete(audio_files::table).execute(conn).unwrap();\n    delete(input_data::table).execute(conn).unwrap();\n    delete(projects::table).execute(conn).unwrap();\n}\n","traces":[{"line":33,"address":[4937136,4937428],"length":1,"stats":{"Line":1},"fn_name":"create_app_dir_if_not_exists"},{"line":34,"address":[4937153,4937454],"length":1,"stats":{"Line":1},"fn_name":null},{"line":35,"address":[4937557],"length":1,"stats":{"Line":1},"fn_name":null},{"line":36,"address":[4937708],"length":1,"stats":{"Line":0},"fn_name":null},{"line":38,"address":[4937610],"length":1,"stats":{"Line":1},"fn_name":null},{"line":41,"address":[4939127,4938138,4937872],"length":1,"stats":{"Line":1},"fn_name":"integration_test_setup"},{"line":42,"address":[4937970,4937887],"length":1,"stats":{"Line":2},"fn_name":null},{"line":43,"address":[4938193],"length":1,"stats":{"Line":1},"fn_name":null},{"line":45,"address":[4938240],"length":1,"stats":{"Line":1},"fn_name":null},{"line":46,"address":[4938519],"length":1,"stats":{"Line":1},"fn_name":null},{"line":48,"address":[4938550],"length":1,"stats":{"Line":1},"fn_name":null},{"line":50,"address":[4938639,4938770],"length":1,"stats":{"Line":2},"fn_name":null},{"line":51,"address":[4938799],"length":1,"stats":{"Line":1},"fn_name":null},{"line":52,"address":[4938932,4938858],"length":1,"stats":{"Line":2},"fn_name":null},{"line":54,"address":[4938975,4939023],"length":1,"stats":{"Line":2},"fn_name":null},{"line":524,"address":[4939152],"length":1,"stats":{"Line":1},"fn_name":"clear_db"},{"line":526,"address":[4939171],"length":1,"stats":{"Line":1},"fn_name":null},{"line":527,"address":[4939207],"length":1,"stats":{"Line":1},"fn_name":null},{"line":528,"address":[4939243],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":18,"coverable":19},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","tests","network_integration_tests.rs"],"content":"use aml_connect::aml_core::{\n    db_adapter::{self, models::{NewProject, Project}, schema::{projects, audio_files, input_data}},\n    network_manager::{self, NetworkSimulator},\n};\nuse anyhow::Result;\nuse diesel::{SelectableHelper, RunQueryDsl, r2d2::{PooledConnection, ConnectionManager}, SqliteConnection};\nuse directories::BaseDirs;\nuse serde_json;\nuse std::path::Path;\nuse std::{env, fs, path::PathBuf};\n\nfn create_app_dir_if_not_exists() -\u003e Result\u003cPathBuf\u003e {\n    let app_dir = PathBuf::from(BaseDirs::new().unwrap().data_local_dir()).join(\"com.aml-connect.aspinity\");\n    if !app_dir.exists() {\n        fs::create_dir_all(app_dir.clone())?;\n    }\n    Ok(app_dir)\n}\n\n#[test]\nfn test_sidecar_simulate_network() {\n    let db_dir_path = \"./tests\";\n    env::set_var(\"DATABASE_PATH\", \u0026db_dir_path);\n\n    let db_name = db_adapter::DB_NAME;\n    let db_path = format!(\"{db_dir_path}/{db_name}\");\n    if Path::new(\u0026db_path).exists() {\n        std::fs::remove_file(\u0026db_path).unwrap();\n    }\n\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    db_adapter::run_db_migrations(\u0026conn_pool).unwrap();\n\n    let conn = \u0026mut conn_pool.get().unwrap();\n\n    let mut test_resources_dir = env::current_dir().unwrap().parent().unwrap().to_path_buf();\n    test_resources_dir.push(\"test_resources\");\n    let nw_file_path = test_resources_dir.join(\"sidecar_test_network.json\");\n    let curr_network: network_manager::Network =\n        serde_json::from_str(\u0026fs::read_to_string(nw_file_path).unwrap()).unwrap();\n\n    let proj_slug = \"test_project\";\n    let new_project = NewProject {\n        name: \"Test project\".to_string(),\n        description: Some(\"Test Project\".to_string()),\n        slug: proj_slug.to_string(),\n    };\n\n    let _project = diesel::insert_into(projects::table)\n        .values(\u0026new_project)\n        .returning(Project::as_returning())\n        .get_result::\u003cProject\u003e(conn)\n        .unwrap();\n\n    let audio_file_path = test_resources_dir.join(\"rising-chirp.wav\");\n    let app_dir = create_app_dir_if_not_exists().unwrap();\n\n    let mut sc = network_manager::AmlSimulatorSidecar::new();\n    sc.sidecar_name = String::from(\"../aspinity_wrapper\");\n\n    let _resp = network_manager::AmlSimulator::sidecar_simulate_network(\n        \u0026proj_slug,\n        \u0026sc,\n        \u0026curr_network,\n        \u0026audio_file_path,\n        \u0026app_dir,\n        conn,\n    );\n\n    assert!(_resp.is_ok());\n    clear_db(conn);\n}\n\n#[test]\nfn test_sidecar_simulate_network_invalid_project_slug() {\n    let db_dir_path = \"./tests\";\n    env::set_var(\"DATABASE_PATH\", \u0026db_dir_path);\n\n    let db_name = db_adapter::DB_NAME;\n    let db_path = format!(\"{db_dir_path}/{db_name}\");\n    if Path::new(\u0026db_path).exists() {\n        std::fs::remove_file(\u0026db_path).unwrap();\n    }\n\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    db_adapter::run_db_migrations(\u0026conn_pool).unwrap();\n\n    let conn = \u0026mut conn_pool.get().unwrap();\n\n    let mut test_resources_dir = env::current_dir().unwrap().parent().unwrap().to_path_buf();\n    test_resources_dir.push(\"test_resources\");\n    let nw_file_path = test_resources_dir.join(\"sidecar_test_network.json\");\n    let curr_network: network_manager::Network =\n        serde_json::from_str(\u0026fs::read_to_string(nw_file_path).unwrap()).unwrap();\n\n    let proj_slug = \"test_project_xyz\"; // invalid project slug\n\n    let audio_file_path = test_resources_dir.join(\"rising-chirp.wav\");\n    let app_dir = create_app_dir_if_not_exists().unwrap();\n\n    let mut sc = network_manager::AmlSimulatorSidecar::new();\n    sc.sidecar_name = String::from(\"../aspinity_wrapper\");\n\n    let _resp = network_manager::AmlSimulator::sidecar_simulate_network(\n        \u0026proj_slug,\n        \u0026sc,\n        \u0026curr_network,\n        \u0026audio_file_path,\n        \u0026app_dir,\n        conn,\n    );\n\n    // let resp: network_manager::SimulateNetworkResponse = _resp.unwrap();\n    assert!(_resp.is_err());\n    clear_db(conn);\n}\n\nfn clear_db(conn: \u0026mut PooledConnection\u003cConnectionManager\u003cSqliteConnection\u003e\u003e) {\n    // The order in which these databases is deleted is important since there are foreign key relations that must be kept consistent.\n    diesel::delete(audio_files::table).execute(conn).unwrap();\n    diesel::delete(input_data::table).execute(conn).unwrap();\n    diesel::delete(projects::table).execute(conn).unwrap();\n}","traces":[{"line":12,"address":[4943184,4943476],"length":1,"stats":{"Line":1},"fn_name":"create_app_dir_if_not_exists"},{"line":13,"address":[4943502,4943201],"length":1,"stats":{"Line":1},"fn_name":null},{"line":14,"address":[4943605],"length":1,"stats":{"Line":1},"fn_name":null},{"line":15,"address":[4943756],"length":1,"stats":{"Line":0},"fn_name":null},{"line":17,"address":[4943658],"length":1,"stats":{"Line":1},"fn_name":null},{"line":120,"address":[4943920],"length":1,"stats":{"Line":1},"fn_name":"clear_db"},{"line":122,"address":[4943939],"length":1,"stats":{"Line":1},"fn_name":null},{"line":123,"address":[4943975],"length":1,"stats":{"Line":1},"fn_name":null},{"line":124,"address":[4944011],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":8,"coverable":9},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","tests","projects_integration_tests.rs"],"content":"use std::fs;\n\nuse std::env;\nuse std::path::PathBuf;\n\nuse aml_connect::aml_core::db_adapter::models::NewProject;\nuse aml_connect::aml_core::db_adapter::schema::projects;\nuse aml_connect::aml_core::project_manager::create_project;\nuse aml_connect::aml_core::project_manager::delete_project;\nuse aml_connect::aml_core::project_manager::get_projects::get_project;\nuse aml_connect::aml_core::project_manager::update_project;\nuse aml_connect::aml_core::project_manager::ProjectManagerError;\nuse aml_connect::aml_core::{db_adapter, project_manager};\nuse anyhow::Context;\nuse diesel::r2d2::{ConnectionManager, Pool};\nuse diesel::{delete, Connection, ExpressionMethods, QueryDsl, RunQueryDsl, SqliteConnection};\nuse directories::BaseDirs;\nuse log::{info, warn};\n\n#[test]\nfn test_get_all_projects() {\n    env::set_var(\"DATABASE_PATH\", \"./tests\");\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    let mut conn = conn_pool.get().unwrap();\n    conn.begin_test_transaction().unwrap();\n\n    // Create some test projects\n    add_dummy_projects(\u0026conn_pool);\n\n    let res = project_manager::get_projects::get_projects(\u0026mut conn).unwrap();\n\n    // Check that the returned projects match the inserted projects\n    assert_eq!(res.projects.len(), 5);\n    assert_eq!(\n        res.projects[0].name,\n        \"Test Project for projects_integration_tests\"\n    );\n\n    delete(projects::table).execute(\u0026mut conn).unwrap();\n}\n\n#[test]\nfn test_crud_project() {\n    env::set_var(\"DATABASE_PATH\", \"./tests\");\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    let mut conn = conn_pool.get().unwrap();\n    conn.begin_test_transaction().unwrap();\n\n    let app_dir = create_app_dir_if_not_exists().unwrap();\n\n    let create_response = create_project::create_project(\n        \u0026project_manager::CreateProjectRequest {\n            name: \"TestProject\".to_owned(),\n            description: Some(\"Sample Description\".to_owned()),\n        },\n        \u0026app_dir,\n        \u0026mut conn,\n    );\n\n    assert!(create_response.is_ok());\n    let project = create_response.unwrap().project;\n    assert!(project.name == \"TestProject\");\n\n    // assert!(fs::try_exists(app_dir.join(project.slug)).unwrap() == true);\n    assert!(app_dir.join(\u0026project.slug).exists() == true);\n\n    let update_response = update_project::update_project(\n        \u0026project_manager::UpdateProjectRequest {\n            id: project.id,\n            name: Some(\"TestProject-Updated\".to_owned()),\n            description: Some(\"Updated Description\".to_owned()),\n        },\n        \u0026app_dir,\n        \u0026mut conn,\n    );\n\n    assert!(update_response.is_ok());\n    let updated_project = update_response.unwrap().project;\n\n    assert!(updated_project.name == \"TestProject-Updated\");\n    assert!(updated_project.description == Some(\"Updated Description\".to_owned()));\n\n    //assert!(updated_project.slug == project.slug);\n    assert!(app_dir.join(\u0026updated_project.slug).exists() == true);\n    assert!(app_dir.join(\u0026project.slug).exists() == false);\n\n    let delete_resp = delete_project::delete_project(\n        \u0026project_manager::DeleteProjectRequest { id: project.id },\n        \u0026app_dir,\n        \u0026mut conn,\n    );\n\n    assert!(delete_resp.is_ok());\n    assert!(app_dir.join(\u0026updated_project.slug).exists() == false);\n\n    let find_proj_result = get_project(project.id, \u0026mut conn);\n    assert!(find_proj_result.is_err());\n    assert!(matches!(\n        find_proj_result,\n        Err(ProjectManagerError::ProjectNotFound(_))\n    ));\n\n    fs::remove_dir_all(app_dir).unwrap();\n}\n\n#[cfg(not(tarpaulin_include))]\nfn create_app_dir_if_not_exists() -\u003e anyhow::Result\u003cPathBuf\u003e {\n    let app_dir = PathBuf::from(BaseDirs::new().unwrap().data_local_dir()).join(\"aml_connect\");\n    if !app_dir.exists() {\n        fs::create_dir_all(app_dir.clone())?;\n    }\n    Ok(app_dir)\n}\n\n#[cfg(not(tarpaulin_include))]\nfn add_dummy_projects(db_conn_pool: \u0026Pool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e) {\n    add_dummy_project(\"test_project\", db_conn_pool).unwrap_or_else(|e| {\n        warn!(\n            \"Failed to add dummy project OR project already exists:{:?}\",\n            e\n        );\n        ()\n    });\n\n    add_dummy_project(\"test_project1\", db_conn_pool).unwrap_or_else(|e| {\n        warn!(\n            \"Failed to add dummy project OR project already exists:{:?}\",\n            e\n        );\n        ()\n    });\n    add_dummy_project(\"test_project2\", db_conn_pool).unwrap_or_else(|e| {\n        warn!(\n            \"Failed to add dummy project OR project already exists:{:?}\",\n            e\n        );\n        ()\n    });\n    add_dummy_project(\"test_project3\", db_conn_pool).unwrap_or_else(|e| {\n        warn!(\n            \"Failed to add dummy project OR project already exists:{:?}\",\n            e\n        );\n        ()\n    });\n    add_dummy_project(\"test_project4\", db_conn_pool).unwrap_or_else(|e| {\n        warn!(\n            \"Failed to add dummy project OR project already exists:{:?}\",\n            e\n        );\n        ()\n    });\n}\n\n#[cfg(not(tarpaulin_include))]\nfn add_dummy_project(\n    project_slug: \u0026str,\n    db_conn_pool: \u0026Pool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e,\n) -\u003e anyhow::Result\u003c()\u003e {\n    let conn = \u0026mut db_conn_pool\n        .get()\n        .with_context(|| \"failed to get db connection to add dummy project\")?;\n\n    let match_count = projects::table\n        .filter(projects::slug.eq(project_slug))\n        .count()\n        .get_result::\u003ci64\u003e(conn)\n        .with_context(|| format!(\"failed to get count of projects with slug : {project_slug}\"))?;\n\n    if match_count == 1 {\n        info!(\"Dummy project already exists\");\n        Ok(())\n    } else {\n        info!(\"Adding dummy project\");\n        let dummy_project = NewProject {\n            slug: project_slug.to_owned(),\n            name: \"Test Project for projects_integration_tests\".to_owned(),\n            description: Some(\"This is a test project\".to_owned()),\n        };\n        diesel::insert_into(projects::table)\n            .values(\u0026dummy_project)\n            .execute(conn)\n            .with_context(|| format!(\"failed to insert dummy project : {project_slug}\"))?;\n        Ok(())\n    }\n}\n","traces":[],"covered":0,"coverable":0}]};
        var previousData = {"files":[{"path":["/","home","sbhatna2","workspace","aml-connect","node_modules","@tauri-apps","cli","build.rs"],"content":"// Copyright 2019-2023 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\n\nfn main() {\n  ::napi_build::setup();\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","sbhatna2","workspace","aml-connect","node_modules","@tauri-apps","cli","src","lib.rs"],"content":"// Copyright 2019-2023 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\n\nuse napi::{\n  threadsafe_function::{ErrorStrategy, ThreadsafeFunction, ThreadsafeFunctionCallMode},\n  Error, JsFunction, Result, Status,\n};\n\n#[napi_derive::napi]\npub fn run(args: Vec\u003cString\u003e, bin_name: Option\u003cString\u003e, callback: JsFunction) -\u003e Result\u003c()\u003e {\n  let function: ThreadsafeFunction\u003cbool, ErrorStrategy::CalleeHandled\u003e = callback\n    .create_threadsafe_function(0, |ctx| ctx.env.get_boolean(ctx.value).map(|v| vec![v]))?;\n\n  // we need to run in a separate thread so Node.js (e.g. vue-cli-plugin-tauri) consumers\n  // can do work while `tauri dev` is running.\n  std::thread::spawn(move || match tauri_cli::try_run(args, bin_name) {\n    Ok(_) =\u003e function.call(Ok(true), ThreadsafeFunctionCallMode::Blocking),\n    Err(e) =\u003e function.call(\n      Err(Error::new(Status::GenericFailure, format!(\"{:#}\", e))),\n      ThreadsafeFunctionCallMode::Blocking,\n    ),\n  });\n\n  Ok(())\n}\n\n#[napi_derive::napi]\npub fn log_error(error: String) {\n  log::error!(\"{}\", error);\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","build.rs"],"content":"fn main() {\n  tauri_build::build()\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","date_time.rs"],"content":"use std::error::Error;\n\nuse chrono::NaiveDateTime;\nuse diesel::sql_types::Timestamp;\nuse diesel::{prelude::Queryable, sqlite::Sqlite};\nuse serde::{Deserialize, Serialize};\nuse ts_rs::TS;\n\n#[derive(Debug, Serialize, Deserialize, Queryable)]\npub struct AMLDateTime(pub NaiveDateTime);\n\nimpl TS for AMLDateTime {\n    fn name() -\u003e String {\n        \"Date\".to_string()\n    }\n\n    fn dependencies() -\u003e Vec\u003cts_rs::Dependency\u003e {\n        Vec::new()\n    }\n\n    fn transparent() -\u003e bool {\n        true\n    }\n}\n\nimpl Queryable\u003cTimestamp, Sqlite\u003e for AMLDateTime {\n    type Row = NaiveDateTime;\n\n    fn build(row: Self::Row) -\u003e Result\u003cSelf, Box\u003cdyn Error + Send + Sync\u003e\u003e {\n        Ok(AMLDateTime(row))\n    }\n}\n\nimpl Clone for AMLDateTime {\n    fn clone(\u0026self) -\u003e Self {\n        AMLDateTime(self.0.clone())\n    }\n}\n","traces":[{"line":13,"address":[6767760],"length":1,"stats":{"Line":1},"fn_name":"name"},{"line":14,"address":[6767768],"length":1,"stats":{"Line":1},"fn_name":null},{"line":17,"address":[7062560],"length":1,"stats":{"Line":1},"fn_name":"dependencies"},{"line":18,"address":[9331752],"length":1,"stats":{"Line":1},"fn_name":null},{"line":21,"address":[6853136],"length":1,"stats":{"Line":1},"fn_name":"transparent"},{"line":29,"address":[6767840],"length":1,"stats":{"Line":3},"fn_name":"build"},{"line":30,"address":[9331795],"length":1,"stats":{"Line":3},"fn_name":null},{"line":35,"address":[6767888],"length":1,"stats":{"Line":1},"fn_name":"clone"},{"line":36,"address":[6767906],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":9,"coverable":9},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","db_adapter","db_error.rs"],"content":"#[derive(Error, Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum DBError {\n    #[error(\"database query error\")]\n    UnableToQueryDatabase(String),\n    #[error(\"database update error\")]\n    UnableToStoreInDatabase(String),\n    #[error(\"Not Found\")]\n    NotFound(String),\n    // Add more error variants as needed.\n}\n\nimpl std::error::Error for DBError {}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","db_adapter","mod.rs"],"content":"use anyhow::{Context, Error, Result};\nuse diesel::migration::MigrationConnection;\nuse diesel::r2d2::{ConnectionManager, Pool, PooledConnection};\nuse diesel::{Connection, SqliteConnection};\nuse diesel_migrations::{embed_migrations, EmbeddedMigrations, MigrationHarness};\nuse directories::ProjectDirs;\nuse dotenvy::dotenv;\nuse log::info;\nuse std::env;\nuse std::fs;\nuse std::path::Path;\n\npub mod models;\npub mod schema;\n\npub type SqlitePool = Pool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e;\npub type DbConn = PooledConnection\u003cConnectionManager\u003cSqliteConnection\u003e\u003e;\n\npub const DB_NAME: \u0026'static str = \"aml_connect.db\";\npub const MIGRATIONS: EmbeddedMigrations = embed_migrations!(\"migrations\");\n\npub fn establish_connection() -\u003e Result\u003cSqlitePool\u003e {\n    let db_url = get_url()?;\n\n    let mut db_connection = create_if_not_exists(\u0026db_url)?;\n    initialize_diesel_schema(\u0026mut db_connection)?;\n\n    let conn_pool = new_conn_pool(db_url)?;\n    Ok(conn_pool)\n}\n\npub fn run_db_migrations(conn_pool: \u0026Pool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e) -\u003e Result\u003c()\u003e {\n    conn_pool\n        .get()\n        .with_context(|| \"Failed to get DB connection to run migrations\")?\n        .run_pending_migrations(MIGRATIONS)\n        .map_err(|e| Error::msg(format!(\"Failed to run migrations: {:?}\", e)))?;\n\n    Ok(())\n}\n\nfn new_conn_pool(db_url: String) -\u003e Result\u003cPool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e\u003e {\n    let connection_manager = ConnectionManager::\u003cSqliteConnection\u003e::new(db_url);\n\n    //Creates 3 threads in the pool by default\n    Pool::builder()\n        .build(connection_manager)\n        .with_context(|| \"Failed to open minimum number of database connections\\n\")\n}\n\nfn get_url() -\u003e Result\u003cString\u003e {\n    \n    dotenv().ok();\n\n    let db_path = match env::var(\"DATABASE_PATH\") {\n        Ok(env_path) =\u003e {\n            info!(\"Using environment variable for database\");\n            Path::new(\u0026env_path).join(DB_NAME)\n        }\n        Err(_) =\u003e {\n            info!(\"Using OS specific application directory for database\");\n            // TODO: Move this to file management module\n            let proj_dirs = ProjectDirs::from(\"com\", \"aspinity\", \"aml_connect\")\n                .with_context(|| \"Failed to get application directory\\n\")?;\n\n            let app_dir = proj_dirs.data_local_dir();\n\n            fs::create_dir_all(app_dir)\n                .with_context(|| \"Failed to create application directory\\n\")?;\n\n            proj_dirs.data_local_dir().join(DB_NAME)\n        }\n    };\n\n    let db_url = db_path\n                .to_str()\n                .with_context(|| \"Failed to convert database path to string\\n\")?\n                .to_owned();\n    info!(\"Using database at {}\", db_url);\n    Ok(db_url)\n}\n\nfn create_if_not_exists(db_url: \u0026str) -\u003e Result\u003cSqliteConnection\u003e {\n    match SqliteConnection::establish(\u0026db_url) {\n        Ok(connection) =\u003e Ok(connection),\n        Err(e) =\u003e Err(Error::msg(format!(\n            \"Failed to establish connection to database: {:?}\",\n            e\n        ))),\n    }\n}\n\nfn initialize_diesel_schema(db_connection: \u0026mut SqliteConnection) -\u003e Result\u003c()\u003e {\n    let _ = db_connection\n        .setup()\n        .with_context(|| \"Failed to diesel schema migrations table\\n\")?;\n    Ok(())\n}\n\n#[cfg(test)]\nmod tests{\n    use super::*;\n\n    #[test]\n    fn test_get_url_from_env() {\n        let db_path = \"/home/test_user/.local/share/aml_connect\";\n        env::set_var(\"DATABASE_PATH\", db_path);\n        let db_url = get_url().unwrap();\n        env::remove_var(\"DATABASE_PATH\");\n\n        assert_eq!(db_url, \"/home/test_user/.local/share/aml_connect/aml_connect.db\");\n    }\n}\n","traces":[{"line":22,"address":[5895592,5894496,5895528],"length":1,"stats":{"Line":3},"fn_name":"establish_connection"},{"line":23,"address":[5894503,5894671],"length":1,"stats":{"Line":3},"fn_name":null},{"line":25,"address":[5491342,5491128,5490991],"length":1,"stats":{"Line":6},"fn_name":null},{"line":26,"address":[5491327,5491480,5491603],"length":1,"stats":{"Line":6},"fn_name":null},{"line":28,"address":[5491821,5491705,5491538],"length":1,"stats":{"Line":6},"fn_name":null},{"line":29,"address":[5491779],"length":1,"stats":{"Line":3},"fn_name":null},{"line":32,"address":[5492538,5492000],"length":1,"stats":{"Line":2},"fn_name":"run_db_migrations"},{"line":33,"address":[5492308,5492460,5492233,5492018],"length":1,"stats":{"Line":4},"fn_name":null},{"line":35,"address":[5492217],"length":1,"stats":{"Line":0},"fn_name":null},{"line":37,"address":[6682192,6682209],"length":1,"stats":{"Line":2},"fn_name":"{closure#1}"},{"line":39,"address":[5492524],"length":1,"stats":{"Line":2},"fn_name":null},{"line":42,"address":[5492786,5492576,5492817],"length":1,"stats":{"Line":3},"fn_name":"new_conn_pool"},{"line":43,"address":[5492586],"length":1,"stats":{"Line":3},"fn_name":null},{"line":46,"address":[5492707,5492616],"length":1,"stats":{"Line":6},"fn_name":null},{"line":47,"address":[5492673],"length":1,"stats":{"Line":3},"fn_name":null},{"line":48,"address":[6682448],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"},{"line":51,"address":[5494070,5494461,5492832],"length":1,"stats":{"Line":4},"fn_name":"get_url"},{"line":53,"address":[5492855],"length":1,"stats":{"Line":4},"fn_name":null},{"line":55,"address":[5492905],"length":1,"stats":{"Line":4},"fn_name":null},{"line":56,"address":[5492942],"length":1,"stats":{"Line":4},"fn_name":null},{"line":57,"address":[5494152,5494210,5494301,5492974],"length":1,"stats":{"Line":12},"fn_name":null},{"line":58,"address":[5494272,5494407],"length":1,"stats":{"Line":8},"fn_name":null},{"line":61,"address":[5493116,5493180,5493022,5493309],"length":1,"stats":{"Line":0},"fn_name":null},{"line":63,"address":[5493650,5493408,5493248],"length":1,"stats":{"Line":0},"fn_name":null},{"line":64,"address":[5493634],"length":1,"stats":{"Line":0},"fn_name":null},{"line":66,"address":[5493599,5493750],"length":1,"stats":{"Line":0},"fn_name":null},{"line":68,"address":[5493766,5493937],"length":1,"stats":{"Line":0},"fn_name":null},{"line":69,"address":[6682480],"length":1,"stats":{"Line":0},"fn_name":"{closure#1}"},{"line":71,"address":[5493884,5494019],"length":1,"stats":{"Line":0},"fn_name":null},{"line":75,"address":[5494590,5494763,5494503],"length":1,"stats":{"Line":8},"fn_name":null},{"line":77,"address":[5494747],"length":1,"stats":{"Line":0},"fn_name":null},{"line":79,"address":[5494890,5495120,5494948,5494800],"length":1,"stats":{"Line":12},"fn_name":null},{"line":80,"address":[5495018],"length":1,"stats":{"Line":4},"fn_name":null},{"line":83,"address":[5495296,5495706],"length":1,"stats":{"Line":3},"fn_name":"create_if_not_exists"},{"line":84,"address":[5495323],"length":1,"stats":{"Line":3},"fn_name":null},{"line":85,"address":[5495366],"length":1,"stats":{"Line":3},"fn_name":null},{"line":86,"address":[5495417,5495539],"length":1,"stats":{"Line":0},"fn_name":null},{"line":93,"address":[5495760],"length":1,"stats":{"Line":3},"fn_name":"initialize_diesel_schema"},{"line":94,"address":[5495853,5495772],"length":1,"stats":{"Line":3},"fn_name":null},{"line":96,"address":[5495843],"length":1,"stats":{"Line":0},"fn_name":null},{"line":97,"address":[5495833],"length":1,"stats":{"Line":3},"fn_name":null}],"covered":29,"coverable":41},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","db_adapter","models.rs"],"content":"use diesel::prelude::*;\nuse serde::{Deserialize, Serialize};\n\nuse crate::aml_core::date_time::AMLDateTime;\n\n// use crate::aml_core::date_time::DateTime;\n\n#[derive(Queryable, Selectable, Identifiable, Debug, Serialize, Deserialize, Clone)]\n#[diesel(table_name = crate::aml_core::db_adapter::schema::projects)]\n#[diesel(check_for_backend(diesel::sqlite::Sqlite))]\npub struct Project {\n    pub id: i32,\n    pub slug: String,\n    pub name: String,\n    pub description: Option\u003cString\u003e,\n    pub modified_at: AMLDateTime,\n    pub created_at: AMLDateTime,\n}\n\n#[derive(Insertable)]\n#[diesel(table_name = crate::aml_core::db_adapter::schema::projects)]\n#[diesel(check_for_backend(diesel::sqlite::Sqlite))]\npub struct NewProject {\n    pub slug: String,\n    pub name: String,\n    pub description: Option\u003cString\u003e,\n}\n\n#[derive(Queryable, Selectable)]\n#[diesel(table_name = crate::aml_core::db_adapter::schema::input_data)]\n#[diesel(check_for_backend(diesel::sqlite::Sqlite))]\npub struct InputData {\n    pub id: i32,\n    pub file_name: String,\n    pub ml_dataset_type: Option\u003cString\u003e,\n    pub file_type: Option\u003cString\u003e,\n    pub file_extension: Option\u003cString\u003e,\n    pub file_size: Option\u003ci32\u003e,\n    pub file_path: Option\u003cString\u003e,\n    pub uploaded_data: Option\u003cchrono::NaiveDateTime\u003e,\n    pub project_id: i32,\n}\n\n#[derive(Insertable)]\n#[diesel(table_name = crate::aml_core::db_adapter::schema::input_data)]\n#[diesel(check_for_backend(diesel::sqlite::Sqlite))]\npub struct NewInputData\u003c'a\u003e {\n    pub file_name: Option\u003c\u0026'a str\u003e,\n    pub ml_dataset_type: Option\u003c\u0026'a str\u003e,\n    pub file_type: Option\u003c\u0026'a str\u003e,\n    pub file_extension: Option\u003c\u0026'a str\u003e,\n    pub file_size: Option\u003ci32\u003e,\n    pub file_path: Option\u003c\u0026'a str\u003e,\n    pub uploaded_data: Option\u003c\u0026'a chrono::NaiveDateTime\u003e,\n    pub project_id: i32,\n}\n\n#[derive(Queryable, Selectable)]\n#[diesel(table_name = crate::aml_core::db_adapter::schema::audio_files)]\n#[diesel(check_for_backend(diesel::sqlite::Sqlite))]\npub struct AudioFile {\n    pub id: i32,\n    pub length: Option\u003ci32\u003e,\n    pub category: Option\u003cString\u003e,\n    pub peak_frequency: Option\u003ci32\u003e,\n    pub spi_level: Option\u003ci32\u003e,\n    pub input_data_id: i32,\n}\n\n#[derive(Insertable)]\n#[diesel(table_name = crate::aml_core::db_adapter::schema::audio_files)]\n#[diesel(check_for_backend(diesel::sqlite::Sqlite))]\npub struct NewAudioFile\u003c'a\u003e {\n    pub length: Option\u003ci32\u003e,\n    pub category: Option\u003c\u0026'a str\u003e,\n    pub peak_frequency: Option\u003ci32\u003e,\n    pub spi_level: Option\u003ci32\u003e,\n    pub input_data_id: i32,\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","db_adapter","schema.rs"],"content":"// @generated automatically by Diesel CLI.\n\ndiesel::table! {\n    audio_files (id) {\n        id -\u003e Integer,\n        length -\u003e Nullable\u003cInteger\u003e,\n        category -\u003e Nullable\u003cText\u003e,\n        peak_frequency -\u003e Nullable\u003cInteger\u003e,\n        spi_level -\u003e Nullable\u003cInteger\u003e,\n        input_data_id -\u003e Integer,\n    }\n}\n\ndiesel::table! {\n    input_data (id) {\n        id -\u003e Integer,\n        file_name -\u003e Text,\n        ml_dataset_type -\u003e Nullable\u003cText\u003e,\n        file_type -\u003e Nullable\u003cText\u003e,\n        file_extension -\u003e Nullable\u003cText\u003e,\n        file_size -\u003e Nullable\u003cInteger\u003e,\n        file_path -\u003e Nullable\u003cText\u003e,\n        uploaded_data -\u003e Nullable\u003cTimestamp\u003e,\n        project_id -\u003e Integer,\n    }\n}\n\ndiesel::table! {\n    projects (id) {\n        id -\u003e Integer,\n        slug -\u003e Text,\n        name -\u003e Text,\n        description -\u003e Nullable\u003cText\u003e,\n        modified_at -\u003e Timestamp,\n        created_at -\u003e Timestamp,\n    }\n}\n\ndiesel::joinable!(audio_files -\u003e input_data (input_data_id));\ndiesel::joinable!(input_data -\u003e projects (project_id));\n\ndiesel::allow_tables_to_appear_in_same_query!(audio_files, input_data, projects,);\n","traces":[{"line":3,"address":[6141712,6141648,6141673],"length":1,"stats":{"Line":20},"fn_name":"fmt"},{"line":5,"address":[6141632,6141552,6141577,6141616,6141621],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":6,"address":[6141520,6141536,6141481,6141456,6141525],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":7,"address":[6141429,6141424,6141360,6141385,6141440],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":8,"address":[6141333,6141264,6141289,6141344,6141328],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":9,"address":[6141232,6141168,6141248,6141193,6141237],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":10,"address":[6141152,6141141,6141097,6141072,6141136],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":14,"address":[7151696,7151657,7151632],"length":1,"stats":{"Line":21},"fn_name":"fmt"},{"line":16,"address":[6038864,6038902],"length":1,"stats":{"Line":2},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":17,"address":[7151520,7151504,7151509,7151440,7151465],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":18,"address":[7151408,7151344,7151413,7151424,7151369],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":19,"address":[6039632,6039670],"length":1,"stats":{"Line":2},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":20,"address":[6039926,6039888],"length":1,"stats":{"Line":2},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":21,"address":[6040182,6040144],"length":1,"stats":{"Line":2},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":22,"address":[7151024,7151040,7151029,7150985,7150960],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":23,"address":[7150889,7150944,7150928,7150864,7150933],"length":1,"stats":{"Line":2},"fn_name":"fmt"},{"line":24,"address":[6040950,6040912],"length":1,"stats":{"Line":4},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":28,"address":[6907488,6907584,6907429,6907440,6907508,6907472,6907444,6907456,6907664,6907392,6907609,6907648,6907413,6907408,6907424,6907504],"length":1,"stats":{"Line":33},"fn_name":"from_clause"},{"line":30,"address":[6177760,6178057,6177798,6178016,6178024,6178048],"length":1,"stats":{"Line":12},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":31,"address":[7154729,7154784,7154704,7154768,7154773],"length":1,"stats":{"Line":6},"fn_name":"fmt"},{"line":32,"address":[6178336,6178374],"length":1,"stats":{"Line":6},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":33,"address":[6178630,6178592],"length":1,"stats":{"Line":6},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":34,"address":[6178886,6178848],"length":1,"stats":{"Line":6},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":35,"address":[6179142,6179104],"length":1,"stats":{"Line":6},"fn_name":"walk_ast\u003cdiesel::sqlite::backend::Sqlite\u003e"},{"line":39,"address":[5467962],"length":1,"stats":{"Line":0},"fn_name":null},{"line":40,"address":[5468010],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":25,"coverable":26},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","element_repository.rs"],"content":"use serde::{Deserialize, Serialize};\nuse serde_json;\nuse std::collections::HashMap;\nuse std::fs::File;\nuse std::io::BufReader;\nuse std::path::PathBuf;\nuse thiserror::Error;\nuse ts_rs::TS;\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct ElementMetadata {\n    pub short_description: String,\n    pub long_description: String,\n    pub type_name: String,\n    pub terminals: HashMap\u003cString, TerminalMetadata\u003e,\n    pub parameters: Option\u003cHashMap\u003cString, ParameterMetadata\u003e\u003e,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum TerminalDirection {\n    #[serde(rename = \"input\")]\n    Input,\n    #[serde(rename = \"output\")]\n    Output,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct TerminalMetadata {\n    pub description: String,\n    pub direction: Option\u003cTerminalDirection\u003e,\n    pub default: Option\u003cString\u003e,\n    pub dc_range: Option\u003cString\u003e,\n    pub ac_range: Option\u003cString\u003e,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum ParameterType {\n    #[serde(rename = \"number\")]\n    Number,\n    #[serde(rename = \"string\")]\n    String,\n    #[serde(rename = \"boolean\")]\n    Boolean,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum RangeType {\n    #[serde(rename = \"discrete\")]\n    Discrete,\n    #[serde(rename = \"interval\")]\n    Interval,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum UIComponentType {\n    #[serde(rename = \"checkbox\")]\n    Checkbox,\n    #[serde(rename = \"dropdown\")]\n    Dropdown,\n    #[serde(rename = \"textbox\")]\n    Textbox,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct ParameterMetadata {\n    pub parameter_type: ParameterType,\n    pub description: String,\n    pub default: Option\u003cString\u003e,\n    pub range_type: Option\u003cRangeType\u003e,\n    pub range: Option\u003cVec\u003cOption\u003cString\u003e\u003e\u003e,\n    pub unit: Option\u003cString\u003e,\n    pub ui_component: UIComponentType,\n}\n\n#[derive(Error, Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum GetElementsError {\n    #[error(\"Problem with directory or file access\")]\n    FileError(String),\n    #[error(\"Element JSON is malformed\")]\n    MalformedJSON(String),\n}\n\npub type GetElementsResponseResult = Result\u003cHashMap\u003cString, ElementMetadata\u003e, GetElementsError\u003e;\n\npub fn list_elements_from_simulator(file_path: \u0026PathBuf) -\u003e GetElementsResponseResult {\n    let file = File::open(file_path).map_err(|e| GetElementsError::FileError(e.to_string()))?;\n    let reader = BufReader::new(file);\n    let res: HashMap\u003cString, ElementMetadata\u003e = serde_json::from_reader(reader)\n        .map_err(|e| GetElementsError::MalformedJSON(e.to_string()))?;\n    Ok(res)\n}\n\n// tests\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_metadata_load_from_json() {\n        // arrange\n        let mut file_path = std::path::PathBuf::new();\n        file_path.push(\"resources\");\n        file_path.push(\"elements.json\");\n\n        // act\n        let el_json_res = list_elements_from_simulator(\u0026file_path);\n\n        // assert\n        assert!(el_json_res.is_ok());\n        // println!(\"{}\", serde_json::to_string_pretty(\u0026el_json_res.unwrap()).unwrap());\n    }\n}\n","traces":[{"line":101,"address":[7347696,7348259,7348290],"length":1,"stats":{"Line":1},"fn_name":"list_elements_from_simulator"},{"line":102,"address":[6186386,6186368],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":103,"address":[9577226],"length":1,"stats":{"Line":1},"fn_name":null},{"line":104,"address":[7059540,7059796],"length":1,"stats":{"Line":1},"fn_name":null},{"line":105,"address":[5350933],"length":1,"stats":{"Line":0},"fn_name":null},{"line":106,"address":[7059715],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":5,"coverable":6},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","file_data_manager","get_files.rs"],"content":"use super::*;\nuse crate::aml_core::db_adapter::schema::{input_data, projects};\nuse crate::aml_core::db_adapter::{models::InputData, DbConn};\nuse crate::aml_core::file_data_manager::FileUploadError;\nuse crate::aml_core::project_manager;\nuse diesel::{ExpressionMethods, QueryDsl, RunQueryDsl};\nuse std::str::FromStr;\n\npub fn get_input_files(req: \u0026GetFilesRequest, db_conn: \u0026mut DbConn) -\u003e GetFilesResponseResult {\n    if req.proj_slug.is_empty() {\n        log::error!(\"Project slug is empty\");\n        return Err(AppError::FileUploadError(\n            FileUploadError::InvalidArgument(\"Project slug is empty\".to_string()).into(),\n        ));\n    }\n\n    match project_manager::get_projects::project_exists_by_slug(\u0026req.proj_slug, db_conn) {\n        Ok(project_exists) =\u003e {\n            if !project_exists {\n                log::error!(\"Project not found\");\n                return Err(AppError::FileUploadError(\n                    FileUploadError::InvalidArgument(req.proj_slug.clone() + \" does not exist\")\n                        .into(),\n                ));\n            }\n        }\n        Err(e) =\u003e {\n            log::error!(\"Error checking if project exists: {}\", e);\n            return Err(AppError::ProjectManagerError(e)).into();\n        }\n    }\n\n    let uploaded_files = match \u0026req.dataset_type {\n        Some(dataset_type) =\u003e {\n            let dataset_filter = dataset_type.to_string();\n            input_data::table\n                .inner_join(projects::table)\n                .select((\n                    input_data::id,\n                    input_data::file_name,\n                    input_data::ml_dataset_type,\n                    input_data::file_type,\n                    input_data::file_extension,\n                    input_data::file_size,\n                    input_data::file_path,\n                    input_data::uploaded_data,\n                    input_data::project_id,\n                ))\n                .filter(projects::slug.eq(\u0026req.proj_slug))\n                .filter(input_data::ml_dataset_type.eq(dataset_filter))\n                .load::\u003cInputData\u003e(db_conn)\n        }\n        None =\u003e {\n            log::info!(\"No dataset type specified, returning all files\");\n            input_data::table\n                .inner_join(projects::table)\n                .select((\n                    input_data::id,\n                    input_data::file_name,\n                    input_data::ml_dataset_type,\n                    input_data::file_type,\n                    input_data::file_extension,\n                    input_data::file_size,\n                    input_data::file_path,\n                    input_data::uploaded_data,\n                    input_data::project_id,\n                ))\n                .filter(projects::slug.eq(\u0026req.proj_slug))\n                .load::\u003cInputData\u003e(db_conn)\n        }\n    }\n    .map_err(|e| {\n        log::error!(\"Error getting file metadata from database: {}\", e);\n        AppError::InternalError(e.to_string())\n    })?;\n\n    // TODO: Optimize this\n    let mut files = Vec::with_capacity(uploaded_files.len());\n    for file in uploaded_files {\n        files.push(FileMetadata {\n            file_id: file.id.to_string(),\n            file_name: file.file_name,\n            dataset_type: DataSet::from_str(\u0026file.ml_dataset_type.unwrap()).unwrap(),\n        })\n    }\n\n    Ok(GetFilesResponse { files })\n}\n\n#[cfg(test)]\nmod tests {\n    use super::get_input_files;\n    use crate::aml_core::{db_adapter::SqlitePool, file_data_manager::GetFilesRequest};\n    use diesel::r2d2::ConnectionManager;\n\n    #[test]\n    fn test_get_input_files_fails_for_empty_project_slug() {\n        let req = GetFilesRequest {\n            proj_slug: \"\".to_string(),\n            dataset_type: None,\n        };\n\n        let mut db_conn = SqlitePool::new(ConnectionManager::new(\"\"))\n            .unwrap()\n            .get()\n            .unwrap();\n        assert!(get_input_files(\u0026req, \u0026mut db_conn).is_err());\n    }\n}\n","traces":[{"line":9,"address":[9638624,9639895,9639861],"length":1,"stats":{"Line":2},"fn_name":"get_input_files"},{"line":10,"address":[9638678],"length":1,"stats":{"Line":2},"fn_name":null},{"line":11,"address":[9639130,9638794,9638869],"length":1,"stats":{"Line":4},"fn_name":null},{"line":12,"address":[5105992],"length":1,"stats":{"Line":2},"fn_name":null},{"line":13,"address":[5105881],"length":1,"stats":{"Line":2},"fn_name":null},{"line":17,"address":[5105692],"length":1,"stats":{"Line":1},"fn_name":null},{"line":18,"address":[5106196],"length":1,"stats":{"Line":1},"fn_name":null},{"line":19,"address":[5106215],"length":1,"stats":{"Line":1},"fn_name":null},{"line":20,"address":[5107264,5106974,5106899],"length":1,"stats":{"Line":2},"fn_name":null},{"line":21,"address":[5107165],"length":1,"stats":{"Line":1},"fn_name":null},{"line":22,"address":[5107032],"length":1,"stats":{"Line":1},"fn_name":null},{"line":27,"address":[5106230],"length":1,"stats":{"Line":0},"fn_name":null},{"line":28,"address":[5106357,5106644,5106270,5106415],"length":1,"stats":{"Line":0},"fn_name":null},{"line":29,"address":[5106486],"length":1,"stats":{"Line":0},"fn_name":null},{"line":33,"address":[5107676,5106857,5107986,5108109],"length":1,"stats":{"Line":3},"fn_name":null},{"line":34,"address":[5107407],"length":1,"stats":{"Line":1},"fn_name":null},{"line":35,"address":[5107415],"length":1,"stats":{"Line":1},"fn_name":null},{"line":36,"address":[5107436,5107609,5107513,5107484],"length":1,"stats":{"Line":4},"fn_name":null},{"line":49,"address":[5107496],"length":1,"stats":{"Line":1},"fn_name":null},{"line":50,"address":[5107525],"length":1,"stats":{"Line":1},"fn_name":null},{"line":54,"address":[5107894,5107753,5107791,5107356],"length":1,"stats":{"Line":0},"fn_name":null},{"line":55,"address":[5107840,5107863],"length":1,"stats":{"Line":0},"fn_name":null},{"line":68,"address":[5107855],"length":1,"stats":{"Line":0},"fn_name":null},{"line":72,"address":[4886758,4886304],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"},{"line":73,"address":[5813799,5813854,5813933,5813718],"length":1,"stats":{"Line":0},"fn_name":null},{"line":74,"address":[5814092,5813906],"length":1,"stats":{"Line":0},"fn_name":null},{"line":78,"address":[5108066,5108196],"length":1,"stats":{"Line":2},"fn_name":null},{"line":79,"address":[5109329,5108306,5108203],"length":1,"stats":{"Line":3},"fn_name":null},{"line":80,"address":[5108882],"length":1,"stats":{"Line":1},"fn_name":null},{"line":81,"address":[5108522],"length":1,"stats":{"Line":1},"fn_name":null},{"line":82,"address":[5108590],"length":1,"stats":{"Line":1},"fn_name":null},{"line":83,"address":[5108842,5108630,5108749],"length":1,"stats":{"Line":3},"fn_name":null},{"line":87,"address":[5109339],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":24,"coverable":33},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","file_data_manager","mod.rs"],"content":"use anyhow::{Context, Result};\nuse serde::{Deserialize, Serialize};\nuse std::fmt;\nuse std::fs;\nuse std::path::PathBuf;\nuse strum_macros::EnumString;\nuse thiserror::Error;\nuse ts_rs::TS;\n\nuse super::AppError;\n\npub mod get_files;\npub mod put_files;\n\n#[derive(Debug, Clone, Serialize, Deserialize, TS, EnumString)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum DataSet {\n    Testing,\n    Validation,\n    Training,\n}\n\nimpl fmt::Display for DataSet {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        match self {\n            DataSet::Testing =\u003e write!(f, \"Testing\"),\n            DataSet::Validation =\u003e write!(f, \"Validation\"),\n            DataSet::Training =\u003e write!(f, \"Training\"),\n        }\n    }\n}\n\n#[derive(Error, Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\n// TODO: @sidb101, I think we should rename this so that it can be used by other methods in file data manager.\n// I also think errors that are specific to the DB should be defined in DB adapater and used throughout the app. Let me know what you think.\npub enum FileUploadError {\n    #[error(\"invalid argument\")]\n    InvalidArgument(String),\n    #[error(\"file not found\")]\n    FileNotFound,\n    #[error(\"processing error\")]\n    ProcessingError,\n    #[error(\"file too large\")]\n    FileTooLarge,\n    #[error(\"unsupported file extension\")]\n    UnsupportedFileExtension,\n    #[error(\"project not found\")]\n    ProjectNotFound(String),\n    #[error(\"database query error\")]\n    UnableToQueryDatabase(String),\n    #[error(\"database update error\")]\n    UnableToStoreInDatabase(String),\n    #[error(\"Unable to delete file from Filesystem\")]\n    UnableToDeleteFile(String),\n    #[error(\"Unauthorized Access\")]\n    UnauthorizedAccess(String),\n    // Add more error variants as needed.\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct FileUploadRequest {\n    pub file_name: String, // relativePath to file from baseDir (e.g. \\project1\\training\\glass-break.wav)\n    pub dataset_type: DataSet,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct FilesUploadRequest {\n    pub proj_slug: String,\n    pub input_files: Vec\u003cFileUploadRequest\u003e,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct FileUploadErrorResponse {\n    pub file_name: String,\n    pub error_response: FileUploadError,\n}\n\n//this struct will also be used got QueryAudioFiles\n#[derive(Clone, Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct FileMetadata {\n    pub file_id: String,   // generated by db\n    pub file_name: String, // relativePath to file from baseDir (e.g. \\project1\\training\\glass-break.wav)\n    pub dataset_type: DataSet,\n}\n\n#[derive(Clone, Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct GetFilesRequest {\n    pub proj_slug: String,\n    pub dataset_type: Option\u003cDataSet\u003e,\n}\n\n#[derive(Clone, Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct GetFilesResponse {\n    pub files: Vec\u003cFileMetadata\u003e,\n}\n\npub type GetFilesResponseResult = Result\u003cGetFilesResponse, AppError\u003e;\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct FilesUploadResponse {\n    pub upload_success_files: Vec\u003cFileMetadata\u003e, //array of relative file paths of input files that were successfully stored in server side folder\n    pub upload_failed_files: Vec\u003cFileUploadErrorResponse\u003e,\n    pub attempted: i32,\n    pub succeeded: i32,\n    pub failed: i32,\n}\n\npub type SaveFilesResponseResult = Result\u003cFilesUploadResponse, AppError\u003e;\n\npub fn create_app_dir_if_not_exists(path_resolver: \u0026tauri::PathResolver) -\u003e Result\u003cPathBuf\u003e {\n    // let proj_dirs = ProjectDirs::from(\"com\", \"aspinity\", \"aml_connect\")\n    //     .with_context(|| \"Failed to get application directory\\n\")?;\n    // let app_dir = proj_dirs.data_local_dir();\n\n    let app_dir = path_resolver\n        .app_local_data_dir()\n        .with_context(|| \"Failed to get application directory\\n\")?;\n\n    if !app_dir.exists() {\n        fs::create_dir_all(app_dir.clone())\n            .with_context(|| \"Failed to create application directory\\n\")?;\n    }\n    Ok(app_dir)\n}\n\npub fn create_project_dir(project_slug: \u0026str, app_dir: \u0026PathBuf) -\u003e Result\u003c()\u003e {\n    let project_dir = app_dir.join(project_slug).join(\"audio\");\n    // `project_slug/tmp` is used to store all temporary files - png, json, etc.\n    let tmp_dir = app_dir.join(project_slug).join(\"tmp\");\n    fs::create_dir_all(project_dir)?;\n    fs::create_dir_all(tmp_dir)?;\n    Ok(())\n}\n\npub fn delete_project_dir(project_slug: \u0026str, app_dir: \u0026PathBuf) -\u003e Result\u003c()\u003e {\n    let project_dir = app_dir.join(project_slug);\n    fs::remove_dir_all(project_dir)?;\n    Ok(())\n}\n\npub fn update_project_dir(old_project_slug: \u0026str, new_project_slug: \u0026str, app_dir: \u0026PathBuf) -\u003e Result\u003c()\u003e {\n    let old = app_dir.join(old_project_slug);\n    let new: PathBuf = app_dir.join(new_project_slug);\n    fs::rename(old, new)?;\n    Ok(())\n}\n\n#[cfg(test)]\nmod tests {}\n","traces":[{"line":25,"address":[5048544],"length":1,"stats":{"Line":1},"fn_name":"fmt"},{"line":26,"address":[5048571],"length":1,"stats":{"Line":1},"fn_name":null},{"line":27,"address":[5048603],"length":1,"stats":{"Line":0},"fn_name":null},{"line":28,"address":[5048648],"length":1,"stats":{"Line":1},"fn_name":null},{"line":29,"address":[5615829],"length":1,"stats":{"Line":1},"fn_name":null},{"line":127,"address":[5049316,5048768],"length":1,"stats":{"Line":0},"fn_name":"create_app_dir_if_not_exists"},{"line":132,"address":[5616102,5615929],"length":1,"stats":{"Line":0},"fn_name":null},{"line":134,"address":[5048951],"length":1,"stats":{"Line":0},"fn_name":null},{"line":136,"address":[5616179,5616067],"length":1,"stats":{"Line":0},"fn_name":null},{"line":137,"address":[5616437,5616297],"length":1,"stats":{"Line":0},"fn_name":null},{"line":138,"address":[5049270],"length":1,"stats":{"Line":0},"fn_name":null},{"line":140,"address":[5049066],"length":1,"stats":{"Line":0},"fn_name":null},{"line":143,"address":[5049603,5049344],"length":1,"stats":{"Line":1},"fn_name":"create_project_dir"},{"line":144,"address":[5049403],"length":1,"stats":{"Line":1},"fn_name":null},{"line":146,"address":[5049672],"length":1,"stats":{"Line":1},"fn_name":null},{"line":147,"address":[5050090,5049907],"length":1,"stats":{"Line":1},"fn_name":null},{"line":148,"address":[5617202,5617433,5617342],"length":1,"stats":{"Line":2},"fn_name":null},{"line":149,"address":[5617400],"length":1,"stats":{"Line":1},"fn_name":null},{"line":152,"address":[5617600],"length":1,"stats":{"Line":1},"fn_name":"delete_project_dir"},{"line":153,"address":[5617645],"length":1,"stats":{"Line":1},"fn_name":null},{"line":154,"address":[5617766,5617674],"length":1,"stats":{"Line":1},"fn_name":null},{"line":155,"address":[5617755],"length":1,"stats":{"Line":1},"fn_name":null},{"line":158,"address":[5618327,5617824,5618296],"length":1,"stats":{"Line":1},"fn_name":"update_project_dir"},{"line":159,"address":[5617909],"length":1,"stats":{"Line":1},"fn_name":null},{"line":160,"address":[5617962,5618040],"length":1,"stats":{"Line":2},"fn_name":null},{"line":161,"address":[5618239,5618059],"length":1,"stats":{"Line":1},"fn_name":null},{"line":162,"address":[5618220],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":19,"coverable":27},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","file_data_manager","put_files.rs"],"content":"use anyhow::{ensure, Result};\nuse diesel::r2d2::{ConnectionManager, PooledConnection};\nuse diesel::{ExpressionMethods, QueryDsl, RunQueryDsl, SqliteConnection};\nuse std::fs::{self};\nuse std::path::PathBuf;\n\nuse crate::aml_core::{file_data_manager::*, project_manager};\n\nuse crate::aml_core::db_adapter::models::{InputData, NewInputData};\nuse crate::aml_core::db_adapter::schema::input_data;\n\n/// For a given filename, this function derives the absolute path of the file\n/// the app_dir is setup at the app startup, and can be fetched from tauri state\nfn get_file_absolute_path(\n    project_dir: \u0026str,\n    file_name: String,\n    app_dir: \u0026PathBuf,\n) -\u003e Result\u003cPathBuf\u003e {\n    Ok(app_dir.join(project_dir).join(\"audio\").join(file_name))\n}\n\n/// Validates the input file exists for a given project, as specified by FileUploadRequest filename\nfn validate_exists(\n    project_slug: \u0026str,\n    f: \u0026FileUploadRequest,\n    app_dir: \u0026PathBuf,\n) -\u003e Result\u003cPathBuf\u003e {\n    let file_path = get_file_absolute_path(project_slug, f.file_name.clone(), app_dir)?;\n    ensure!(file_path.exists(), \"File does not exist\");\n    Ok(file_path)\n}\n\n\n/// validates the extension of a file at `file_path` matches `extension`\nfn validate_extension(file_path: \u0026PathBuf, extension: String) -\u003e Result\u003c()\u003e {\n    ensure!(\n        file_path\n            .extension()\n            .unwrap()\n            .to_os_string()\n            .to_str()\n            .unwrap()\n            == extension,\n        \"Invalid file extension\"\n    );\n    Ok(())\n}\n\n/// validate file size is less than 20 MB\nfn validate_size(file_path: \u0026PathBuf) -\u003e Result\u003c()\u003e {\n    ensure!(\n        file_path.metadata().unwrap().len() \u003c 20 * 1024 * 1024,\n        \"File size is too large\"\n    );\n    Ok(())\n}\n\n/// Performs levels of validation for a given FileUploadRequest, returns the \\\n/// validation status in a basic FilesUploadResponse\npub fn validate_files(\n    project_slug: \u0026str,\n    files: \u0026Vec\u003cFileUploadRequest\u003e,\n    app_dir: \u0026PathBuf,\n) -\u003e FilesUploadResponse {\n    let mut response: FilesUploadResponse = FilesUploadResponse {\n        upload_success_files: Vec::new(),\n        upload_failed_files: Vec::new(),\n        attempted: files.len() as i32,\n        succeeded: 0,\n        failed: 0,\n    };\n\n    for file in files {\n        let file_path = validate_exists(project_slug, file, app_dir);\n\n        match file_path {\n            Err(_) =\u003e {\n                response.upload_failed_files.push(FileUploadErrorResponse {\n                    file_name: file.file_name.clone(),\n                    error_response: FileUploadError::FileNotFound,\n                });\n            }\n            Ok(file_path) =\u003e {\n                if validate_extension(\u0026file_path, \"wav\".to_string()).is_err() {\n                    response.upload_failed_files.push(FileUploadErrorResponse {\n                        file_name: file.file_name.clone(),\n                        error_response: FileUploadError::UnsupportedFileExtension,\n                    });\n                } else if validate_size(\u0026file_path).is_err() {\n                    response.upload_failed_files.push(FileUploadErrorResponse {\n                        file_name: file.file_name.clone(),\n                        error_response: FileUploadError::FileTooLarge,\n                    });\n                } else {\n                    response.upload_success_files.push(FileMetadata {\n                        file_id: String::from(\"\"), // will be derived later\n                        file_name: file.file_name.clone(),\n                        dataset_type: file.dataset_type.clone(),\n                    });\n                }\n            }\n        }\n    }\n\n    response\n}\n\n/// Validates the input files stored in the appdata dir and saves their metadata to the database\n///\n/// # Arguments\n/// * `FilesUploadRequest`: JSON struct holding\n///     proj_slug: project_slug  \n///     input_files: vector of FileUploadRequest\n///\n/// # Returns\n/// * `SaveFilesResponseResult`: A result typedef, holding Ok(FilesUploadResponse) and Err(Error) variants\npub fn save_input_files(\n    input: \u0026FilesUploadRequest,\n    app_dir: \u0026PathBuf,\n    conn: \u0026mut PooledConnection\u003cConnectionManager\u003cSqliteConnection\u003e\u003e,\n) -\u003e SaveFilesResponseResult {\n    // validation of the list of input file paths (file will be deleted if invalid)\n    let mut ans: FilesUploadResponse =\n        validate_files(\u0026input.proj_slug, \u0026input.input_files, app_dir);\n    let succesfull_uploads = ans.upload_success_files.clone();\n    ans.upload_success_files.clear();\n\n    // Check input.project_slug must exist in db\n    let found_project =\n        match project_manager::get_projects::get_project_by_slug(\u0026input.proj_slug, conn) {\n            Ok(project) =\u003e project,\n            Err(e) =\u003e {\n                return Err(AppError::ProjectManagerError(e));\n            }\n        };\n\n    for file in succesfull_uploads {\n        let dataset_type = file.dataset_type.to_string();\n        let fpath =\n            get_file_absolute_path(\u0026input.proj_slug, file.file_name.clone(), app_dir).unwrap();\n        let fpath_str = fpath.to_str().unwrap();\n        let fsize = fpath.metadata().unwrap().len();\n        let new_input_files = NewInputData {\n            project_id: found_project.id,\n            ml_dataset_type: Some(dataset_type.as_ref()),\n            file_name: Some(file.file_name.as_ref()),\n            file_type: Some(\"audio\"),\n            file_extension: Some(\".wav\"),\n            file_size: Some(fsize as i32),\n            file_path: Some(fpath_str),\n            uploaded_data: None,\n        };\n\n        let db_upload_res = diesel::insert_into(input_data::table)\n            .values(\u0026new_input_files)\n            .on_conflict(input_data::file_name)\n            .do_nothing()\n            .execute(conn);\n\n        if db_upload_res.is_err() {\n            ans.upload_failed_files.push(FileUploadErrorResponse {\n                file_name: file.file_name.clone(),\n                error_response: FileUploadError::UnableToStoreInDatabase(\n                    db_upload_res.unwrap_err().to_string(),\n                ),\n            });\n        } else {\n            ans.upload_success_files.push(file);\n        }\n    }\n\n    // delete all files that failed to upload\n    for file in ans.upload_failed_files.iter() {\n        let file_path =\n            get_file_absolute_path(\u0026input.proj_slug, file.file_name.clone(), app_dir).unwrap();\n        println!(\n            \"Deleting file: {:?} for reason {}\",\n            file_path, file.error_response\n        );\n        if file_path.exists() {\n            fs::remove_file(file_path).map_err(|_e| {\n                AppError::FileUploadError(FileUploadError::UnableToDeleteFile(\n                    file.file_name.clone(),\n                ))\n            })?;\n        }\n        ans.failed += 1;\n    }\n\n    for file in ans.upload_success_files.iter_mut() {\n        let found_file = input_data::table\n            .filter(input_data::file_name.eq(\u0026file.file_name))\n            .first::\u003cInputData\u003e(conn)\n            .map_err(|e| AppError::InternalError(e.to_string()))?;\n        ans.succeeded += 1;\n        file.file_id = found_file.id.to_string();\n    }\n\n    Ok(ans)\n}\n\n// unit tests\n#[cfg(test)]\nmod tests {\n    use std::fs::File;\n    use std::path::PathBuf;\n\n    use crate::aml_core::file_data_manager::*;\n\n    #[test]\n    fn test_get_file_absolute_path() {\n        // arrange\n        let project_dir = \"test_project\";\n        let file_name = \"test_file.wav\".to_string();\n        let app_dir = PathBuf::from(\"~/.local/share/aml_connect/\");\n        let expected_file_path =\n            PathBuf::from(\"~/.local/share/aml_connect/test_project/audio/test_file.wav\");\n\n        // act\n        let file_path =\n            put_files::get_file_absolute_path(project_dir, file_name, \u0026app_dir).unwrap();\n\n        // assert\n        assert_eq!(file_path, expected_file_path);\n    }\n\n    #[ignore]\n    #[test]\n    fn test_validate_exists() {\n        // arrange\n        let project_slug = \"test_project\";\n        let file_name = \"test_file.wav\".to_string();\n\n        // Get the user's home directory\n        let home_dir = dirs::home_dir().unwrap();\n\n        // Define the subpath\n        let subpath = \".local/share/aml_connect/\";\n\n        // Create a PathBuf by concatenating the home directory with the subpath\n        let app_dir = home_dir.join(subpath);\n\n        let file_path =\n            put_files::get_file_absolute_path(project_slug, file_name.clone(), \u0026app_dir).unwrap();\n        println!(\"file_path: {:?}\", file_path);\n        let _ = File::create(\u0026file_path).expect(\"Error encountered while creating file!\");\n\n        let fur = FileUploadRequest {\n            file_name: file_name.clone(),\n            dataset_type: DataSet::Training,\n        };\n\n        // act\n        let result = put_files::validate_exists(project_slug, \u0026fur, \u0026app_dir);\n        let _ = std::fs::remove_file(file_path);\n\n        // assert\n        assert!(result.is_ok());\n    }\n\n    #[ignore]\n    #[test]\n    fn test_validate_exists_2() {\n        // arrange\n        let project_slug = \"test_project\";\n        let file_name = \"test_file.wav\".to_string();\n\n        // Get the user's home directory\n        let home_dir = dirs::home_dir().unwrap();\n\n        // Define the subpath\n        let subpath = \".local/share/aml_connect/\";\n\n        // Create a PathBuf by concatenating the home directory with the subpath\n        let app_dir = home_dir.join(subpath);\n\n        let file_path =\n            put_files::get_file_absolute_path(project_slug, file_name.clone(), \u0026app_dir).unwrap();\n        println!(\"file_path: {:?}\", file_path);\n        let _ = File::create(\u0026file_path).expect(\"Error encountered while creating file!\");\n\n        let fur = FileUploadRequest {\n            file_name: \"test_file2.wav\".to_string(), // different filename\n            dataset_type: DataSet::Training,\n        };\n\n        // act\n        let result = put_files::validate_exists(project_slug, \u0026fur, \u0026app_dir);\n        let _ = std::fs::remove_file(file_path);\n\n        // assert\n        assert!(result.is_err());\n    }\n\n    #[test]\n    fn test_validate_extension() {\n        // arrange\n        let file_path = PathBuf::from(\"~/.local/share/aml_connect/test_project/test_file.wav\");\n\n        // act\n        let result = put_files::validate_extension(\u0026file_path, String::from(\"wav\"));\n\n        // assert\n        assert!(result.is_ok());\n    }\n\n    #[test]\n    fn test_validate_extension2() {\n        // arrange\n        let file_path = PathBuf::from(\"~/.local/share/aml_connect/test_project/test_file.mp3\");\n\n        // act\n        let result = put_files::validate_extension(\u0026file_path, String::from(\"wav\"));\n\n        // assert\n        assert!(result.is_err());\n    }\n}\n","traces":[{"line":14,"address":[5773632,5774142,5774099],"length":1,"stats":{"Line":2},"fn_name":"get_file_absolute_path"},{"line":19,"address":[5773795,5773701,5773890,5774003],"length":1,"stats":{"Line":8},"fn_name":null},{"line":23,"address":[5774176,5774710],"length":1,"stats":{"Line":1},"fn_name":"validate_exists"},{"line":28,"address":[5774426,5774253],"length":1,"stats":{"Line":1},"fn_name":null},{"line":29,"address":[5774515,5774620,5774404],"length":1,"stats":{"Line":3},"fn_name":null},{"line":30,"address":[5774541],"length":1,"stats":{"Line":1},"fn_name":null},{"line":35,"address":[5775121,5774736,5775240],"length":1,"stats":{"Line":2},"fn_name":"validate_extension"},{"line":36,"address":[5775136,5775164,5775096,5774933],"length":1,"stats":{"Line":5},"fn_name":null},{"line":37,"address":[5774756,5774987,5774824],"length":1,"stats":{"Line":6},"fn_name":null},{"line":46,"address":[5775147],"length":1,"stats":{"Line":2},"fn_name":null},{"line":50,"address":[5775280],"length":1,"stats":{"Line":1},"fn_name":"validate_size"},{"line":51,"address":[5775504,5775455],"length":1,"stats":{"Line":1},"fn_name":null},{"line":52,"address":[5775295,5775463],"length":1,"stats":{"Line":1},"fn_name":null},{"line":55,"address":[5775493],"length":1,"stats":{"Line":1},"fn_name":null},{"line":60,"address":[5775568,5775870],"length":1,"stats":{"Line":1},"fn_name":"validate_files"},{"line":66,"address":[5775657],"length":1,"stats":{"Line":1},"fn_name":null},{"line":67,"address":[5775670],"length":1,"stats":{"Line":1},"fn_name":null},{"line":68,"address":[5775722],"length":1,"stats":{"Line":1},"fn_name":null},{"line":73,"address":[5775853,5776058,5775943],"length":1,"stats":{"Line":3},"fn_name":null},{"line":74,"address":[5776087],"length":1,"stats":{"Line":1},"fn_name":null},{"line":76,"address":[5776094],"length":1,"stats":{"Line":1},"fn_name":null},{"line":78,"address":[5776303,5776198],"length":1,"stats":{"Line":2},"fn_name":null},{"line":79,"address":[5776207],"length":1,"stats":{"Line":1},"fn_name":null},{"line":80,"address":[5776291],"length":1,"stats":{"Line":1},"fn_name":null},{"line":83,"address":[5776123],"length":1,"stats":{"Line":1},"fn_name":null},{"line":84,"address":[5776155,5776482],"length":1,"stats":{"Line":2},"fn_name":null},{"line":85,"address":[5776669,5776624],"length":1,"stats":{"Line":0},"fn_name":null},{"line":86,"address":[5776633],"length":1,"stats":{"Line":0},"fn_name":null},{"line":87,"address":[5776657],"length":1,"stats":{"Line":0},"fn_name":null},{"line":89,"address":[5776596,5776777],"length":1,"stats":{"Line":2},"fn_name":null},{"line":90,"address":[5776911,5776956],"length":1,"stats":{"Line":0},"fn_name":null},{"line":91,"address":[5776920],"length":1,"stats":{"Line":0},"fn_name":null},{"line":92,"address":[5776944],"length":1,"stats":{"Line":0},"fn_name":null},{"line":95,"address":[5777181],"length":1,"stats":{"Line":1},"fn_name":null},{"line":96,"address":[5776869],"length":1,"stats":{"Line":1},"fn_name":null},{"line":97,"address":[5777045],"length":1,"stats":{"Line":1},"fn_name":null},{"line":98,"address":[5777113],"length":1,"stats":{"Line":1},"fn_name":null},{"line":117,"address":[5777312,5782623,5780092],"length":1,"stats":{"Line":1},"fn_name":"save_input_files"},{"line":123,"address":[5777434],"length":1,"stats":{"Line":1},"fn_name":null},{"line":125,"address":[5777555,5777507],"length":1,"stats":{"Line":2},"fn_name":null},{"line":126,"address":[5777571],"length":1,"stats":{"Line":1},"fn_name":null},{"line":129,"address":[5777624],"length":1,"stats":{"Line":1},"fn_name":null},{"line":131,"address":[5777719],"length":1,"stats":{"Line":1},"fn_name":null},{"line":132,"address":[5778017],"length":1,"stats":{"Line":0},"fn_name":null},{"line":133,"address":[5778081],"length":1,"stats":{"Line":0},"fn_name":null},{"line":137,"address":[5777943,5778254,5780472],"length":1,"stats":{"Line":3},"fn_name":null},{"line":138,"address":[5778512],"length":1,"stats":{"Line":1},"fn_name":null},{"line":139,"address":[5778568,5778664],"length":1,"stats":{"Line":2},"fn_name":null},{"line":141,"address":[5778859,5778776],"length":1,"stats":{"Line":2},"fn_name":null},{"line":142,"address":[5778994],"length":1,"stats":{"Line":1},"fn_name":null},{"line":144,"address":[5779121],"length":1,"stats":{"Line":1},"fn_name":null},{"line":145,"address":[5779143],"length":1,"stats":{"Line":1},"fn_name":null},{"line":146,"address":[5779198],"length":1,"stats":{"Line":1},"fn_name":null},{"line":147,"address":[5779292],"length":1,"stats":{"Line":1},"fn_name":null},{"line":148,"address":[5779319],"length":1,"stats":{"Line":1},"fn_name":null},{"line":149,"address":[5779346],"length":1,"stats":{"Line":1},"fn_name":null},{"line":150,"address":[5779364],"length":1,"stats":{"Line":1},"fn_name":null},{"line":154,"address":[5779603],"length":1,"stats":{"Line":1},"fn_name":null},{"line":158,"address":[5779710],"length":1,"stats":{"Line":1},"fn_name":null},{"line":160,"address":[5779788,5779726],"length":1,"stats":{"Line":2},"fn_name":null},{"line":161,"address":[5780199,5779892],"length":1,"stats":{"Line":0},"fn_name":null},{"line":162,"address":[5779908],"length":1,"stats":{"Line":0},"fn_name":null},{"line":163,"address":[5780155],"length":1,"stats":{"Line":0},"fn_name":null},{"line":164,"address":[5780065,5779935],"length":1,"stats":{"Line":0},"fn_name":null},{"line":168,"address":[5779794,5780353],"length":1,"stats":{"Line":2},"fn_name":null},{"line":173,"address":[5781620,5780492,5780743],"length":1,"stats":{"Line":3},"fn_name":null},{"line":174,"address":[5780767],"length":1,"stats":{"Line":1},"fn_name":null},{"line":176,"address":[5780938,5781048],"length":1,"stats":{"Line":2},"fn_name":null},{"line":180,"address":[5781197],"length":1,"stats":{"Line":1},"fn_name":null},{"line":181,"address":[6046638,6046448],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"},{"line":182,"address":[6046535],"length":1,"stats":{"Line":0},"fn_name":null},{"line":183,"address":[6046471],"length":1,"stats":{"Line":0},"fn_name":null},{"line":187,"address":[5781539,5781558,5781245],"length":1,"stats":{"Line":2},"fn_name":null},{"line":190,"address":[5780709,5781660,5781941],"length":1,"stats":{"Line":3},"fn_name":null},{"line":191,"address":[5781983,5782231],"length":1,"stats":{"Line":1},"fn_name":null},{"line":192,"address":[5781962],"length":1,"stats":{"Line":1},"fn_name":null},{"line":194,"address":[6046690,6046672],"length":1,"stats":{"Line":0},"fn_name":"{closure#1}"},{"line":195,"address":[5782324,5782146,5782358],"length":1,"stats":{"Line":2},"fn_name":null},{"line":196,"address":[5782331,5782436],"length":1,"stats":{"Line":2},"fn_name":null},{"line":199,"address":[5781804],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":64,"coverable":80},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","mod.rs"],"content":"use serde::{Deserialize, Serialize};\nuse thiserror::Error;\nuse ts_rs::TS;\n\npub mod date_time;\npub mod db_adapter;\npub mod element_repository;\npub mod file_data_manager;\npub mod network_manager;\npub mod project_manager;\n\n#[derive(Error, Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum AppError {\n    #[error(\"internal error\")]\n    InternalError(String),\n    #[error(\"project manager error\")]\n    ProjectManagerError(project_manager::ProjectManagerError),\n    #[error(\"file upload error\")]\n    FileUploadError(file_data_manager::FileUploadError),\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","network_manager.rs"],"content":"use std::path::PathBuf;\nuse std::{collections::HashMap, path::Path};\n\nuse anyhow::Result;\nuse mockall::{automock, predicate::*};\nuse serde::{Deserialize, Serialize};\nuse tauri::api::process::Command;\nuse ts_rs::TS;\n\nuse std::fs;\nuse std::io::Write;\nuse thiserror::Error;\n\nuse crate::aml_core::db_adapter::DbConn;\nuse crate::aml_core::project_manager::get_projects;\n\npub struct AmlSimulatorSidecar {\n    pub sidecar_name: String,\n}\n\n#[derive(Error, Debug, Serialize, Deserialize, TS, PartialEq, Clone)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum SimulatorError {\n    #[error(\"Failed to Build sidecar command\")]\n    CommandBuildError(String),\n    #[error(\"Failed to execute sidecar command\")]\n    CommandExecutionError(String),\n    #[error(\"Failed to parse sidecar output as JSON\")]\n    JsonParseError(String),\n    #[error(\"Directory not found\")]\n    DirectoryError(String),\n    #[error(\"File not found\")]\n    FileError(String),\n    #[error(\"Unsuccessful serialization\")]\n    SerializationError(String),\n    #[error(\"Project Not Found\")]\n    ProjectNotFoundError(String),\n}\n\n#[derive(Error, Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum RequestParseError {\n    #[error(\"Failed to parse request to proper type\")]\n    MalformedRequest(String),\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct SimulateNetworkRequest {\n    pub network: NetworkVO,\n    pub project_slug: String,\n    pub audio_file_path: String,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct SimulateNetworkResponse {\n    //// Not exported because of the size of the HashMap (2MB+)\n    //// Also, the frontend doesn't need this data yet\n    // pub response: HashMap\u003cString, Vec\u003cf64\u003e\u003e,\n    pub py_code_path: String,\n    pub visualization_path: String,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct Node {\n    pub id: String,\n    pub name: String,\n    pub parent_network_id: Option\u003cu32\u003e,\n    pub terminal_ids: Vec\u003cString\u003e,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct NetworkVO {\n    //id is optional so that frontend doesn't need to send an id to backend\n    //if backend notices id is null, this means backend needs to generate an\n    //id for this network (and propagage to corresponding parent_network_id fields)\n    pub id: Option\u003cu32\u003e,\n    pub name: String,\n    pub elements: Vec\u003cElementVO\u003e,\n    pub nodes: Vec\u003cNode\u003e,\n\n    pub creator_id: u32,\n}\n\nimpl NetworkVO {\n    pub fn to_network(self) -\u003e Result\u003cNetwork, RequestParseError\u003e {\n        let mut elements: Vec\u003cElement\u003e = Vec::new();\n        for element in self.elements {\n            elements.push(element.to_element()?);\n        }\n\n        Ok(Network {\n            id: self.id,\n            name: self.name,\n            elements: elements,\n            nodes: vec![],\n            creator_id: self.creator_id,\n        })\n    }\n}\n\n//// Not exported due to NetworkVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct Network {\n    //id is optional so that frontend doesn't need to send an id to backend\n    //if backend notices id is null, this means backend needs to generate an\n    //id for this network (and propagage to corresponding parent_network_id fields)\n    pub id: Option\u003cu32\u003e,\n    pub name: String,\n    pub elements: Vec\u003cElement\u003e,\n    pub nodes: Vec\u003cNode\u003e,\n\n    pub creator_id: u32,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct ElementVO {\n    pub id: String,\n    pub parent_network_id: Option\u003cu32\u003e,\n    pub name: String,\n\n    pub type_name: String,\n    pub element_type_params: HashMap\u003cString, HashMap\u003cString, String\u003e\u003e,\n\n    pub terminals: Vec\u003cTerminal\u003e,\n    pub position: Position,\n}\n\nimpl ElementVO {\n    fn to_element(self) -\u003e Result\u003cElement, RequestParseError\u003e {\n        let params: Parameters = match self.type_name.as_str() {\n            \"AcDiff\" =\u003e Parameters::AcDiff(AcDiffParams::from_hashmap(\n                self.element_type_params.get(\"AcDiff\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: AcDiff\".to_string()),\n                )?,\n            )?),\n            \"AsymmetricIntegrator\" =\u003e {\n                Parameters::AsymmetricIntegrator(AsymmetricIntegratorParams::from_hashmap(\n                    self.element_type_params.get(\"AsymmetricIntegrator\").ok_or(\n                        RequestParseError::MalformedRequest(\n                            \"Missing key: AsymmetricIntegrator\".to_string(),\n                        ),\n                    )?,\n                )?)\n            }\n            \"Comparator\" =\u003e Parameters::Comparator(ComparatorParams::from_hashmap(\n                self.element_type_params.get(\"Comparator\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: Comparator\".to_string()),\n                )?,\n            )?),\n            \"Filter\" =\u003e Parameters::Filter(FilterParams::from_hashmap(\n                self.element_type_params.get(\"Filter\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: Filter\".to_string()),\n                )?,\n            )?),\n            \"Filterbank\" =\u003e Parameters::Filterbank(FilterbankParams::from_hashmap(\n                self.element_type_params.get(\"Filterbank\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: Filterbank\".to_string()),\n                )?,\n            )?),\n            \"GainOpamp\" =\u003e Parameters::GainOpamp(GainOpampParams::from_hashmap(\n                self.element_type_params.get(\"GainOpamp\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: GainOpamp\".to_string()),\n                )?,\n            )?),\n            \"LookupTable\" =\u003e Parameters::LookupTable(LookupTableParams::from_hashmap(\n                self.element_type_params.get(\"LookupTable\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: LookupTable\".to_string()),\n                )?,\n            )?),\n            \"DelayFlipFlop\" =\u003e Parameters::DelayFlipFlop,\n            \"Multiplier\" =\u003e Parameters::Multiplier(MultiplierParams::from_hashmap(\n                self.element_type_params.get(\"Multiplier\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: Multiplier\".to_string()),\n                )?,\n            )?),\n            \"Mux2\" =\u003e Parameters::Mux2,\n            \"NeuralNet\" =\u003e Parameters::NeuralNet(NeuralNetParams::from_hashmap(\n                self.element_type_params.get(\"NeuralNet\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: NeuralNet\".to_string()),\n                )?,\n            )?),\n            \"PeakDetector\" =\u003e Parameters::PeakDetector(PeakDetectorParams::from_hashmap(\n                self.element_type_params.get(\"PeakDetector\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: PeakDetector\".to_string()),\n                )?,\n            )?),\n            \"PGA\" =\u003e {\n                Parameters::PGA(PGAParams::from_hashmap(\n                    self.element_type_params.get(\"PGA\").ok_or(\n                        RequestParseError::MalformedRequest(\"Missing key: PGA\".to_string()),\n                    )?,\n                )?)\n            }\n            \"SynthesizedFilter\" =\u003e {\n                Parameters::SynthesizedFilter(SynthesizedFilterParams::from_hashmap(\n                    self.element_type_params.get(\"SynthesizedFilter\").ok_or(\n                        RequestParseError::MalformedRequest(\n                            \"Missing key: SynthesizedFilter\".to_string(),\n                        ),\n                    )?,\n                )?)\n            }\n            \"Terminal\" =\u003e Parameters::Terminal(TerminalParams::from_hashmap(\n                self.element_type_params.get(\"Terminal\").ok_or(\n                    RequestParseError::MalformedRequest(\"Missing key: Terminal\".to_string()),\n                )?,\n            )?),\n            \u0026_ =\u003e {\n                return Err(RequestParseError::MalformedRequest(format!(\n                    \"Invalid element type {}\",\n                    self.type_name\n                )))\n            }\n        };\n\n        Ok(Element {\n            id: self.id,\n            parent_network_id: self.parent_network_id,\n            name: self.name,\n            type_name: self.type_name,\n            element_type_params: params,\n            terminals: self.terminals,\n            position: self.position,\n        })\n    }\n}\n\n//// Not exported dueto ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct Element {\n    pub id: String,\n    pub parent_network_id: Option\u003cu32\u003e,\n    pub name: String,\n\n    pub type_name: String,\n    pub element_type_params: Parameters,\n\n    pub terminals: Vec\u003cTerminal\u003e,\n    pub position: Position,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct Position {\n    pub x: f32,\n    pub y: f32,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct Terminal {\n    pub id: String,\n    pub parent_element_id: String,\n    pub type_name: String,\n    pub node_name: String,\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum Parameters {\n    AcDiff(AcDiffParams),\n    AsymmetricIntegrator(AsymmetricIntegratorParams),\n    Comparator(ComparatorParams),\n    Filter(FilterParams),\n    Filterbank(FilterbankParams),\n    GainOpamp(GainOpampParams),\n    LookupTable(LookupTableParams),\n    DelayFlipFlop, //has no params\n    Multiplier(MultiplierParams),\n    Mux2, //has no params\n    NeuralNet(NeuralNetParams),\n    PeakDetector(PeakDetectorParams),\n    PGA(PGAParams),\n    SynthesizedFilter(SynthesizedFilterParams),\n    Terminal(TerminalParams),\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct AcDiffParams {\n    pub gain: f64,\n    pub bias: Option\u003cf64\u003e,\n}\n\nimpl AcDiffParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let gain = params\n            .get(\"gain\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: gain\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: gain (expected - float)\".to_string(),\n                )\n            })?;\n        let bias = match params.get(\"bias\") {\n            Some(bias) =\u003e Some(bias.parse::\u003cf64\u003e().map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: bias (expected - float)\".to_string(),\n                )\n            })?),\n            None =\u003e None,\n        };\n\n        Ok(AcDiffParams {\n            gain: gain,\n            bias: bias,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct AsymmetricIntegratorParams {\n    pub up: f64,\n    pub down: f64,\n    pub up_down_type: UpDownType,\n    pub comparator_enable: bool,\n    pub buffer_gm: Option\u003cf64\u003e,\n    pub capacitor_configuration: Option\u003cCapacitorConfiguration\u003e,\n    pub parasitic_capacitance: Option\u003cf64\u003e,\n    pub unit_capacitance: Option\u003cf64\u003e,\n}\n\nimpl AsymmetricIntegratorParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let up = params\n            .get(\"up\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: up\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: up (expected - float)\".to_string(),\n                )\n            })?;\n        let down = params\n            .get(\"down\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: down\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: down (expected - float)\".to_string(),\n                )\n            })?;\n        let up_down_type = match params\n            .get(\"up_down_type\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: up_down_type\".to_string(),\n            ))?\n            .as_str()\n        {\n            \"Rate\" =\u003e UpDownType::Rate,\n            \"Hang\" =\u003e UpDownType::Hang,\n            _ =\u003e {\n                return Err(RequestParseError::MalformedRequest(\n                    \"Invalid value for key: up_down_type (expected - Rate or Hang)\".to_string(),\n                ))\n            }\n        };\n\n        let comparator_enable = params\n            .get(\"comparator_enable\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: comparator_enable\".to_string(),\n            ))?\n            .parse::\u003cbool\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: comparator_enable (expected - bool)\".to_string(),\n                )\n            })?;\n\n        Ok(AsymmetricIntegratorParams {\n            up: up,\n            down: down,\n            up_down_type: up_down_type,\n            comparator_enable: comparator_enable,\n            buffer_gm: None,\n            capacitor_configuration: None,\n            parasitic_capacitance: None,\n            unit_capacitance: None,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct ComparatorParams {\n    pub threshold: f64,\n    pub hysteresis_voltage: Option\u003cf64\u003e,\n}\n\nimpl ComparatorParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let threshold = params\n            .get(\"threshold\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: threshold\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: threshold (expected - float)\".to_string(),\n                )\n            })?;\n        let hysteresis_voltage = match params.get(\"hysteresis_voltage\") {\n            Some(hysteresis_voltage) =\u003e Some(hysteresis_voltage.parse::\u003cf64\u003e().map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: hysteresis_voltage (expected - float)\".to_string(),\n                )\n            })?),\n            None =\u003e None,\n        };\n\n        Ok(ComparatorParams {\n            threshold: threshold,\n            hysteresis_voltage: hysteresis_voltage,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct FilterParams {\n    pub characteristic_frequency: f64,\n    pub quality_factor: f64,\n    pub filter_type: FilterType,\n}\n\nimpl FilterParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let characteristic_frequency = params\n            .get(\"characteristic_frequency\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: characteristic_frequency\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: characteristic_frequency (expected - float)\"\n                        .to_string(),\n                )\n            })?;\n        let quality_factor = params\n            .get(\"quality_factor\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: quality_factor\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: quality_factor (expected - float)\".to_string(),\n                )\n            })?;\n        let filter_type =\n            match params\n                .get(\"filter_type\")\n                .ok_or(RequestParseError::MalformedRequest(\n                    \"Missing key: filter_type\".to_string(),\n                ))?\n                .as_str()\n            {\n                \"lpf1\" =\u003e FilterType::lpf1,\n                \"lpf2\" =\u003e FilterType::lpf2,\n                \"bpf2\" =\u003e FilterType::bpf2,\n                \"hpf1\" =\u003e FilterType::hpf1,\n                \"hpf2\" =\u003e FilterType::hpf2,\n                _ =\u003e return Err(RequestParseError::MalformedRequest(\n                    \"Invalid value for key: filter_type (expected - lpf1, lpf2, bpf2, hpf1, hpf2)\"\n                        .to_string(),\n                )),\n            };\n\n        Ok(FilterParams {\n            characteristic_frequency: characteristic_frequency,\n            quality_factor: quality_factor,\n            filter_type: filter_type,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct FilterbankParams {\n    pub band_frequencies: Vec\u003cu64\u003e,\n    pub quality_factor: Vec\u003cf64\u003e,\n    pub attack_rates: Vec\u003cf64\u003e,\n    pub decay_rates: Vec\u003cf64\u003e,\n}\n\nfn parse_float_vector(input: \u0026str) -\u003e Option\u003cVec\u003cf64\u003e\u003e {\n    // Remove leading and trailing whitespaces and square brackets\n    let trimmed_input = input.trim_start_matches('[').trim_end_matches(']');\n\n    if trimmed_input.len() == 0 {\n        return Some(vec![]);\n    }\n\n    // Split the input string by commas\n    let values: Vec\u003c\u0026str\u003e = trimmed_input.split(',').collect();\n\n    // Parse each value as a float and collect into a Vec\u003cf64\u003e\n    let result: Option\u003cVec\u003cf64\u003e\u003e = values\n        .into_iter()\n        .map(|v| v.trim().parse::\u003cf64\u003e().ok())\n        .collect();\n\n    result\n}\n\nfn parse_int_vector(input: \u0026str) -\u003e Option\u003cVec\u003cu64\u003e\u003e {\n    // Remove leading and trailing whitespaces and square brackets\n    let trimmed_input = input.trim_start_matches('[').trim_end_matches(']');\n\n    if trimmed_input.len() == 0 {\n        return Some(vec![]);\n    }\n\n    // Split the input string by commas\n    let values: Vec\u003c\u0026str\u003e = trimmed_input.split(',').collect();\n\n    // Parse each value as a float and collect into a Vec\u003cu64\u003e\n    let result: Option\u003cVec\u003cu64\u003e\u003e = values\n        .into_iter()\n        .map(|v| v.trim().parse::\u003cu64\u003e().ok())\n        .collect();\n\n    result\n}\n\nimpl FilterbankParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let band_frequencies = parse_int_vector(params.get(\"band_frequencies\").ok_or(\n            RequestParseError::MalformedRequest(\"Missing key: band_frequencies\".to_string()),\n        )?)\n        .ok_or(RequestParseError::MalformedRequest(\n            \"Invalid value for key: band_frequencies (expected - Vec\u003cf64\u003e)\".to_string(),\n        ))?;\n\n        let quality_factor = parse_float_vector(params.get(\"quality_factor\").ok_or(\n            RequestParseError::MalformedRequest(\"Missing key: quality_factor\".to_string()),\n        )?)\n        .ok_or(RequestParseError::MalformedRequest(\n            \"Invalid value for key: quality_factor (expected - Vec\u003cf64\u003e)\".to_string(),\n        ))?;\n\n        let attack_rates = parse_float_vector(params.get(\"attack_rates\").ok_or(\n            RequestParseError::MalformedRequest(\"Missing key: attack_rates\".to_string()),\n        )?)\n        .ok_or(RequestParseError::MalformedRequest(\n            \"Invalid value for key: attack_rates (expected - Vec\u003cf64\u003e)\".to_string(),\n        ))?;\n\n        let decay_rates = parse_float_vector(params.get(\"decay_rates\").ok_or(\n            RequestParseError::MalformedRequest(\"Missing key: decay_rates\".to_string()),\n        )?)\n        .ok_or(RequestParseError::MalformedRequest(\n            \"Invalid value for key: decay_rates (expected - Vec\u003cf64\u003e)\".to_string(),\n        ))?;\n\n        Ok(FilterbankParams {\n            band_frequencies: band_frequencies,\n            quality_factor: quality_factor,\n            attack_rates: attack_rates,\n            decay_rates: decay_rates,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct GainOpampParams {\n    pub gain_mode: GainOpampMode,\n    //pub opamp_implementation: OpampType,  //not supported as it is not exposed\n    pub feedback_cap_count: f64,\n}\n\nimpl GainOpampParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let gain_mode = match params.get(\"gain_mode\")\n            .ok_or(RequestParseError::MalformedRequest(\"Missing key: gain_mode\".to_string()))?\n            .as_str() {\n                \"Noninverting1x\" =\u003e GainOpampMode::Noninverting1x,\n                \"Noninverting11x\" =\u003e GainOpampMode::Noninverting11x,\n                \"Inverting2x\" =\u003e GainOpampMode::Inverting2x,\n                \"Inverting4x\" =\u003e GainOpampMode::Inverting4x,\n                \"Inverting10x\" =\u003e GainOpampMode::Inverting10x,\n                \"Inverting20x\" =\u003e GainOpampMode::Inverting20x,\n                _ =\u003e return Err(RequestParseError::MalformedRequest(\"Invalid value for key: gain_mode (expected - Noninverting1x, Noninverting11x, Inverting2x, Inverting4x, Inverting10x, Inverting20x)\".to_string())),\n            };\n        let feedback_cap_count = params\n            .get(\"feedback_cap_count\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: feedback_cap_count\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: feedback_cap_count (expected - float)\".to_string(),\n                )\n            })?;\n\n        Ok(GainOpampParams {\n            gain_mode: gain_mode,\n            feedback_cap_count: feedback_cap_count,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct LookupTableParams {\n    pub expression: String,\n}\n\nimpl LookupTableParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        // TODO: Validate expression\n        let expression = params\n            .get(\"expression\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: expression\".to_string(),\n            ))?\n            .to_string();\n\n        Ok(LookupTableParams {\n            expression: expression,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct MultiplierParams {\n    pub slope: f64,\n}\n\nimpl MultiplierParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let slope = params\n            .get(\"slope\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: slope\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: slope (expected - float)\".to_string(),\n                )\n            })?;\n\n        Ok(MultiplierParams { slope: slope })\n    }\n}\n\nfn parse_activation_function_vector(input: \u0026str) -\u003e Option\u003cVec\u003cActivationFunction\u003e\u003e {\n    // Remove leading and trailing whitespaces and square brackets\n    let trimmed_input = input.trim_start_matches('[').trim_end_matches(']');\n\n    if trimmed_input.len() == 0 {\n        return Some(vec![]);\n    }\n\n    // Split the input string by commas\n    let values: Vec\u003c\u0026str\u003e = trimmed_input.split(',').collect();\n\n    // Parse each value as a float and collect into a Vec\u003cActivationFunction\u003e\n    let result: Option\u003cVec\u003cActivationFunction\u003e\u003e = values\n        .into_iter()\n        .map(|v| match v.trim() {\n            \"Tanh\" =\u003e Some(ActivationFunction::Tanh),\n            \"Sigmoid\" =\u003e Some(ActivationFunction::Sigmoid),\n            \"ReLU\" =\u003e Some(ActivationFunction::ReLU),\n            \"Linear\" =\u003e Some(ActivationFunction::Linear),\n            _ =\u003e None,\n        })\n        .collect();\n\n    result\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct NeuralNetParams {\n    pub weights: Vec\u003cf64\u003e,\n    pub biases: Vec\u003cf64\u003e,\n    pub activation_function: Vec\u003cActivationFunction\u003e,\n    pub activation_scale: Option\u003cf64\u003e,\n    pub input_compress_scale: Option\u003cf64\u003e,\n    pub input_compression_type: Option\u003cActivationFunction\u003e,\n}\n\nimpl NeuralNetParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let weights = parse_float_vector(params.get(\"weights\").ok_or(\n            RequestParseError::MalformedRequest(\"Missing key: weights\".to_string()),\n        )?)\n        .ok_or(RequestParseError::MalformedRequest(\n            \"Invalid value for key: weights (expected - Vec\u003cf64\u003e)\".to_string(),\n        ))?;\n\n        let biases = parse_float_vector(params.get(\"biases\").ok_or(\n            RequestParseError::MalformedRequest(\"Missing key: biases\".to_string()),\n        )?)\n        .ok_or(RequestParseError::MalformedRequest(\n            \"Invalid value for key: biases (expected - Vec\u003cf64\u003e)\".to_string(),\n        ))?;\n\n        let activation_function =\n            parse_activation_function_vector(params.get(\"activation_function\").ok_or(\n                RequestParseError::MalformedRequest(\"Missing key: activation_function\".to_string()),\n            )?)\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Invalid value for key: activation_function (expected - Vec\u003cActivationFunction\u003e)\"\n                    .to_string(),\n            ))?;\n\n        let activation_scale = match params.get(\"activation_scale\") {\n            Some(activation_scale) =\u003e Some(activation_scale.parse::\u003cf64\u003e().map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: activation_scale (expected - float)\".to_string(),\n                )\n            })?),\n            None =\u003e None,\n        };\n        let input_compress_scale = match params.get(\"input_compress_scale\") {\n            Some(input_compress_scale) =\u003e {\n                Some(input_compress_scale.parse::\u003cf64\u003e().map_err(|_| {\n                    RequestParseError::MalformedRequest(\n                        \"Invalid value for key: input_compress_scale (expected - float)\"\n                            .to_string(),\n                    )\n                })?)\n            }\n            None =\u003e None,\n        };\n        let input_compression_type = match params.get(\"input_compression_type\") {\n            Some(input_compression_type) =\u003e Some(\n                match input_compression_type.as_str() {\n                    \"Tanh\" =\u003e ActivationFunction::Tanh,\n                    \"Sigmoid\" =\u003e ActivationFunction::Sigmoid,\n                    \"ReLU\" =\u003e ActivationFunction::ReLU,\n                    \"Linear\" =\u003e ActivationFunction::Linear,\n                    _ =\u003e return Err(RequestParseError::MalformedRequest(\"Invalid value for key: input_compression_type (expected - Tanh, Sigmoid, ReLU, Linear)\".to_string())),\n                }\n            ),\n            None =\u003e None,\n        };\n        Ok(NeuralNetParams {\n            weights: weights,\n            biases: biases,\n            activation_function: activation_function,\n            activation_scale: activation_scale,\n            input_compress_scale: input_compress_scale,\n            input_compression_type: input_compression_type,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct PeakDetectorParams {\n    pub atk: f64,\n    pub dec: f64,\n    pub model_version: ModelVersion,\n    pub buff: Option\u003cf64\u003e,\n    pub parasitic_ratio: Option\u003cf64\u003e,\n}\n\nimpl PeakDetectorParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let atk = params\n            .get(\"atk\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: atk\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: atk (expected - float)\".to_string(),\n                )\n            })?;\n        let dec = params\n            .get(\"dec\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: dec\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: dec (expected - float)\".to_string(),\n                )\n            })?;\n        let model_version = match params\n            .get(\"model_version\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: model_version\".to_string(),\n            ))?\n            .as_str()\n        {\n            \"FirstOrder\" =\u003e ModelVersion::FirstOrder,\n            \"SecondOrder\" =\u003e ModelVersion::SecondOrder,\n            _ =\u003e {\n                return Err(RequestParseError::MalformedRequest(\n                    \"Invalid value for key: model_version (expected - FirstOrder, SecondOrder)\"\n                        .to_string(),\n                ))\n            }\n        };\n        let buff = match params.get(\"buff\") {\n            Some(buff) =\u003e Some(buff.parse::\u003cf64\u003e().map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: buff (expected - float)\".to_string(),\n                )\n            })?),\n            None =\u003e None,\n        };\n        let parasitic_ratio = match params.get(\"parasitic_ratio\") {\n            Some(parasitic_ratio) =\u003e Some(parasitic_ratio.parse::\u003cf64\u003e().map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: parasitic_ratio (expected - float)\".to_string(),\n                )\n            })?),\n            None =\u003e None,\n        };\n        Ok(PeakDetectorParams {\n            atk: atk,\n            dec: dec,\n            model_version: model_version,\n            buff: buff,\n            parasitic_ratio: parasitic_ratio,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\n#[allow(non_snake_case)]\npub struct PGAParams {\n    pub Av1: f64,\n    pub Av2: f64,\n    pub den: Option\u003cf64\u003e,\n}\n\nimpl PGAParams {\n    #[allow(non_snake_case)]\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let Av1 = params\n            .get(\"Av1\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: Av1\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: Av1 (expected - float)\".to_string(),\n                )\n            })?;\n        let Av2 = params\n            .get(\"Av2\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: Av2\".to_string(),\n            ))?\n            .parse::\u003cf64\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: Av2 (expected - float)\".to_string(),\n                )\n            })?;\n        let den = match params.get(\"den\") {\n            Some(den) =\u003e Some(den.parse::\u003cf64\u003e().map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: den (expected - float)\".to_string(),\n                )\n            })?),\n            None =\u003e None,\n        };\n        Ok(PGAParams {\n            Av1: Av1,\n            Av2: Av2,\n            den: den,\n        })\n    }\n}\n\nfn parse_vector_vector_floats(input: \u0026str) -\u003e Option\u003cVec\u003cVec\u003cf64\u003e\u003e\u003e {\n    // Remove leading and trailing whitespaces and square brackets\n    let trimmed_input = input.trim_start_matches('[').trim_end_matches(']');\n\n    if trimmed_input.len() == 0 {\n        return Some(vec![]);\n    }\n\n    // Split the input string by commas\n    let values: Vec\u003c\u0026str\u003e = trimmed_input.split(\"],[\").collect();\n\n    // Parse each value as a float and collect into a Vec\u003cVec\u003cf64\u003e\u003e\n    let result: Option\u003cVec\u003cVec\u003cf64\u003e\u003e\u003e = values.into_iter().map(|v| parse_float_vector(v)).collect();\n\n    result\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct SynthesizedFilterParams {\n    pub coefficients: Vec\u003cVec\u003cf64\u003e\u003e,\n}\n\nimpl SynthesizedFilterParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let coefficients = parse_vector_vector_floats(params.get(\"coefficients\").ok_or(\n            RequestParseError::MalformedRequest(\"Missing key: coefficients\".to_string()),\n        )?)\n        .ok_or(RequestParseError::MalformedRequest(\n            \"Invalid value for key: coefficients (e.g. `[[1.0,2.0],[3.0,4.0]]`)\".to_string(),\n        ))?;\n\n        Ok(SynthesizedFilterParams {\n            coefficients: coefficients,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct TerminalParams {\n    pub hardware_pin: Option\u003cString\u003e,\n    pub is_input: bool,\n    pub is_output: bool,\n    pub is_ac_coupled: Option\u003cbool\u003e,\n    pub is_extern: Option\u003cbool\u003e,\n}\n\nimpl TerminalParams {\n    fn from_hashmap(params: \u0026HashMap\u003cString, String\u003e) -\u003e Result\u003cSelf, RequestParseError\u003e {\n        let hardware_pin = match params.get(\"hardware_pin\") {\n            Some(hardware_pin) =\u003e Some(hardware_pin.to_string()),\n            None =\u003e None,\n        };\n        let is_input = params\n            .get(\"is_input\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: is_input\".to_string(),\n            ))?\n            .parse::\u003cbool\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: is_input (expected - bool)\".to_string(),\n                )\n            })?;\n        let is_output = params\n            .get(\"is_output\")\n            .ok_or(RequestParseError::MalformedRequest(\n                \"Missing key: is_output\".to_string(),\n            ))?\n            .parse::\u003cbool\u003e()\n            .map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: is_output (expected - bool)\".to_string(),\n                )\n            })?;\n        let is_ac_coupled = match params.get(\"is_ac_coupled\") {\n            Some(is_ac_coupled) =\u003e Some(is_ac_coupled.parse::\u003cbool\u003e().map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: is_ac_coupled (expected - bool)\".to_string(),\n                )\n            })?),\n            None =\u003e None,\n        };\n        let is_extern = match params.get(\"is_extern\") {\n            Some(is_extern) =\u003e Some(is_extern.parse::\u003cbool\u003e().map_err(|_| {\n                RequestParseError::MalformedRequest(\n                    \"Invalid value for key: is_extern (expected - bool)\".to_string(),\n                )\n            })?),\n            None =\u003e None,\n        };\n        Ok(TerminalParams {\n            hardware_pin: hardware_pin,\n            is_input: is_input,\n            is_output: is_output,\n            is_ac_coupled: is_ac_coupled,\n            is_extern: is_extern,\n        })\n    }\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\n#[allow(non_camel_case_types)]\n#[derive(PartialEq)]\npub enum CapacitorConfiguration {\n    Internal,\n    Internal2x,\n    Internal3x,\n    Internal4x,\n    Internal4x_2xS4_S3,\n    Internal4x_2xS4_S3_S2,\n    Internal4x_S4,\n    ParasiticOnly,\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\n#[allow(non_camel_case_types)]\n#[derive(PartialEq)]\npub enum FilterType {\n    lpf1,\n    lpf2,\n    bpf2,\n    hpf1,\n    hpf2,\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\n#[allow(non_camel_case_types)]\n#[derive(PartialEq)]\npub enum GainOpampMode {\n    Noninverting1x,\n    Noninverting11x,\n    Inverting2x,\n    Inverting4x,\n    Inverting10x,\n    Inverting20x,\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\n#[allow(non_camel_case_types)]\n#[derive(PartialEq)]\npub enum OpampType {\n    StageZero,\n    Pin,\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\n#[allow(non_camel_case_types)]\n#[derive(PartialEq)]\npub enum ModelVersion {\n    FirstOrder,\n    SecondOrder,\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\n#[allow(non_camel_case_types)]\n#[derive(PartialEq)]\npub enum UpDownType {\n    Rate,\n    Hang,\n}\n\n//// NOTE: Not exported due to ElementVO\n#[derive(Debug, Serialize, Deserialize, PartialEq)]\n// #[ts(export)]\n// #[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\n#[allow(non_camel_case_types)]\npub enum ActivationFunction {\n    Tanh,\n    Sigmoid,\n    ReLU,\n    Linear,\n}\n\nimpl AmlSimulatorSidecar {\n    pub fn new() -\u003e Self {\n        AmlSimulatorSidecar {\n            sidecar_name: String::from(\"aspinity_wrapper\"),\n        }\n    }\n\n    fn get_sidecar_name(\u0026self) -\u003e String {\n        self.sidecar_name.clone()\n    }\n}\n\n#[automock]\npub trait ExecutableSidecar {\n    fn get_output(\u0026self, params: Vec\u003cString\u003e) -\u003e Result\u003cString, SimulatorError\u003e;\n}\n\nimpl ExecutableSidecar for AmlSimulatorSidecar {\n    fn get_output(\u0026self, params: Vec\u003cString\u003e) -\u003e Result\u003cString, SimulatorError\u003e {\n        let command_output = Command::new_sidecar(self.get_sidecar_name())\n            .map_err(|e| SimulatorError::CommandBuildError(e.to_string()))?\n            .args(\u0026params)\n            .output()\n            .map_err(|e| SimulatorError::CommandExecutionError(e.to_string()))?;\n\n        Ok(command_output.stdout)\n    }\n}\n\npub trait NetworkSimulator {\n    fn list_elements\u003cE: ExecutableSidecar\u003e(sidecar: \u0026E) -\u003e Result\u003cString, SimulatorError\u003e;\n    fn sidecar_simulate_network\u003cE: ExecutableSidecar\u003e(\n        project_slug: \u0026str,\n        sidecar: \u0026E,\n        network: \u0026Network,\n        audio_file_path: \u0026Path,\n        app_dir: \u0026PathBuf,\n        db_conn: \u0026mut DbConn,\n    ) -\u003e Result\u003cSimulateNetworkResponse, SimulatorError\u003e;\n}\n\nfn save_network_to_dir(network: \u0026Network, dir: \u0026Path) -\u003e Result\u003cString, SimulatorError\u003e {\n    fs::create_dir_all(dir).map_err(|e| SimulatorError::DirectoryError(e.to_string()))?;\n\n    let network_json = serde_json::to_string(\u0026network).map_err(|e| {\n        SimulatorError::SerializationError(format!(\n            \"Failed to serialize network to JSON: {}\",\n            e.to_string()\n        ))\n    })?;\n\n    let file_path = dir.join(\"network.json\");\n    let mut file = fs::OpenOptions::new()\n        .write(true)\n        .create(true)\n        .truncate(true)\n        .open(\u0026file_path)\n        .map_err(|e| SimulatorError::FileError(e.to_string()))?;\n\n    file.write_all(network_json.as_bytes()).map_err(|e| {\n        SimulatorError::FileError(format!(\n            \"Failed to write network JSON to file: {}\",\n            e.to_string()\n        ))\n    })?;\n\n    // Flush the file buffer and sync all metadata to disk\n    file.flush()\n        .map_err(|e| SimulatorError::FileError(e.to_string()))?;\n    file.sync_all()\n        .map_err(|e| SimulatorError::FileError(e.to_string()))?;\n\n    Ok(file_path.as_os_str().to_str().unwrap().to_string())\n}\n\npub struct AmlSimulator {}\n\nimpl NetworkSimulator for AmlSimulator {\n    fn list_elements\u003cE: ExecutableSidecar\u003e(sidecar: \u0026E) -\u003e Result\u003cString, SimulatorError\u003e {\n        let params = vec![\"--get_elements\".to_string()];\n        sidecar.get_output(params)\n    }\n\n    fn sidecar_simulate_network\u003cE: ExecutableSidecar\u003e(\n        project_slug: \u0026str,\n        sidecar: \u0026E,\n        network: \u0026Network,\n        audio_file_path: \u0026Path,\n        app_dir: \u0026PathBuf,\n        db_conn: \u0026mut DbConn,\n    ) -\u003e Result\u003cSimulateNetworkResponse, SimulatorError\u003e {\n        let found: bool =\n            get_projects::project_exists_by_slug(project_slug, db_conn).map_err(|e| {\n                SimulatorError::ProjectNotFoundError(format!(\n                    \"Error: Could not query project_slug={} in database due to {}\",\n                    project_slug,\n                    e.to_string()\n                ))\n            })?;\n\n        if !found {\n            return Err(SimulatorError::ProjectNotFoundError(format!(\n                \"Error: Could not find project_slug={} in database\",\n                project_slug\n            )));\n        }\n\n        let absolute_file_path = Path::new(app_dir)\n            .join(project_slug)\n            .join(\"audio\")\n            .join(audio_file_path);\n\n        if !absolute_file_path.exists() {\n            return Err(SimulatorError::FileError(format!(\n                \"Audio file does not exist at path: {}\",\n                absolute_file_path.to_str().unwrap().to_string()\n            )));\n        }\n\n        let tmp_dir = Path::new(app_dir).join(project_slug).join(\"tmp\");\n        let network_file_path: String = save_network_to_dir(network, \u0026tmp_dir)?;\n\n        let params = vec![\n            \"--simulate_network\".to_string(),\n            \"-network\".to_string(),\n            network_file_path,\n            \"-wavfile\".to_string(),\n            absolute_file_path.to_str().unwrap().to_string(),\n            \"-tmp_dir\".to_string(),\n            tmp_dir.to_str().unwrap().to_string(),\n        ];\n\n        let binding = sidecar\n            .get_output(params.clone())\n            .map_err(|e| {\n                SimulatorError::CommandExecutionError(format!(\n                    \"Failed to execute sidecar: {}\",\n                    e.to_string()\n                ))\n            })?\n            .replace(\"\\'\", \"\\\"\");\n\n        let simulator_output = binding.as_str();\n\n        let output: SimulateNetworkResponse =\n            serde_json::from_str(simulator_output).map_err(|_| {\n                SimulatorError::SerializationError(format!(\n                    \"Failed to deserialize sidecar output: {}\",\n                    simulator_output\n                ))\n            })?;\n\n        Ok(output)\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use std::env;\n\n    use crate::aml_core::network_manager::*;\n    use mockall::*;\n\n    #[test]\n    fn test_aml_simulator_sidecar_name() {\n        // arrange\n        let obj = AmlSimulatorSidecar::new();\n        // act\n        let sidecar_file: String = obj.get_sidecar_name();\n        // assert\n        assert_eq!(sidecar_file, \"aspinity_wrapper\".to_string());\n    }\n\n    #[test]\n    fn test_list_elements_uses_correct_params() {\n        // arrange\n        let expected_param: Vec\u003cString\u003e = vec![\"--get_elements\".to_string()];\n        let expected_output: String = String::from(\"Dummy output\");\n        let expected_output_result: Result\u003cString, SimulatorError\u003e = Ok(expected_output.clone());\n\n        let mut mock = MockExecutableSidecar::new();\n        mock.expect_get_output()\n            .with(predicate::eq(expected_param))\n            .times(1)\n            .return_once(move |_| expected_output_result);\n\n        // act\n        let output = AmlSimulator::list_elements(\u0026mock);\n\n        //assert\n        assert_eq!(Ok(expected_output), output);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_AcDiffParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"gain\".to_string(), \"1.0\".to_string());\n        params.insert(\"bias\".to_string(), \"2.0\".to_string());\n\n        // act\n        let result = AcDiffParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().gain, 1.0);\n        assert_eq!(result.as_ref().unwrap().bias.unwrap(), 2.0);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_AcDiffParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"gain\".to_string(), \"not_float\".to_string());\n        params.insert(\"bias\".to_string(), \"2.0\".to_string());\n\n        // act\n        let result = AcDiffParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_AcDiffParams_from_hashmap_neg2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"gain\".to_string(), \"1.0\".to_string());\n        params.insert(\"bias\".to_string(), \"not_float\".to_string());\n\n        // act\n        let result = AcDiffParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_AsymmetricIntegratorParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"up\".to_string(), \"1.0\".to_string());\n        params.insert(\"down\".to_string(), \"2.0\".to_string());\n        params.insert(\"up_down_type\".to_string(), \"Rate\".to_string());\n        params.insert(\"comparator_enable\".to_string(), \"true\".to_string());\n\n        // act\n        let result = AsymmetricIntegratorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().up, 1.0);\n        assert_eq!(result.as_ref().unwrap().down, 2.0);\n        assert!(result.as_ref().unwrap().up_down_type == UpDownType::Rate);\n        assert_eq!(result.as_ref().unwrap().comparator_enable, true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_AsymmetricIntegratorParams_from_hashmap_2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"up\".to_string(), \"1.0\".to_string());\n        params.insert(\"down\".to_string(), \"2.0\".to_string());\n        params.insert(\"up_down_type\".to_string(), \"Hang\".to_string());\n        params.insert(\"comparator_enable\".to_string(), \"true\".to_string());\n\n        // act\n        let result = AsymmetricIntegratorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().up, 1.0);\n        assert_eq!(result.as_ref().unwrap().down, 2.0);\n        assert!(result.as_ref().unwrap().up_down_type == UpDownType::Hang);\n        assert_eq!(result.as_ref().unwrap().comparator_enable, true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_AsymmetricIntegratorParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"up\".to_string(), \"1.0\".to_string());\n        params.insert(\"down\".to_string(), \"2.0\".to_string());\n        params.insert(\"up_down_type\".to_string(), \"InvalidEnum\".to_string());\n        params.insert(\"comparator_enable\".to_string(), \"true\".to_string());\n\n        // act\n        let result = AsymmetricIntegratorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_AsymmetricIntegratorParams_from_hashmap_neg2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"up\".to_string(), \"not_float\".to_string());\n        params.insert(\"down\".to_string(), \"2.0\".to_string());\n        params.insert(\"up_down_type\".to_string(), \"Rate\".to_string());\n        params.insert(\"comparator_enable\".to_string(), \"true\".to_string());\n\n        // act\n        let result = AsymmetricIntegratorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_AsymmetricIntegratorParams_from_hashmap_neg3() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"up\".to_string(), \"1.0\".to_string());\n        params.insert(\"down\".to_string(), \"not_float\".to_string());\n        params.insert(\"up_down_type\".to_string(), \"Rate\".to_string());\n        params.insert(\"comparator_enable\".to_string(), \"true\".to_string());\n\n        // act\n        let result = AsymmetricIntegratorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_AsymmetricIntegratorParams_from_hashmap_neg4() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"up\".to_string(), \"1.0\".to_string());\n        params.insert(\"down\".to_string(), \"2.0\".to_string());\n        params.insert(\"up_down_type\".to_string(), \"Rate\".to_string());\n        params.insert(\"comparator_enable\".to_string(), \"not_bool\".to_string());\n\n        // act\n        let result = AsymmetricIntegratorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_ComparatorParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"threshold\".to_string(), \"1.0\".to_string());\n        params.insert(\"hysteresis_voltage\".to_string(), \"2.0\".to_string());\n\n        // act\n        let result = ComparatorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().threshold, 1.0);\n        assert_eq!(result.as_ref().unwrap().hysteresis_voltage.unwrap(), 2.0);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_ComparatorParams_from_hashmap_withNone() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"threshold\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = ComparatorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().threshold, 1.0);\n        assert_eq!(result.as_ref().unwrap().hysteresis_voltage, None);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_ComparatorParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"threshold\".to_string(), \"not_float\".to_string());\n        params.insert(\"hysteresis_voltage\".to_string(), \"2.0\".to_string());\n\n        // act\n        let result = ComparatorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_ComparatorParams_from_hashmap_neg2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"threshold\".to_string(), \"1.0\".to_string());\n        params.insert(\"hysteresis_voltage\".to_string(), \"not_float\".to_string());\n\n        // act\n        let result = ComparatorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_FilterParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"characteristic_frequency\".to_string(), \"1.0\".to_string());\n        params.insert(\"quality_factor\".to_string(), \"2.0\".to_string());\n        params.insert(\"filter_type\".to_string(), \"lpf1\".to_string());\n\n        // act\n        let result = FilterParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().characteristic_frequency, 1.0);\n        assert_eq!(result.as_ref().unwrap().quality_factor, 2.0);\n        assert!(result.as_ref().unwrap().filter_type == FilterType::lpf1);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_FilterParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"characteristic_frequency\".to_string(), \"not_float\".to_string());\n        params.insert(\"quality_factor\".to_string(), \"2.0\".to_string());\n        params.insert(\"filter_type\".to_string(), \"lpf1\".to_string());\n\n        // act\n        let result = FilterParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_FilterParams_from_hashmap_neg2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"characteristic_frequency\".to_string(), \"1.0\".to_string());\n        params.insert(\"quality_factor\".to_string(), \"not_float\".to_string());\n        params.insert(\"filter_type\".to_string(), \"lpf1\".to_string());\n\n        // act\n        let result = FilterParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_FilterParams_from_hashmap_neg3() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"characteristic_frequency\".to_string(), \"1.0\".to_string());\n        params.insert(\"quality_factor\".to_string(), \"2.0\".to_string());\n        params.insert(\"filter_type\".to_string(), \"invalid_enum\".to_string());\n\n        // act\n        let result = FilterParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_FilterbankParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"band_frequencies\".to_string(), \"[1,2,3]\".to_string());\n        params.insert(\"quality_factor\".to_string(), \"[1.0,2.0,3.0]\".to_string());\n        params.insert(\"attack_rates\".to_string(), \"[1.0,2.0,3.0]\".to_string());\n        params.insert(\"decay_rates\".to_string(), \"[1.0,2.0,3.0]\".to_string());\n\n        // act\n        let result = FilterbankParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().band_frequencies, vec![1, 2, 3]);\n        assert_eq!(result.as_ref().unwrap().quality_factor, vec![1.0, 2.0, 3.0]);\n        assert_eq!(result.as_ref().unwrap().attack_rates, vec![1.0, 2.0, 3.0]);\n        assert_eq!(result.as_ref().unwrap().decay_rates, vec![1.0, 2.0, 3.0]);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_GainOpampParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"gain_mode\".to_string(), \"Noninverting1x\".to_string());\n        params.insert(\"feedback_cap_count\".to_string(), \"2.0\".to_string());\n\n        // act\n        let result = GainOpampParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert!(result.as_ref().unwrap().gain_mode == GainOpampMode::Noninverting1x);\n        assert_eq!(result.as_ref().unwrap().feedback_cap_count, 2.0);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_GainOpampParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"gain_mode\".to_string(), \"Noninverting200x\".to_string());\n        params.insert(\"feedback_cap_count\".to_string(), \"2.0\".to_string());\n\n        // act\n        let result = GainOpampParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_GainOpampParams_from_hashmap_neg2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"gain_mode\".to_string(), \"Noninverting200x\".to_string());\n        params.insert(\"feedback_cap_count\".to_string(), \"not_float\".to_string());\n\n        // act\n        let result = GainOpampParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_GainOpampParams_from_hashmap2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"gain_mode\".to_string(), \"Inverting20x\".to_string());\n        params.insert(\"feedback_cap_count\".to_string(), \"2.0\".to_string());\n\n        // act\n        let result = GainOpampParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert!(result.as_ref().unwrap().gain_mode == GainOpampMode::Inverting20x);\n        assert_eq!(result.as_ref().unwrap().feedback_cap_count, 2.0);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_LookupTableParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"expression\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = LookupTableParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().expression, \"1.0\".to_string());\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_MultiplierParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"slope\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = MultiplierParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().slope, 1.0);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_MultiplierParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"slope\".to_string(), \"not_float\".to_string());\n\n        // act\n        let result = MultiplierParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_NeuralNetParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"weights\".to_string(), \"[1.0,2.0]\".to_string());\n        params.insert(\"biases\".to_string(), \"[1.0,2.0]\".to_string());\n        params.insert(\n            \"activation_function\".to_string(),\n            \"[Tanh,Sigmoid]\".to_string(),\n        );\n        params.insert(\"activation_scale\".to_string(), \"1.0\".to_string());\n        params.insert(\"input_compress_scale\".to_string(), \"1.0\".to_string());\n        params.insert(\"input_compression_type\".to_string(), \"Tanh\".to_string());\n\n        // act\n        let result = NeuralNetParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().weights, vec![1.0, 2.0]);\n        assert_eq!(result.as_ref().unwrap().biases, vec![1.0, 2.0]);\n        assert_eq!(\n            result.as_ref().unwrap().activation_function,\n            vec![ActivationFunction::Tanh, ActivationFunction::Sigmoid]\n        );\n        assert_eq!(result.as_ref().unwrap().activation_scale, Some(1.0));\n        assert_eq!(result.as_ref().unwrap().input_compress_scale, Some(1.0));\n        assert_eq!(\n            result.as_ref().unwrap().input_compression_type,\n            Some(ActivationFunction::Tanh)\n        );\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_NeuralNetParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"weights\".to_string(), \"[1.0,2.0]\".to_string());\n        params.insert(\"biases\".to_string(), \"[1.0,2.0]\".to_string());\n        params.insert(\n            \"activation_function\".to_string(),\n            \"[Tanh,Sigmoid]\".to_string(),\n        );\n        params.insert(\"activation_scale\".to_string(), \"not_float\".to_string());\n        params.insert(\"input_compress_scale\".to_string(), \"1.0\".to_string());\n        params.insert(\"input_compression_type\".to_string(), \"Tanh\".to_string());\n\n        // act\n        let result = NeuralNetParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_NeuralNetParams_from_hashmap_neg2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"weights\".to_string(), \"[1.0,2.0]\".to_string());\n        params.insert(\"biases\".to_string(), \"[1.0,2.0]\".to_string());\n        params.insert(\n            \"activation_function\".to_string(),\n            \"[Tanh,Sigmoid]\".to_string(),\n        );\n        params.insert(\"activation_scale\".to_string(), \"1.0\".to_string());\n        params.insert(\"input_compress_scale\".to_string(), \"not_float\".to_string());\n        params.insert(\"input_compression_type\".to_string(), \"Tanh\".to_string());\n\n        // act\n        let result = NeuralNetParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_NeuralNetParams_from_hashmap_neg3() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"weights\".to_string(), \"[1.0,2.0]\".to_string());\n        params.insert(\"biases\".to_string(), \"[1.0,2.0]\".to_string());\n        params.insert(\n            \"activation_function\".to_string(),\n            \"[Tanh,Sigmoid]\".to_string(),\n        );\n        params.insert(\"activation_scale\".to_string(), \"1.0\".to_string());\n        params.insert(\"input_compress_scale\".to_string(), \"2.0\".to_string());\n        params.insert(\"input_compression_type\".to_string(), \"invalid_enum\".to_string());\n\n        // act\n        let result = NeuralNetParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PeakDetectorParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"atk\".to_string(), \"1.0\".to_string());\n        params.insert(\"dec\".to_string(), \"2.0\".to_string());\n        params.insert(\"model_version\".to_string(), \"FirstOrder\".to_string());\n        params.insert(\"buff\".to_string(), \"1.0\".to_string());\n        params.insert(\"parasitic_ratio\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = PeakDetectorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().atk, 1.0);\n        assert_eq!(result.as_ref().unwrap().dec, 2.0);\n        assert!(result.as_ref().unwrap().model_version == ModelVersion::FirstOrder);\n        assert_eq!(result.as_ref().unwrap().buff, Some(1.0));\n        assert_eq!(result.as_ref().unwrap().parasitic_ratio, Some(1.0));\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PeakDetectorParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"atk\".to_string(), \"not_float\".to_string());\n        params.insert(\"dec\".to_string(), \"2.0\".to_string());\n        params.insert(\"model_version\".to_string(), \"FirstOrder\".to_string());\n        params.insert(\"buff\".to_string(), \"1.0\".to_string());\n        params.insert(\"parasitic_ratio\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = PeakDetectorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PeakDetectorParams_from_hashmap_neg2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"atk\".to_string(), \"1.0\".to_string());\n        params.insert(\"dec\".to_string(), \"not_float\".to_string());\n        params.insert(\"model_version\".to_string(), \"FirstOrder\".to_string());\n        params.insert(\"buff\".to_string(), \"1.0\".to_string());\n        params.insert(\"parasitic_ratio\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = PeakDetectorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PeakDetectorParams_from_hashmap_neg3() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"atk\".to_string(), \"1.0\".to_string());\n        params.insert(\"dec\".to_string(), \"2.0\".to_string());\n        params.insert(\"model_version\".to_string(), \"invalid_enum\".to_string());\n        params.insert(\"buff\".to_string(), \"1.0\".to_string());\n        params.insert(\"parasitic_ratio\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = PeakDetectorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PeakDetectorParams_from_hashmap_neg4() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"atk\".to_string(), \"1.0\".to_string());\n        params.insert(\"dec\".to_string(), \"2.0\".to_string());\n        params.insert(\"model_version\".to_string(), \"FirstOrder\".to_string());\n        params.insert(\"buff\".to_string(), \"not_float\".to_string());\n        params.insert(\"parasitic_ratio\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = PeakDetectorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PeakDetectorParams_from_hashmap_neg5() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"atk\".to_string(), \"1.0\".to_string());\n        params.insert(\"dec\".to_string(), \"2.0\".to_string());\n        params.insert(\"model_version\".to_string(), \"FirstOrder\".to_string());\n        params.insert(\"buff\".to_string(), \"1.0\".to_string());\n        params.insert(\"parasitic_ratio\".to_string(), \"not_float\".to_string());\n\n        // act\n        let result = PeakDetectorParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PGAParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"Av1\".to_string(), \"1.0\".to_string());\n        params.insert(\"Av2\".to_string(), \"2.0\".to_string());\n        params.insert(\"den\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = PGAParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(result.as_ref().unwrap().Av1, 1.0);\n        assert_eq!(result.as_ref().unwrap().Av2, 2.0);\n        assert_eq!(result.as_ref().unwrap().den, Some(1.0));\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PGAParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"Av1\".to_string(), \"not float\".to_string());\n        params.insert(\"Av2\".to_string(), \"2.0\".to_string());\n        params.insert(\"den\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = PGAParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PGAParams_from_hashmap_neg2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"Av1\".to_string(), \"1.0\".to_string());\n        params.insert(\"Av2\".to_string(), \"not float\".to_string());\n        params.insert(\"den\".to_string(), \"1.0\".to_string());\n\n        // act\n        let result = PGAParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_PGAParams_from_hashmap_neg3() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"Av1\".to_string(), \"1.0\".to_string());\n        params.insert(\"Av2\".to_string(), \"2.0\".to_string());\n        params.insert(\"den\".to_string(), \"not float\".to_string());\n\n        // act\n        let result = PGAParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_SynthesizedFilterParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\n            \"coefficients\".to_string(),\n            \"[[1.0,2.0],[3.0,4.0]]\".to_string(),\n        );\n\n        // act\n        let result = SynthesizedFilterParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(\n            result.as_ref().unwrap().coefficients,\n            vec![vec![1.0, 2.0], vec![3.0, 4.0]]\n        );\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_TerminalParams_from_hashmap() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"hardware_pin\".to_string(), \"1.0\".to_string());\n        params.insert(\"is_input\".to_string(), \"true\".to_string());\n        params.insert(\"is_output\".to_string(), \"true\".to_string());\n        params.insert(\"is_ac_coupled\".to_string(), \"true\".to_string());\n        params.insert(\"is_extern\".to_string(), \"true\".to_string());\n\n        // act\n        let result = TerminalParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_ok(), true);\n        assert_eq!(\n            result.as_ref().unwrap().hardware_pin,\n            Some(\"1.0\".to_string())\n        );\n        assert_eq!(result.as_ref().unwrap().is_input, true);\n        assert_eq!(result.as_ref().unwrap().is_output, true);\n        assert_eq!(result.as_ref().unwrap().is_ac_coupled, Some(true));\n        assert_eq!(result.as_ref().unwrap().is_extern, Some(true));\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_TerminalParams_from_hashmap_neg1() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"hardware_pin\".to_string(), \"1.0\".to_string());\n        params.insert(\"is_input\".to_string(), \"not_boolean\".to_string());\n        params.insert(\"is_output\".to_string(), \"true\".to_string());\n        params.insert(\"is_ac_coupled\".to_string(), \"true\".to_string());\n        params.insert(\"is_extern\".to_string(), \"true\".to_string());\n\n        // act\n        let result = TerminalParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_TerminalParams_from_hashmap_neg2() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"hardware_pin\".to_string(), \"1.0\".to_string());\n        params.insert(\"is_input\".to_string(), \"true\".to_string());\n        params.insert(\"is_output\".to_string(), \"not_boolean\".to_string());\n        params.insert(\"is_ac_coupled\".to_string(), \"true\".to_string());\n        params.insert(\"is_extern\".to_string(), \"true\".to_string());\n\n        // act\n        let result = TerminalParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_TerminalParams_from_hashmap_neg3() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"hardware_pin\".to_string(), \"1.0\".to_string());\n        params.insert(\"is_input\".to_string(), \"true\".to_string());\n        params.insert(\"is_output\".to_string(), \"true\".to_string());\n        params.insert(\"is_ac_coupled\".to_string(), \"not_boolean\".to_string());\n        params.insert(\"is_extern\".to_string(), \"true\".to_string());\n\n        // act\n        let result = TerminalParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_TerminalParams_from_hashmap_neg4() {\n        // arrange\n        let mut params: HashMap\u003cString, String\u003e = HashMap::new();\n        params.insert(\"hardware_pin\".to_string(), \"1.0\".to_string());\n        params.insert(\"is_input\".to_string(), \"true\".to_string());\n        params.insert(\"is_output\".to_string(), \"true\".to_string());\n        params.insert(\"is_ac_coupled\".to_string(), \"true\".to_string());\n        params.insert(\"is_extern\".to_string(), \"not_boolean\".to_string());\n\n        // act\n        let result = TerminalParams::from_hashmap(\u0026params);\n\n        // assert\n        assert_eq!(result.as_ref().is_err(), true);\n    }\n\n\n    #[allow(non_snake_case)]\n    #[test]\n    fn test_to_network_json_file() {\n        // arrange\n        let mut test_resources_dir = env::current_dir().unwrap().parent().unwrap().to_path_buf();\n        test_resources_dir.push(\"test_resources\");\n        let file_path = test_resources_dir.join(\"sample_request.json\");\n        let req: SimulateNetworkRequest =\n            serde_json::from_str(\u0026std::fs::read_to_string(file_path).unwrap()).unwrap();\n        let nvo: NetworkVO = req.network;\n\n        // act\n        let result = nvo.to_network();\n\n        // assert\n        assert_eq!(result.is_ok(), true);\n    }\n\n    #[test]\n    fn test_save_network_to_dir() {\n        // arrange\n        let mut test_resources_dir = env::current_dir().unwrap().parent().unwrap().to_path_buf();\n        test_resources_dir.push(\"test_resources\");\n        let file_path = test_resources_dir.join(\"sample_request.json\");\n        let req: SimulateNetworkRequest =\n            serde_json::from_str(\u0026std::fs::read_to_string(file_path.clone()).unwrap()).unwrap();\n        let nvo: NetworkVO = req.network;\n        let tmp_dir = std::env::temp_dir().join(\"aml_simulator_test\");\n\n        // act\n        let result = save_network_to_dir(\u0026nvo.to_network().unwrap(), \u0026tmp_dir);\n\n        // assert\n        assert_eq!(result.is_ok(), true);\n        assert!(tmp_dir.join(\"network.json\").exists());\n    }\n}\n","traces":[{"line":95,"address":[5673152,5673890],"length":1,"stats":{"Line":1},"fn_name":null},{"line":96,"address":[5673174],"length":1,"stats":{"Line":1},"fn_name":null},{"line":97,"address":[5673772,5673372,5673276],"length":1,"stats":{"Line":2},"fn_name":null},{"line":98,"address":[5673929,5673590],"length":1,"stats":{"Line":2},"fn_name":null},{"line":101,"address":[5674102],"length":1,"stats":{"Line":1},"fn_name":null},{"line":102,"address":[5673939],"length":1,"stats":{"Line":1},"fn_name":null},{"line":103,"address":[5673953],"length":1,"stats":{"Line":1},"fn_name":null},{"line":104,"address":[5673984],"length":1,"stats":{"Line":1},"fn_name":null},{"line":105,"address":[5674018],"length":1,"stats":{"Line":1},"fn_name":null},{"line":106,"address":[5674099],"length":1,"stats":{"Line":1},"fn_name":null},{"line":143,"address":[5682826,5674432],"length":1,"stats":{"Line":1},"fn_name":null},{"line":144,"address":[5674576,5674489],"length":1,"stats":{"Line":2},"fn_name":null},{"line":145,"address":[5674895,5674989,5675177,5674598],"length":1,"stats":{"Line":3},"fn_name":null},{"line":146,"address":[5674690,5674788,5674942],"length":1,"stats":{"Line":2},"fn_name":null},{"line":147,"address":[5674721],"length":1,"stats":{"Line":1},"fn_name":null},{"line":150,"address":[5674653,5675791],"length":1,"stats":{"Line":2},"fn_name":null},{"line":151,"address":[5676299,5676055,5676133],"length":1,"stats":{"Line":2},"fn_name":null},{"line":152,"address":[5676102,5675850,5675948],"length":1,"stats":{"Line":2},"fn_name":null},{"line":153,"address":[5675916],"length":1,"stats":{"Line":1},"fn_name":null},{"line":154,"address":[5675881],"length":1,"stats":{"Line":1},"fn_name":null},{"line":159,"address":[5675813,5676601,5676870,5676679,5676337],"length":1,"stats":{"Line":4},"fn_name":null},{"line":160,"address":[5676396,5676494,5676648],"length":1,"stats":{"Line":2},"fn_name":null},{"line":161,"address":[5676427],"length":1,"stats":{"Line":1},"fn_name":null},{"line":164,"address":[5677441,5677250,5676359,5677172,5676908],"length":1,"stats":{"Line":4},"fn_name":null},{"line":165,"address":[5677219,5677065,5676967],"length":1,"stats":{"Line":2},"fn_name":null},{"line":166,"address":[5676998],"length":1,"stats":{"Line":1},"fn_name":null},{"line":169,"address":[5677990,5677743,5677821,5677479,5676930],"length":1,"stats":{"Line":4},"fn_name":null},{"line":170,"address":[5677538,5677636,5677790],"length":1,"stats":{"Line":2},"fn_name":null},{"line":171,"address":[5677569],"length":1,"stats":{"Line":1},"fn_name":null},{"line":174,"address":[5677501,5678028,5678292,5678513,5678370],"length":1,"stats":{"Line":4},"fn_name":null},{"line":175,"address":[5678087,5678185,5678339],"length":1,"stats":{"Line":2},"fn_name":null},{"line":176,"address":[5678118],"length":1,"stats":{"Line":1},"fn_name":null},{"line":179,"address":[5678551,5678806,5679075,5678050,5678884],"length":1,"stats":{"Line":4},"fn_name":null},{"line":180,"address":[5678853,5678607,5678699],"length":1,"stats":{"Line":2},"fn_name":null},{"line":181,"address":[5678635],"length":1,"stats":{"Line":1},"fn_name":null},{"line":184,"address":[5678573,5679110,5679155],"length":1,"stats":{"Line":3},"fn_name":null},{"line":185,"address":[5679132,5679649,5679431,5679176,5679509],"length":1,"stats":{"Line":4},"fn_name":null},{"line":186,"address":[5679478,5679324,5679232],"length":1,"stats":{"Line":2},"fn_name":null},{"line":187,"address":[5679260],"length":1,"stats":{"Line":1},"fn_name":null},{"line":190,"address":[5679684,5679198,5679729],"length":1,"stats":{"Line":3},"fn_name":null},{"line":191,"address":[5679750,5680233,5679706,5680083,5680005],"length":1,"stats":{"Line":4},"fn_name":null},{"line":192,"address":[5679898,5679806,5680052],"length":1,"stats":{"Line":2},"fn_name":null},{"line":193,"address":[5679834],"length":1,"stats":{"Line":1},"fn_name":null},{"line":196,"address":[5680268,5679772,5680767,5680601,5680523],"length":1,"stats":{"Line":4},"fn_name":null},{"line":197,"address":[5680570,5680416,5680324],"length":1,"stats":{"Line":2},"fn_name":null},{"line":198,"address":[5680352],"length":1,"stats":{"Line":1},"fn_name":null},{"line":201,"address":[5680802,5680290],"length":1,"stats":{"Line":2},"fn_name":null},{"line":202,"address":[5681377,5681057,5681135],"length":1,"stats":{"Line":2},"fn_name":null},{"line":203,"address":[5680858,5680950,5681104],"length":1,"stats":{"Line":2},"fn_name":null},{"line":204,"address":[5680886],"length":1,"stats":{"Line":1},"fn_name":null},{"line":208,"address":[5680824,5681412],"length":1,"stats":{"Line":2},"fn_name":null},{"line":209,"address":[5681745,5681667,5681936],"length":1,"stats":{"Line":2},"fn_name":null},{"line":210,"address":[5681560,5681714,5681468],"length":1,"stats":{"Line":2},"fn_name":null},{"line":211,"address":[5681528],"length":1,"stats":{"Line":1},"fn_name":null},{"line":212,"address":[5681496],"length":1,"stats":{"Line":1},"fn_name":null},{"line":217,"address":[5682220,5682539,5681434,5682298,5681971],"length":1,"stats":{"Line":4},"fn_name":null},{"line":218,"address":[5682267,5682021,5682113],"length":1,"stats":{"Line":2},"fn_name":null},{"line":219,"address":[5682049],"length":1,"stats":{"Line":1},"fn_name":null},{"line":223,"address":[5682596,5681985],"length":1,"stats":{"Line":0},"fn_name":null},{"line":230,"address":[5675471],"length":1,"stats":{"Line":1},"fn_name":null},{"line":231,"address":[5675216],"length":1,"stats":{"Line":1},"fn_name":null},{"line":232,"address":[5675252],"length":1,"stats":{"Line":1},"fn_name":null},{"line":233,"address":[5675278],"length":1,"stats":{"Line":1},"fn_name":null},{"line":234,"address":[5675314],"length":1,"stats":{"Line":1},"fn_name":null},{"line":235,"address":[5675350],"length":1,"stats":{"Line":1},"fn_name":null},{"line":236,"address":[5675398],"length":1,"stats":{"Line":1},"fn_name":null},{"line":237,"address":[5675443],"length":1,"stats":{"Line":1},"fn_name":null},{"line":308,"address":[5682864],"length":1,"stats":{"Line":1},"fn_name":null},{"line":309,"address":[5683003,5682902,5683248,5683369,5683209],"length":1,"stats":{"Line":4},"fn_name":null},{"line":311,"address":[5682955],"length":1,"stats":{"Line":1},"fn_name":null},{"line":312,"address":[5682925],"length":1,"stats":{"Line":1},"fn_name":null},{"line":315,"address":[6699872],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":316,"address":[6699927],"length":1,"stats":{"Line":1},"fn_name":null},{"line":317,"address":[6699895],"length":1,"stats":{"Line":1},"fn_name":null},{"line":320,"address":[5683268],"length":1,"stats":{"Line":1},"fn_name":null},{"line":321,"address":[5683617,5683412],"length":1,"stats":{"Line":3},"fn_name":null},{"line":322,"address":[6700023],"length":1,"stats":{"Line":1},"fn_name":null},{"line":323,"address":[6699991],"length":1,"stats":{"Line":1},"fn_name":null},{"line":326,"address":[5683395],"length":1,"stats":{"Line":1},"fn_name":null},{"line":329,"address":[5683670],"length":1,"stats":{"Line":1},"fn_name":null},{"line":331,"address":[5683653],"length":1,"stats":{"Line":1},"fn_name":null},{"line":352,"address":[5683744],"length":1,"stats":{"Line":1},"fn_name":null},{"line":353,"address":[5684396,5683883,5684113,5684152,5683782],"length":1,"stats":{"Line":4},"fn_name":null},{"line":355,"address":[5683835],"length":1,"stats":{"Line":1},"fn_name":null},{"line":356,"address":[5683805],"length":1,"stats":{"Line":1},"fn_name":null},{"line":359,"address":[6700064],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":360,"address":[6700119],"length":1,"stats":{"Line":1},"fn_name":null},{"line":361,"address":[6700087],"length":1,"stats":{"Line":1},"fn_name":null},{"line":364,"address":[5684274,5684173,5684422,5684878,5684591],"length":1,"stats":{"Line":4},"fn_name":null},{"line":366,"address":[5684226],"length":1,"stats":{"Line":1},"fn_name":null},{"line":367,"address":[5684196],"length":1,"stats":{"Line":1},"fn_name":null},{"line":370,"address":[6700160],"length":1,"stats":{"Line":1},"fn_name":"{closure#1}"},{"line":371,"address":[6700215],"length":1,"stats":{"Line":1},"fn_name":null},{"line":372,"address":[6700183],"length":1,"stats":{"Line":1},"fn_name":null},{"line":375,"address":[5684646,5684904,5685017,5684747],"length":1,"stats":{"Line":3},"fn_name":null},{"line":377,"address":[5684699],"length":1,"stats":{"Line":1},"fn_name":null},{"line":378,"address":[5684669],"length":1,"stats":{"Line":1},"fn_name":null},{"line":382,"address":[5684941,5685083],"length":1,"stats":{"Line":2},"fn_name":null},{"line":383,"address":[5685053,5685403],"length":1,"stats":{"Line":2},"fn_name":null},{"line":385,"address":[5685307],"length":1,"stats":{"Line":1},"fn_name":null},{"line":386,"address":[5685277],"length":1,"stats":{"Line":1},"fn_name":null},{"line":391,"address":[5685416,5685575,5685195,5685917,5685096],"length":1,"stats":{"Line":4},"fn_name":null},{"line":393,"address":[5685147],"length":1,"stats":{"Line":1},"fn_name":null},{"line":394,"address":[5685118],"length":1,"stats":{"Line":1},"fn_name":null},{"line":397,"address":[6700256],"length":1,"stats":{"Line":1},"fn_name":"{closure#2}"},{"line":398,"address":[6700300],"length":1,"stats":{"Line":1},"fn_name":null},{"line":399,"address":[6700269],"length":1,"stats":{"Line":1},"fn_name":null},{"line":403,"address":[5685688],"length":1,"stats":{"Line":1},"fn_name":null},{"line":406,"address":[5685637],"length":1,"stats":{"Line":1},"fn_name":null},{"line":408,"address":[5685644],"length":1,"stats":{"Line":1},"fn_name":null},{"line":409,"address":[5685656],"length":1,"stats":{"Line":1},"fn_name":null},{"line":410,"address":[5685664],"length":1,"stats":{"Line":1},"fn_name":null},{"line":411,"address":[5685676],"length":1,"stats":{"Line":1},"fn_name":null},{"line":426,"address":[5685952],"length":1,"stats":{"Line":1},"fn_name":null},{"line":427,"address":[5686336,5686297,5686457,5685990,5686091],"length":1,"stats":{"Line":4},"fn_name":null},{"line":429,"address":[5686043],"length":1,"stats":{"Line":1},"fn_name":null},{"line":430,"address":[5686013],"length":1,"stats":{"Line":1},"fn_name":null},{"line":433,"address":[6700336],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":434,"address":[6700391],"length":1,"stats":{"Line":1},"fn_name":null},{"line":435,"address":[6700359],"length":1,"stats":{"Line":1},"fn_name":null},{"line":438,"address":[5686356],"length":1,"stats":{"Line":1},"fn_name":null},{"line":439,"address":[5686705,5686500],"length":1,"stats":{"Line":3},"fn_name":null},{"line":440,"address":[6700487],"length":1,"stats":{"Line":1},"fn_name":null},{"line":441,"address":[6700455],"length":1,"stats":{"Line":1},"fn_name":null},{"line":444,"address":[5686483],"length":1,"stats":{"Line":1},"fn_name":null},{"line":447,"address":[5686758],"length":1,"stats":{"Line":1},"fn_name":null},{"line":449,"address":[5686741],"length":1,"stats":{"Line":1},"fn_name":null},{"line":465,"address":[5686832],"length":1,"stats":{"Line":1},"fn_name":null},{"line":466,"address":[5686971,5687484,5687201,5687240,5686870],"length":1,"stats":{"Line":4},"fn_name":null},{"line":468,"address":[5686923],"length":1,"stats":{"Line":1},"fn_name":null},{"line":469,"address":[5686893],"length":1,"stats":{"Line":1},"fn_name":null},{"line":472,"address":[6700528],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":473,"address":[6700583],"length":1,"stats":{"Line":1},"fn_name":null},{"line":474,"address":[6700551],"length":1,"stats":{"Line":1},"fn_name":null},{"line":478,"address":[5687362,5687679,5687261,5687966,5687510],"length":1,"stats":{"Line":4},"fn_name":null},{"line":480,"address":[5687314],"length":1,"stats":{"Line":1},"fn_name":null},{"line":481,"address":[5687284],"length":1,"stats":{"Line":1},"fn_name":null},{"line":484,"address":[6700624],"length":1,"stats":{"Line":1},"fn_name":"{closure#1}"},{"line":485,"address":[6700679],"length":1,"stats":{"Line":1},"fn_name":null},{"line":486,"address":[6700647],"length":1,"stats":{"Line":1},"fn_name":null},{"line":489,"address":[5687835,5687734,5687992,5688104],"length":1,"stats":{"Line":3},"fn_name":null},{"line":492,"address":[5687787],"length":1,"stats":{"Line":1},"fn_name":null},{"line":493,"address":[5687757],"length":1,"stats":{"Line":1},"fn_name":null},{"line":497,"address":[5688028,5688166],"length":1,"stats":{"Line":2},"fn_name":null},{"line":498,"address":[5688139,5688303],"length":1,"stats":{"Line":2},"fn_name":null},{"line":499,"address":[5688280,5688348],"length":1,"stats":{"Line":1},"fn_name":null},{"line":500,"address":[5688325,5688397],"length":1,"stats":{"Line":1},"fn_name":null},{"line":501,"address":[5688536,5688370],"length":1,"stats":{"Line":2},"fn_name":null},{"line":502,"address":[5688440],"length":1,"stats":{"Line":1},"fn_name":null},{"line":503,"address":[5688410],"length":1,"stats":{"Line":1},"fn_name":null},{"line":508,"address":[5688198],"length":1,"stats":{"Line":1},"fn_name":null},{"line":511,"address":[5688191],"length":1,"stats":{"Line":1},"fn_name":null},{"line":527,"address":[5688560],"length":1,"stats":{"Line":1},"fn_name":"parse_float_vector"},{"line":529,"address":[5688617],"length":1,"stats":{"Line":1},"fn_name":null},{"line":531,"address":[5688677],"length":1,"stats":{"Line":1},"fn_name":null},{"line":532,"address":[5688688],"length":1,"stats":{"Line":1},"fn_name":null},{"line":536,"address":[5688745],"length":1,"stats":{"Line":1},"fn_name":null},{"line":539,"address":[5688777],"length":1,"stats":{"Line":1},"fn_name":null},{"line":541,"address":[6700765,6700720],"length":1,"stats":{"Line":2},"fn_name":"{closure#0}"},{"line":544,"address":[5688887],"length":1,"stats":{"Line":1},"fn_name":null},{"line":547,"address":[5688944],"length":1,"stats":{"Line":1},"fn_name":"parse_int_vector"},{"line":549,"address":[5689001],"length":1,"stats":{"Line":1},"fn_name":null},{"line":551,"address":[5689061],"length":1,"stats":{"Line":1},"fn_name":null},{"line":552,"address":[5689072],"length":1,"stats":{"Line":0},"fn_name":null},{"line":556,"address":[5689129],"length":1,"stats":{"Line":1},"fn_name":null},{"line":559,"address":[5689161],"length":1,"stats":{"Line":1},"fn_name":null},{"line":561,"address":[6700816,6700861],"length":1,"stats":{"Line":2},"fn_name":"{closure#0}"},{"line":564,"address":[5689271],"length":1,"stats":{"Line":1},"fn_name":null},{"line":568,"address":[5689328,5689938,5689904],"length":1,"stats":{"Line":1},"fn_name":null},{"line":569,"address":[5689866,5689954,5689366,5689815,5689499,5690096,5689700],"length":1,"stats":{"Line":5},"fn_name":null},{"line":570,"address":[5689421],"length":1,"stats":{"Line":1},"fn_name":null},{"line":572,"address":[5689783],"length":1,"stats":{"Line":1},"fn_name":null},{"line":573,"address":[5689617],"length":1,"stats":{"Line":1},"fn_name":null},{"line":576,"address":[5690563,5690663,5690227,5690808,5690614,5690015,5690380,5690448],"length":1,"stats":{"Line":6},"fn_name":null},{"line":577,"address":[5690163],"length":1,"stats":{"Line":1},"fn_name":null},{"line":579,"address":[5690531],"length":1,"stats":{"Line":1},"fn_name":null},{"line":580,"address":[5690463],"length":1,"stats":{"Line":1},"fn_name":null},{"line":583,"address":[5691389,5691289,5691340,5691100,5691534,5690947,5690743,5691174],"length":1,"stats":{"Line":6},"fn_name":null},{"line":584,"address":[5690883],"length":1,"stats":{"Line":1},"fn_name":null},{"line":586,"address":[5691257],"length":1,"stats":{"Line":1},"fn_name":null},{"line":587,"address":[5691189],"length":1,"stats":{"Line":1},"fn_name":null},{"line":590,"address":[5692573,5691469,5692066,5691826,5691900,5692115,5691673,5692015],"length":1,"stats":{"Line":6},"fn_name":null},{"line":591,"address":[5691609],"length":1,"stats":{"Line":1},"fn_name":null},{"line":593,"address":[5691983],"length":1,"stats":{"Line":1},"fn_name":null},{"line":594,"address":[5691915],"length":1,"stats":{"Line":1},"fn_name":null},{"line":597,"address":[5692321],"length":1,"stats":{"Line":1},"fn_name":null},{"line":598,"address":[5692183],"length":1,"stats":{"Line":1},"fn_name":null},{"line":599,"address":[5692225],"length":1,"stats":{"Line":1},"fn_name":null},{"line":600,"address":[5692273],"length":1,"stats":{"Line":1},"fn_name":null},{"line":617,"address":[5692608],"length":1,"stats":{"Line":1},"fn_name":null},{"line":618,"address":[5692741,5692646,5692900],"length":1,"stats":{"Line":2},"fn_name":null},{"line":619,"address":[5692861,5692669],"length":1,"stats":{"Line":1},"fn_name":null},{"line":621,"address":[5692974,5692833],"length":1,"stats":{"Line":2},"fn_name":null},{"line":622,"address":[5693198,5692944],"length":1,"stats":{"Line":1},"fn_name":null},{"line":623,"address":[5693175,5693241],"length":1,"stats":{"Line":1},"fn_name":null},{"line":624,"address":[5693218,5693284],"length":1,"stats":{"Line":1},"fn_name":null},{"line":625,"address":[5693331,5693261],"length":1,"stats":{"Line":2},"fn_name":null},{"line":626,"address":[5693304,5693467],"length":1,"stats":{"Line":2},"fn_name":null},{"line":627,"address":[5693341],"length":1,"stats":{"Line":1},"fn_name":null},{"line":629,"address":[5692984,5693646,5693804,5693477,5693083],"length":1,"stats":{"Line":3},"fn_name":null},{"line":631,"address":[5693035],"length":1,"stats":{"Line":1},"fn_name":null},{"line":632,"address":[5693006],"length":1,"stats":{"Line":1},"fn_name":null},{"line":635,"address":[6700912],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"},{"line":636,"address":[6700967],"length":1,"stats":{"Line":0},"fn_name":null},{"line":637,"address":[6700935],"length":1,"stats":{"Line":0},"fn_name":null},{"line":641,"address":[5693699],"length":1,"stats":{"Line":1},"fn_name":null},{"line":642,"address":[5693695],"length":1,"stats":{"Line":1},"fn_name":null},{"line":657,"address":[5693840],"length":1,"stats":{"Line":1},"fn_name":null},{"line":659,"address":[5693973,5694239,5693878],"length":1,"stats":{"Line":2},"fn_name":null},{"line":661,"address":[5693931],"length":1,"stats":{"Line":1},"fn_name":null},{"line":662,"address":[5693901],"length":1,"stats":{"Line":1},"fn_name":null},{"line":666,"address":[5694102],"length":1,"stats":{"Line":1},"fn_name":null},{"line":667,"address":[5694063],"length":1,"stats":{"Line":1},"fn_name":null},{"line":681,"address":[5694288],"length":1,"stats":{"Line":1},"fn_name":null},{"line":682,"address":[5694672,5694427,5694326,5694633,5694763],"length":1,"stats":{"Line":4},"fn_name":null},{"line":684,"address":[5694379],"length":1,"stats":{"Line":1},"fn_name":null},{"line":685,"address":[5694349],"length":1,"stats":{"Line":1},"fn_name":null},{"line":688,"address":[6701008],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":689,"address":[6701063],"length":1,"stats":{"Line":1},"fn_name":null},{"line":690,"address":[6701031],"length":1,"stats":{"Line":1},"fn_name":null},{"line":694,"address":[5694687],"length":1,"stats":{"Line":1},"fn_name":null},{"line":698,"address":[5694800],"length":1,"stats":{"Line":1},"fn_name":"parse_activation_function_vector"},{"line":700,"address":[5694857],"length":1,"stats":{"Line":1},"fn_name":null},{"line":702,"address":[5694917],"length":1,"stats":{"Line":1},"fn_name":null},{"line":703,"address":[5694928],"length":1,"stats":{"Line":0},"fn_name":null},{"line":707,"address":[5694985],"length":1,"stats":{"Line":1},"fn_name":null},{"line":710,"address":[5695017],"length":1,"stats":{"Line":1},"fn_name":null},{"line":712,"address":[6701149,6701104],"length":1,"stats":{"Line":2},"fn_name":"{closure#0}"},{"line":713,"address":[6701170,6701224],"length":1,"stats":{"Line":2},"fn_name":null},{"line":714,"address":[6701279,6701201],"length":1,"stats":{"Line":2},"fn_name":null},{"line":715,"address":[6701256,6701327],"length":1,"stats":{"Line":2},"fn_name":null},{"line":716,"address":[6701349,6701304],"length":1,"stats":{"Line":2},"fn_name":null},{"line":717,"address":[6701342],"length":1,"stats":{"Line":0},"fn_name":null},{"line":721,"address":[5695127],"length":1,"stats":{"Line":1},"fn_name":null},{"line":738,"address":[5695776,5695184,5695810],"length":1,"stats":{"Line":1},"fn_name":null},{"line":739,"address":[5695738,5695829,5695365,5695980,5695569,5695687,5695234],"length":1,"stats":{"Line":5},"fn_name":null},{"line":740,"address":[5695284],"length":1,"stats":{"Line":1},"fn_name":null},{"line":742,"address":[5695655],"length":1,"stats":{"Line":1},"fn_name":null},{"line":743,"address":[5695483],"length":1,"stats":{"Line":1},"fn_name":null},{"line":746,"address":[5696117,5696725,5696471,5696522,5696571,5696279,5695893,5696356],"length":1,"stats":{"Line":6},"fn_name":null},{"line":747,"address":[5696050],"length":1,"stats":{"Line":1},"fn_name":null},{"line":749,"address":[5696439],"length":1,"stats":{"Line":1},"fn_name":null},{"line":750,"address":[5696371],"length":1,"stats":{"Line":1},"fn_name":null},{"line":753,"address":[5697312,5697097,5697263,5697463,5697023,5696654,5697212,5696867],"length":1,"stats":{"Line":6},"fn_name":null},{"line":755,"address":[5696800],"length":1,"stats":{"Line":1},"fn_name":null},{"line":757,"address":[5697180],"length":1,"stats":{"Line":1},"fn_name":null},{"line":758,"address":[5697112],"length":1,"stats":{"Line":1},"fn_name":null},{"line":762,"address":[5697395,5697543],"length":1,"stats":{"Line":2},"fn_name":null},{"line":763,"address":[5697823,5697597],"length":1,"stats":{"Line":3},"fn_name":null},{"line":764,"address":[6701431],"length":1,"stats":{"Line":1},"fn_name":null},{"line":765,"address":[6701399],"length":1,"stats":{"Line":1},"fn_name":null},{"line":768,"address":[5697580],"length":1,"stats":{"Line":0},"fn_name":null},{"line":770,"address":[5697881],"length":1,"stats":{"Line":1},"fn_name":null},{"line":771,"address":[5697968],"length":1,"stats":{"Line":1},"fn_name":null},{"line":772,"address":[5697984,5698194],"length":1,"stats":{"Line":3},"fn_name":null},{"line":773,"address":[6701527],"length":1,"stats":{"Line":1},"fn_name":null},{"line":774,"address":[6701495],"length":1,"stats":{"Line":1},"fn_name":null},{"line":779,"address":[5697951],"length":1,"stats":{"Line":0},"fn_name":null},{"line":781,"address":[5698233],"length":1,"stats":{"Line":1},"fn_name":null},{"line":783,"address":[5698332],"length":1,"stats":{"Line":1},"fn_name":null},{"line":784,"address":[5698441,5698375],"length":1,"stats":{"Line":2},"fn_name":null},{"line":785,"address":[5698511,5698418,5698472],"length":1,"stats":{"Line":2},"fn_name":null},{"line":786,"address":[5698525,5698488,5698564],"length":1,"stats":{"Line":2},"fn_name":null},{"line":787,"address":[5698578,5698541,5698614],"length":1,"stats":{"Line":2},"fn_name":null},{"line":788,"address":[5698584,5699036],"length":1,"stats":{"Line":2},"fn_name":null},{"line":791,"address":[5698303],"length":1,"stats":{"Line":0},"fn_name":null},{"line":793,"address":[5698820],"length":1,"stats":{"Line":1},"fn_name":null},{"line":794,"address":[5698635],"length":1,"stats":{"Line":1},"fn_name":null},{"line":795,"address":[5698683],"length":1,"stats":{"Line":1},"fn_name":null},{"line":796,"address":[5698731],"length":1,"stats":{"Line":1},"fn_name":null},{"line":797,"address":[5698779],"length":1,"stats":{"Line":1},"fn_name":null},{"line":798,"address":[5698796],"length":1,"stats":{"Line":1},"fn_name":null},{"line":799,"address":[5698813],"length":1,"stats":{"Line":1},"fn_name":null},{"line":817,"address":[5699136],"length":1,"stats":{"Line":1},"fn_name":null},{"line":818,"address":[5699544,5699505,5699275,5699174,5699788],"length":1,"stats":{"Line":4},"fn_name":null},{"line":820,"address":[5699227],"length":1,"stats":{"Line":1},"fn_name":null},{"line":821,"address":[5699197],"length":1,"stats":{"Line":1},"fn_name":null},{"line":824,"address":[6701568],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":825,"address":[6701623],"length":1,"stats":{"Line":1},"fn_name":null},{"line":826,"address":[6701591],"length":1,"stats":{"Line":1},"fn_name":null},{"line":829,"address":[5700270,5699666,5699983,5699814,5699565],"length":1,"stats":{"Line":4},"fn_name":null},{"line":831,"address":[5699618],"length":1,"stats":{"Line":1},"fn_name":null},{"line":832,"address":[5699588],"length":1,"stats":{"Line":1},"fn_name":null},{"line":835,"address":[6701664],"length":1,"stats":{"Line":1},"fn_name":"{closure#1}"},{"line":836,"address":[6701719],"length":1,"stats":{"Line":1},"fn_name":null},{"line":837,"address":[6701687],"length":1,"stats":{"Line":1},"fn_name":null},{"line":840,"address":[5700408,5700296,5700139,5700038],"length":1,"stats":{"Line":3},"fn_name":null},{"line":842,"address":[5700091],"length":1,"stats":{"Line":1},"fn_name":null},{"line":843,"address":[5700061],"length":1,"stats":{"Line":1},"fn_name":null},{"line":847,"address":[5700470,5700332],"length":1,"stats":{"Line":2},"fn_name":null},{"line":848,"address":[5700673,5700443],"length":1,"stats":{"Line":2},"fn_name":null},{"line":850,"address":[5700577],"length":1,"stats":{"Line":1},"fn_name":null},{"line":851,"address":[5700547],"length":1,"stats":{"Line":1},"fn_name":null},{"line":856,"address":[5700483],"length":1,"stats":{"Line":1},"fn_name":null},{"line":857,"address":[5700703,5700908],"length":1,"stats":{"Line":3},"fn_name":null},{"line":858,"address":[6701815],"length":1,"stats":{"Line":1},"fn_name":null},{"line":859,"address":[6701783],"length":1,"stats":{"Line":1},"fn_name":null},{"line":862,"address":[5700686],"length":1,"stats":{"Line":1},"fn_name":null},{"line":864,"address":[5700939],"length":1,"stats":{"Line":1},"fn_name":null},{"line":865,"address":[5701011,5701216],"length":1,"stats":{"Line":3},"fn_name":null},{"line":866,"address":[6701911],"length":1,"stats":{"Line":1},"fn_name":null},{"line":867,"address":[6701879],"length":1,"stats":{"Line":1},"fn_name":null},{"line":870,"address":[5700994],"length":1,"stats":{"Line":1},"fn_name":null},{"line":872,"address":[5701300],"length":1,"stats":{"Line":1},"fn_name":null},{"line":875,"address":[5701259],"length":1,"stats":{"Line":1},"fn_name":null},{"line":876,"address":[5701266],"length":1,"stats":{"Line":1},"fn_name":null},{"line":877,"address":[5701283],"length":1,"stats":{"Line":1},"fn_name":null},{"line":895,"address":[5701392],"length":1,"stats":{"Line":1},"fn_name":null},{"line":896,"address":[5701430,5701755,5701794,5701531,5702038],"length":1,"stats":{"Line":4},"fn_name":null},{"line":898,"address":[5701483],"length":1,"stats":{"Line":1},"fn_name":null},{"line":899,"address":[5701453],"length":1,"stats":{"Line":1},"fn_name":null},{"line":902,"address":[6701952],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":903,"address":[6702007],"length":1,"stats":{"Line":1},"fn_name":null},{"line":904,"address":[6701975],"length":1,"stats":{"Line":1},"fn_name":null},{"line":907,"address":[5702398,5702064,5702233,5701916,5701815],"length":1,"stats":{"Line":4},"fn_name":null},{"line":909,"address":[5701868],"length":1,"stats":{"Line":1},"fn_name":null},{"line":910,"address":[5701838],"length":1,"stats":{"Line":1},"fn_name":null},{"line":913,"address":[6702048],"length":1,"stats":{"Line":1},"fn_name":"{closure#1}"},{"line":914,"address":[6702103],"length":1,"stats":{"Line":1},"fn_name":null},{"line":915,"address":[6702071],"length":1,"stats":{"Line":1},"fn_name":null},{"line":918,"address":[5702288],"length":1,"stats":{"Line":1},"fn_name":null},{"line":919,"address":[5702441,5702646],"length":1,"stats":{"Line":3},"fn_name":null},{"line":920,"address":[6702199],"length":1,"stats":{"Line":1},"fn_name":null},{"line":921,"address":[6702167],"length":1,"stats":{"Line":1},"fn_name":null},{"line":924,"address":[5702424],"length":1,"stats":{"Line":1},"fn_name":null},{"line":926,"address":[5702706],"length":1,"stats":{"Line":1},"fn_name":null},{"line":929,"address":[5702689],"length":1,"stats":{"Line":1},"fn_name":null},{"line":934,"address":[5702800],"length":1,"stats":{"Line":1},"fn_name":"parse_vector_vector_floats"},{"line":936,"address":[5702859],"length":1,"stats":{"Line":1},"fn_name":null},{"line":938,"address":[5702919],"length":1,"stats":{"Line":1},"fn_name":null},{"line":939,"address":[5702930],"length":1,"stats":{"Line":0},"fn_name":null},{"line":943,"address":[5702987],"length":1,"stats":{"Line":1},"fn_name":null},{"line":946,"address":[5703027],"length":1,"stats":{"Line":3},"fn_name":null},{"line":948,"address":[5703137],"length":1,"stats":{"Line":1},"fn_name":null},{"line":960,"address":[5703754,5703200,5703723],"length":1,"stats":{"Line":1},"fn_name":null},{"line":961,"address":[5703770,5703949,5703649,5703694,5703534,5703345,5703236],"length":1,"stats":{"Line":5},"fn_name":null},{"line":962,"address":[5703267],"length":1,"stats":{"Line":1},"fn_name":null},{"line":964,"address":[5703617],"length":1,"stats":{"Line":1},"fn_name":null},{"line":965,"address":[5703454],"length":1,"stats":{"Line":1},"fn_name":null},{"line":968,"address":[5703809],"length":1,"stats":{"Line":1},"fn_name":null},{"line":987,"address":[5703984,5705882],"length":1,"stats":{"Line":1},"fn_name":null},{"line":988,"address":[5704034],"length":1,"stats":{"Line":1},"fn_name":null},{"line":989,"address":[5704103],"length":1,"stats":{"Line":1},"fn_name":null},{"line":990,"address":[5704089],"length":1,"stats":{"Line":1},"fn_name":null},{"line":992,"address":[5704330,5704740,5704489,5704188,5704549],"length":1,"stats":{"Line":4},"fn_name":null},{"line":994,"address":[5704298],"length":1,"stats":{"Line":1},"fn_name":null},{"line":995,"address":[5704263],"length":1,"stats":{"Line":1},"fn_name":null},{"line":998,"address":[6702320],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":999,"address":[6702364],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1000,"address":[6702333],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1003,"address":[5704835,5705223,5704672,5704991],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1005,"address":[5704803],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1006,"address":[5704771],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1009,"address":[6702400],"length":1,"stats":{"Line":1},"fn_name":"{closure#1}"},{"line":1010,"address":[6702444],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1011,"address":[6702413],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1014,"address":[5705155,5705259],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1015,"address":[5705309,5705519],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1016,"address":[6702524],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1017,"address":[6702493],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1020,"address":[5705296],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1022,"address":[5705558],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1023,"address":[5705851,5705641],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1024,"address":[6702604],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1025,"address":[6702573],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1028,"address":[5705628],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1030,"address":[5706004],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1031,"address":[5705942],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1034,"address":[5705990],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1035,"address":[5705997],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1132,"address":[5706144],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1134,"address":[5706157],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1138,"address":[5706224],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1139,"address":[5706241],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1149,"address":[5706987,5706272],"length":1,"stats":{"Line":2},"fn_name":"get_output"},{"line":1150,"address":[5706310,5706563,5706930,5706607,5706358],"length":1,"stats":{"Line":6},"fn_name":null},{"line":1151,"address":[5706531],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1154,"address":[5706904],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1156,"address":[5706826],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1172,"address":[5707024,5708898,5708849],"length":1,"stats":{"Line":2},"fn_name":"save_network_to_dir"},{"line":1173,"address":[5707285,5707109],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1175,"address":[5707402,5707180,5707573],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1176,"address":[6703384,6703207],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1178,"address":[6703142],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1182,"address":[5707466],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1183,"address":[5707643,5707703,5707991],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1188,"address":[5707959],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1190,"address":[5707931,5708260,5708095],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1191,"address":[6703783,6703960],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1193,"address":[6703718],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1198,"address":[5708451,5708196,5708315],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1199,"address":[5708419],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1200,"address":[5708387,5708487,5708624],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1201,"address":[5708592],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1203,"address":[5708684,5708567],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1209,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":1210,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":1211,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":1214,"address":[6705487,6704432],"length":1,"stats":{"Line":1},"fn_name":"sidecar_simulate_network\u003caml_connect::aml_core::network_manager::AmlSimulatorSidecar\u003e"},{"line":1222,"address":[6708864,6709348,6704624,6709203,6704851],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}\u003caml_connect::aml_core::network_manager::AmlSimulatorSidecar\u003e"},{"line":1223,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1224,"address":[6709002,6709214,6708891],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1225,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1226,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1227,"address":[6708983],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1231,"address":[6704767],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1232,"address":[6704983],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1233,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1234,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1238,"address":[6705310,6705449,6704896],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1239,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1241,"address":[6705513,6705468,6705373,6705250],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1243,"address":[6705622],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1244,"address":[6705877],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1245,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1246,"address":[6705734],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1250,"address":[6706320,6705696],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1251,"address":[6706549,6706776],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1253,"address":[6707113,6706750,6707005,6707554,6707415,6707346,6706942,6707185],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1254,"address":[6706907],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1255,"address":[6706978],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1256,"address":[6707046],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1257,"address":[6707086],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1258,"address":[6707239,6707165],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1259,"address":[6707319],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1260,"address":[6707466,6707398],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1263,"address":[6708160,6708264,6707921],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1264,"address":[6707842],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1265,"address":[6709624,6709376,6709769],"length":1,"stats":{"Line":0},"fn_name":"{closure#1}\u003caml_connect::aml_core::network_manager::AmlSimulatorSidecar\u003e"},{"line":1266,"address":[6709458,6709635],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1267,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1268,"address":[6709398],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1273,"address":[6708384],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1275,"address":[6708427,6708719,6710058,6709792],"length":1,"stats":{"Line":1},"fn_name":"{closure#2}\u003caml_connect::aml_core::network_manager::AmlSimulatorSidecar\u003e"},{"line":1276,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1277,"address":[6709819,6709896],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1278,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1279,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1283,"address":[6708625],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":400,"coverable":439},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","project_manager","create_project.rs"],"content":"use std::path::PathBuf;\n\nuse diesel::{ExpressionMethods, QueryDsl, RunQueryDsl};\n\nuse crate::aml_core::{\n    db_adapter::{models::NewProject, models::Project, schema::projects, DbConn},\n    file_data_manager, AppError,\n};\n\nuse super::{\n    get_projects::{project_exists_by_slug, transform_project_for_response},\n    CreateProjectRequest, CreateProjectResponse, CreateProjectResponseResult, ProjectDetails,\n    ProjectManagerError,\n};\n\npub fn create_project(\n    req: \u0026CreateProjectRequest,\n    app_dir: \u0026PathBuf,\n    conn: \u0026mut DbConn\n) -\u003e CreateProjectResponseResult {\n    log::info!(\"create_project request received\");\n\n    let match_count = projects::table\n        .filter(projects::name.eq(req.name.as_str()))\n        .count()\n        .get_result::\u003ci64\u003e(conn);\n\n    match match_count {\n        Ok(count) =\u003e {\n            if count \u003e= 1 {\n                let error_message = format!(\"Project with name '{}' already exists\", req.name);\n                return Err(AppError::ProjectManagerError(\n                    ProjectManagerError::ProjectAlreadyExists(error_message.into()),\n                ));\n            } else {\n                log::info!(\"project doesnt exist, can create\");\n                let new_slug_result = generate_unique_slug(\u0026req.name, app_dir, conn);\n                match new_slug_result {\n                    Ok(new_slug) =\u003e {\n                        let new_project: NewProject = NewProject {\n                            slug: new_slug.to_owned(),\n                            name: req.name.to_owned(),\n                            description: req.description.as_ref().map(|desc| desc.clone()),\n                        };\n\n                        let insertion_result = diesel::insert_into(projects::table)\n                            .values(\u0026new_project)\n                            .returning((\n                                projects::id,\n                                projects::slug,\n                                projects::name,\n                                projects::description,\n                                projects::modified_at,\n                                projects::created_at,\n                            ))\n                            .get_result(conn);\n\n                        let project: Project = match insertion_result {\n                            Ok((id, slug, name, description, modified_at, created_at)) =\u003e Project {\n                                id,\n                                slug,\n                                name,\n                                description,\n                                modified_at,\n                                created_at,\n                            },\n                            Err(error) =\u003e {\n                                return Err(AppError::ProjectManagerError(\n                                    ProjectManagerError::InternalError(error.to_string()),\n                                ));\n                            }\n                        };\n\n                        let project_details: ProjectDetails =\n                            transform_project_for_response(project);\n\n                        let _ = file_data_manager::create_project_dir(\u0026new_slug, app_dir).map_err(\n                            |error| {\n                                AppError::ProjectManagerError(\n                                    ProjectManagerError::ProjectAlreadyExists(error.to_string()),\n                                )\n                            },\n                        );\n\n                        //panic!(\"Could not create project dir :{:?}\", e); //TODO: return error instead of panic\n\n                        log::info!(\"create_project response: {:?}\", project_details);\n\n                        return Ok(CreateProjectResponse {\n                            project: project_details,\n                        });\n                    }\n                    Err(error) =\u003e {\n                        return Err(AppError::ProjectManagerError(error));\n                    }\n                }\n            }\n        }\n        Err(e) =\u003e Err(AppError::InternalError(e.to_string())),\n    }\n}\n\n//slug generation logic\n//trim leading / trailing whitespace, convert to lowercase, and use hyphenate\n//check both database and local file system whether slug exists\n//will add -\u003ccounter\u003e to project_slug until its unique\npub fn generate_unique_slug(\n    project_name: \u0026str,\n    app_dir: \u0026PathBuf,\n    conn: \u0026mut DbConn,\n) -\u003e Result\u003cString, ProjectManagerError\u003e {\n    let base_slug = project_name.trim().to_lowercase().replace(\" \", \"-\");\n    let mut new_slug = base_slug.clone();\n\n    let mut counter = 1;\n    while project_exists_by_slug(\u0026new_slug, conn)? || project_exists_in_fs(app_dir, \u0026new_slug) {\n        new_slug = format!(\"{}-{}\", base_slug, counter);\n        counter += 1;\n    }\n\n    Ok(new_slug)\n}\n\nfn project_exists_in_fs(app_dir: \u0026PathBuf, project_slug: \u0026str) -\u003e bool {\n    let project_dir_path = app_dir.join(project_slug);\n\n    std::fs::metadata(\u0026project_dir_path)\n        .map(|metadata| metadata.is_dir())\n        .unwrap_or(false)\n}\n","traces":[{"line":16,"address":[5937697,5937072],"length":1,"stats":{"Line":1},"fn_name":"create_project"},{"line":21,"address":[5937197,5937342,5937128],"length":1,"stats":{"Line":2},"fn_name":null},{"line":23,"address":[5937275],"length":1,"stats":{"Line":1},"fn_name":null},{"line":24,"address":[5937248],"length":1,"stats":{"Line":1},"fn_name":null},{"line":28,"address":[5937315],"length":1,"stats":{"Line":1},"fn_name":null},{"line":29,"address":[5937431],"length":1,"stats":{"Line":1},"fn_name":null},{"line":30,"address":[5937447],"length":1,"stats":{"Line":1},"fn_name":null},{"line":31,"address":[5937787],"length":1,"stats":{"Line":0},"fn_name":null},{"line":32,"address":[5938008],"length":1,"stats":{"Line":0},"fn_name":null},{"line":33,"address":[5937921],"length":1,"stats":{"Line":0},"fn_name":null},{"line":36,"address":[5938124,5937736,5938283,5938162],"length":1,"stats":{"Line":2},"fn_name":null},{"line":37,"address":[5938216],"length":1,"stats":{"Line":1},"fn_name":null},{"line":38,"address":[5938252],"length":1,"stats":{"Line":1},"fn_name":null},{"line":39,"address":[5938375],"length":1,"stats":{"Line":1},"fn_name":null},{"line":41,"address":[5938407],"length":1,"stats":{"Line":1},"fn_name":null},{"line":42,"address":[5938671],"length":1,"stats":{"Line":1},"fn_name":null},{"line":43,"address":[5938802,5938740],"length":1,"stats":{"Line":4},"fn_name":null},{"line":46,"address":[5938917,5938972],"length":1,"stats":{"Line":2},"fn_name":null},{"line":58,"address":[5939058],"length":1,"stats":{"Line":1},"fn_name":null},{"line":67,"address":[5939454],"length":1,"stats":{"Line":0},"fn_name":null},{"line":68,"address":[5939622],"length":1,"stats":{"Line":0},"fn_name":null},{"line":69,"address":[5939578,5939502],"length":1,"stats":{"Line":0},"fn_name":null},{"line":74,"address":[5939424],"length":1,"stats":{"Line":1},"fn_name":null},{"line":77,"address":[5939759,5939835],"length":1,"stats":{"Line":2},"fn_name":null},{"line":78,"address":[6900560,6900741],"length":1,"stats":{"Line":0},"fn_name":"{closure#1}"},{"line":79,"address":[6900677],"length":1,"stats":{"Line":0},"fn_name":null},{"line":80,"address":[6900578,6900638],"length":1,"stats":{"Line":0},"fn_name":null},{"line":87,"address":[5939998,5939894,5940140],"length":1,"stats":{"Line":2},"fn_name":null},{"line":89,"address":[5940086],"length":1,"stats":{"Line":1},"fn_name":null},{"line":90,"address":[5940060],"length":1,"stats":{"Line":1},"fn_name":null},{"line":93,"address":[5938442],"length":1,"stats":{"Line":0},"fn_name":null},{"line":94,"address":[5938506],"length":1,"stats":{"Line":0},"fn_name":null},{"line":99,"address":[5937462],"length":1,"stats":{"Line":0},"fn_name":null},{"line":107,"address":[5940336,5940622],"length":1,"stats":{"Line":1},"fn_name":"generate_unique_slug"},{"line":112,"address":[5940433],"length":1,"stats":{"Line":1},"fn_name":null},{"line":113,"address":[5940689],"length":1,"stats":{"Line":1},"fn_name":null},{"line":115,"address":[5940716],"length":1,"stats":{"Line":1},"fn_name":null},{"line":116,"address":[5940808,5941629,5941032,5940735],"length":1,"stats":{"Line":3},"fn_name":null},{"line":117,"address":[5941232],"length":1,"stats":{"Line":0},"fn_name":null},{"line":118,"address":[5941598,5941634],"length":1,"stats":{"Line":0},"fn_name":null},{"line":121,"address":[5941122],"length":1,"stats":{"Line":1},"fn_name":null},{"line":124,"address":[5941680,5941888],"length":1,"stats":{"Line":1},"fn_name":"project_exists_in_fs"},{"line":125,"address":[5941721],"length":1,"stats":{"Line":1},"fn_name":null},{"line":127,"address":[5941817,5941763],"length":1,"stats":{"Line":2},"fn_name":null},{"line":128,"address":[6900768,6900769],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"}],"covered":30,"coverable":45},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","project_manager","delete_project.rs"],"content":"use diesel::{QueryDsl, RunQueryDsl};\n\nuse crate::aml_core::{\n    db_adapter::{models::Project, schema::projects, DbConn},\n    file_data_manager,\n    project_manager::{DeleteProjectResponse, ProjectManagerError},\n    AppError,\n};\n\nuse super::{DeleteProjectRequest, DeleteProjectResponseResult};\n\npub fn delete_project(\n    req: \u0026DeleteProjectRequest,\n    app_dir: \u0026std::path::PathBuf,\n    conn: \u0026mut DbConn,\n) -\u003e DeleteProjectResponseResult {\n    log::info!(\"delete_project request received\");\n\n    let get_project_result = projects::table.find(req.id).first::\u003cProject\u003e(conn);\n\n    let project = match get_project_result {\n        Ok(project) =\u003e project,\n        Err(diesel::result::Error::NotFound) =\u003e {\n            log::warn!(\"project not found\");\n            return Err(AppError::ProjectManagerError(\n                ProjectManagerError::ProjectNotFound(\"Project not found\".to_string()),\n            ));\n        }\n        Err(_) =\u003e {\n            return Err(AppError::ProjectManagerError(\n                ProjectManagerError::InternalError(\"Error getting project\".to_string()),\n            ))\n        }\n    };\n\n    match diesel::delete(\u0026project).execute(conn) {\n        Ok(_) =\u003e {\n            log::info!(\"project deleted\");\n            // TODO: delete audio file metadata if needed from DB\n            match file_data_manager::delete_project_dir(\u0026project.slug, app_dir) {\n                Ok(_) =\u003e log::info!(\"project directory deleted for {}\", \u0026project.slug),\n                Err(e) =\u003e {\n                    log::error!(\"error deleting project files - disk might not be in sync with database: {}\", e);\n                    return Err(AppError::ProjectManagerError(\n                        ProjectManagerError::InternalError(e.to_string()),\n                    ));\n                }\n            }\n            Ok(DeleteProjectResponse {})\n        }\n        Err(error) =\u003e {\n            log::error!(\"error deleting project: {}\", error);\n            Err(AppError::ProjectManagerError(\n                ProjectManagerError::InternalError(error.to_string()),\n            ))\n        }\n    }\n}\n","traces":[{"line":12,"address":[6273724,6272208],"length":1,"stats":{"Line":1},"fn_name":"delete_project"},{"line":17,"address":[6272279,6272475,6272354],"length":1,"stats":{"Line":2},"fn_name":null},{"line":19,"address":[6272411],"length":1,"stats":{"Line":1},"fn_name":null},{"line":21,"address":[6272441,6272817],"length":1,"stats":{"Line":1},"fn_name":null},{"line":22,"address":[6272567],"length":1,"stats":{"Line":1},"fn_name":null},{"line":24,"address":[6138315,6138410,6137909,6138251],"length":1,"stats":{"Line":0},"fn_name":null},{"line":25,"address":[6273496],"length":1,"stats":{"Line":0},"fn_name":null},{"line":26,"address":[6138514,6138383],"length":1,"stats":{"Line":0},"fn_name":null},{"line":30,"address":[6138112],"length":1,"stats":{"Line":0},"fn_name":null},{"line":31,"address":[6138052,6137957],"length":1,"stats":{"Line":0},"fn_name":null},{"line":36,"address":[6137865,6138765],"length":1,"stats":{"Line":2},"fn_name":null},{"line":38,"address":[6274647,6273765,6274502,6274560],"length":1,"stats":{"Line":3},"fn_name":null},{"line":40,"address":[6274761,6274622],"length":1,"stats":{"Line":2},"fn_name":null},{"line":41,"address":[6140674,6140732,6139922,6140814],"length":1,"stats":{"Line":3},"fn_name":null},{"line":42,"address":[6139967],"length":1,"stats":{"Line":0},"fn_name":null},{"line":43,"address":[6140073,6140223,6139983,6140131],"length":1,"stats":{"Line":0},"fn_name":null},{"line":44,"address":[6140441],"length":1,"stats":{"Line":0},"fn_name":null},{"line":45,"address":[6140193,6140397],"length":1,"stats":{"Line":0},"fn_name":null},{"line":49,"address":[6140802],"length":1,"stats":{"Line":1},"fn_name":null},{"line":51,"address":[6138904],"length":1,"stats":{"Line":0},"fn_name":null},{"line":52,"address":[6139210,6139112,6139048,6138952],"length":1,"stats":{"Line":0},"fn_name":null},{"line":53,"address":[6139434],"length":1,"stats":{"Line":0},"fn_name":null},{"line":54,"address":[6139390,6139180],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":10,"coverable":23},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","project_manager","get_projects.rs"],"content":"use diesel::{result::Error::NotFound, ExpressionMethods, QueryDsl, RunQueryDsl};\n\nuse crate::aml_core::{\n    db_adapter::{models::Project, schema::projects, DbConn},\n    AppError,\n};\n\nuse super::{\n    GetProjectsResponse, GetProjectsResponseResult, ProjectDetails,\n    ProjectManagerError,\n};\n\npub fn get_projects(conn: \u0026mut DbConn) -\u003e GetProjectsResponseResult {\n    let projects = projects::table\n        .load::\u003cProject\u003e(conn)\n        .map_err(|e| ProjectManagerError::InternalError(e.to_string()));\n\n    let project_details = match projects {\n        Ok(projects) =\u003e {\n            let project_details: Vec\u003cProjectDetails\u003e = projects\n                .into_iter()\n                .map(|p| transform_project_for_response(p.clone()))\n                .collect();\n            project_details\n        }\n        Err(e) =\u003e {\n            log::error!(\"Error getting projects: {}\", e);\n            return Err(AppError::ProjectManagerError(e)).into();\n        }\n    };\n\n    Ok(GetProjectsResponse {\n        projects: project_details,\n    })\n}\n\npub fn transform_project_for_response(db_project: Project) -\u003e ProjectDetails {\n    ProjectDetails {\n        id: db_project.id,\n        slug: db_project.slug,\n        name: db_project.name,\n        description: db_project.description,\n        created_at: db_project.created_at,\n        modified_at: db_project.modified_at,\n    }\n}\n\npub fn get_project(proj_id: i32, conn: \u0026mut DbConn) -\u003e Result\u003cProject, ProjectManagerError\u003e {\n    if !project_exists(proj_id, conn)? {\n        log::error!(\"Project not found\");\n        return Err(ProjectManagerError::ProjectNotFound(proj_id.to_string()));\n    }\n    let found_project = projects::table\n        .find(proj_id)\n        .first::\u003cProject\u003e(conn)\n        .map_err(|e| ProjectManagerError::InternalError(e.to_string()))?;\n    Ok(found_project)\n}\n\npub fn project_exists(proj_id: i32, db_conn: \u0026mut DbConn) -\u003e Result\u003cbool, ProjectManagerError\u003e {\n    let found_project = projects::table.find(proj_id).first::\u003cProject\u003e(db_conn);\n\n    match found_project {\n        Ok(_) =\u003e Ok(true),\n        Err(NotFound) =\u003e Ok(false),\n        Err(e) =\u003e {\n            eprintln!(\"Error finding project - {}\", proj_id);\n            Err(ProjectManagerError::InternalError(e.to_string()))\n            // Err(anyhow::anyhow!(\"Error finding project - {}\", proj_id))\n        }\n    }\n}\n\n// TODO: This should be removed once the front end API switches to using ID instead of slug\npub fn get_project_by_slug(\n    proj_slug: \u0026str,\n    conn: \u0026mut DbConn,\n) -\u003e Result\u003cProject, ProjectManagerError\u003e {\n    if !project_exists_by_slug(proj_slug, conn)? {\n        log::error!(\"Project not found\");\n        return Err(ProjectManagerError::ProjectNotFound(proj_slug.to_string()));\n    }\n    let found_project = projects::table\n        .filter(projects::slug.eq(proj_slug))\n        .first::\u003cProject\u003e(conn)\n        .map_err(|e| ProjectManagerError::InternalError(e.to_string()))?;\n    Ok(found_project)\n}\n\npub fn project_exists_by_slug(\n    proj_slug: \u0026str,\n    db_conn: \u0026mut DbConn,\n) -\u003e Result\u003cbool, ProjectManagerError\u003e {\n    let found_project = projects::table\n        .filter(projects::slug.eq(proj_slug))\n        .first::\u003cProject\u003e(db_conn);\n\n    match found_project {\n        Ok(_) =\u003e Ok(true),\n        Err(NotFound) =\u003e Ok(false),\n        Err(e) =\u003e {\n            eprintln!(\"Error finding project - {}\", proj_slug);\n            Err(ProjectManagerError::InternalError(e.to_string()))\n        }\n    }\n}\n","traces":[{"line":13,"address":[6141728,6142683,6142649],"length":1,"stats":{"Line":1},"fn_name":"get_projects"},{"line":14,"address":[6141753],"length":1,"stats":{"Line":1},"fn_name":null},{"line":16,"address":[5497618,5497600],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"},{"line":18,"address":[6141788],"length":1,"stats":{"Line":1},"fn_name":null},{"line":19,"address":[6141815],"length":1,"stats":{"Line":1},"fn_name":null},{"line":20,"address":[6141854],"length":1,"stats":{"Line":1},"fn_name":null},{"line":22,"address":[5497801,5497760],"length":1,"stats":{"Line":2},"fn_name":"{closure#1}"},{"line":24,"address":[6141925],"length":1,"stats":{"Line":1},"fn_name":null},{"line":26,"address":[6142069],"length":1,"stats":{"Line":0},"fn_name":null},{"line":27,"address":[6142473,6142103,6142190,6142248],"length":1,"stats":{"Line":0},"fn_name":null},{"line":28,"address":[6142319],"length":1,"stats":{"Line":0},"fn_name":null},{"line":32,"address":[6141973],"length":1,"stats":{"Line":1},"fn_name":null},{"line":37,"address":[6142720],"length":1,"stats":{"Line":1},"fn_name":"transform_project_for_response"},{"line":39,"address":[6142723],"length":1,"stats":{"Line":1},"fn_name":null},{"line":40,"address":[6142726],"length":1,"stats":{"Line":1},"fn_name":null},{"line":41,"address":[6142753],"length":1,"stats":{"Line":1},"fn_name":null},{"line":42,"address":[6142780],"length":1,"stats":{"Line":1},"fn_name":null},{"line":43,"address":[6142806],"length":1,"stats":{"Line":1},"fn_name":null},{"line":44,"address":[6142822],"length":1,"stats":{"Line":1},"fn_name":null},{"line":48,"address":[6142960],"length":1,"stats":{"Line":1},"fn_name":"get_project"},{"line":49,"address":[6142994],"length":1,"stats":{"Line":1},"fn_name":null},{"line":50,"address":[6143343,6143268,6143540],"length":1,"stats":{"Line":2},"fn_name":null},{"line":51,"address":[6143396],"length":1,"stats":{"Line":1},"fn_name":null},{"line":53,"address":[6143755,6143632,6143155],"length":1,"stats":{"Line":2},"fn_name":null},{"line":56,"address":[5497920,5497938],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"},{"line":57,"address":[6143663],"length":1,"stats":{"Line":1},"fn_name":null},{"line":60,"address":[6143792,6144362,6144273],"length":1,"stats":{"Line":1},"fn_name":"project_exists"},{"line":61,"address":[6143826],"length":1,"stats":{"Line":1},"fn_name":null},{"line":63,"address":[6143917,6143870],"length":1,"stats":{"Line":2},"fn_name":null},{"line":64,"address":[6143901],"length":1,"stats":{"Line":1},"fn_name":null},{"line":65,"address":[6143933],"length":1,"stats":{"Line":1},"fn_name":null},{"line":66,"address":[6143949],"length":1,"stats":{"Line":0},"fn_name":null},{"line":67,"address":[6143999,6144079],"length":1,"stats":{"Line":0},"fn_name":null},{"line":68,"address":[6144155],"length":1,"stats":{"Line":0},"fn_name":null},{"line":75,"address":[6144464],"length":1,"stats":{"Line":1},"fn_name":"get_project_by_slug"},{"line":79,"address":[6144519],"length":1,"stats":{"Line":1},"fn_name":null},{"line":80,"address":[6145083,6144807,6144882],"length":1,"stats":{"Line":0},"fn_name":null},{"line":81,"address":[6144945],"length":1,"stats":{"Line":0},"fn_name":null},{"line":83,"address":[6144698,6145175,6145298],"length":1,"stats":{"Line":2},"fn_name":null},{"line":84,"address":[6144686],"length":1,"stats":{"Line":1},"fn_name":null},{"line":86,"address":[5498080,5498098],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"},{"line":87,"address":[6145206],"length":1,"stats":{"Line":1},"fn_name":null},{"line":90,"address":[6145832,6145921,6145328],"length":1,"stats":{"Line":3},"fn_name":"project_exists_by_slug"},{"line":94,"address":[6145398,6145368],"length":1,"stats":{"Line":6},"fn_name":null},{"line":95,"address":[6145376],"length":1,"stats":{"Line":3},"fn_name":null},{"line":98,"address":[6145431,6145478],"length":1,"stats":{"Line":6},"fn_name":null},{"line":99,"address":[6145462],"length":1,"stats":{"Line":2},"fn_name":null},{"line":100,"address":[6145494],"length":1,"stats":{"Line":3},"fn_name":null},{"line":101,"address":[6145510],"length":1,"stats":{"Line":0},"fn_name":null},{"line":102,"address":[6145560,6145638],"length":1,"stats":{"Line":0},"fn_name":null},{"line":103,"address":[6145714],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":37,"coverable":51},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","project_manager","mod.rs"],"content":"use serde::{Deserialize, Serialize};\nuse thiserror::Error;\nuse ts_rs::TS;\n\nuse super::{date_time::AMLDateTime, AppError};\n\npub mod create_project;\npub mod delete_project;\npub mod get_projects;\npub mod update_project;\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct ProjectDetails {\n    pub id: i32,\n    pub slug: String,\n    pub name: String,\n    pub description: Option\u003cString\u003e,\n    pub modified_at: AMLDateTime,\n    pub created_at: AMLDateTime,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct CreateProjectRequest {\n    pub name: String,\n    pub description: Option\u003cString\u003e,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct CreateProjectResponse {\n    pub project: ProjectDetails,\n}\n\npub type CreateProjectResponseResult = Result\u003cCreateProjectResponse, AppError\u003e;\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct UpdateProjectRequest {\n    pub id: i32,\n    pub name: Option\u003cString\u003e,\n    pub description: Option\u003cString\u003e,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct UpdateProjectResponse {\n    pub project: ProjectDetails,\n}\n\npub type UpdateProjectResponseResult = Result\u003cUpdateProjectResponse, AppError\u003e;\n\n\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct GetProjectResponse {\n    pub project: ProjectDetails,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct GetProjectsRequest {}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct GetProjectsResponse {\n    pub projects: Vec\u003cProjectDetails\u003e,\n}\n\npub type GetProjectsResponseResult = Result\u003cGetProjectsResponse, AppError\u003e;\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct DeleteProjectRequest {\n    pub id: i32,\n}\n\n#[derive(Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub struct DeleteProjectResponse {}\n\npub type DeleteProjectResponseResult = Result\u003cDeleteProjectResponse, AppError\u003e;\n\n#[derive(Error, Debug, Serialize, Deserialize, TS)]\n#[ts(export)]\n#[ts(export_to = \"../src/service/RemoteService/client/bindings/\")]\npub enum ProjectManagerError {\n    #[error(\"project not found\")]\n    ProjectNotFound(String),\n    #[error(\"project already exists\")]\n    ProjectAlreadyExists(String),\n    #[error(\"internal error\")]\n    InternalError(String),\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","aml_core","project_manager","update_project.rs"],"content":"use std::path::PathBuf;\n\nuse diesel::{ExpressionMethods, QueryDsl, RunQueryDsl};\n\nuse crate::aml_core::{\n    db_adapter::{models::Project, schema::projects, DbConn},\n    file_data_manager, AppError,\n};\n\nuse super::{\n    create_project::generate_unique_slug,\n    get_projects::{get_project, transform_project_for_response},\n    ProjectDetails, ProjectManagerError, UpdateProjectRequest, UpdateProjectResponse,\n    UpdateProjectResponseResult,\n};\n\npub fn update_project(\n    req: \u0026UpdateProjectRequest,\n    app_dir: \u0026PathBuf,\n    conn: \u0026mut DbConn,\n) -\u003e UpdateProjectResponseResult {\n    log::info!(\"update_project request received\");\n\n    // find project by ID\n    let find_proj_result = get_project(req.id, conn);\n\n    match find_proj_result {\n        Err(e) =\u003e Err(AppError::InternalError(e.to_string())),\n        Ok(project) =\u003e {\n            match \u0026req.name {\n                Some(name) =\u003e {\n                    let old_slug = project.slug;\n                    let new_slug_result: Result\u003cString, ProjectManagerError\u003e =\n                        generate_unique_slug(\u0026name, app_dir, conn);\n\n                    match new_slug_result {\n                        Err(error) =\u003e {\n                            return Err(AppError::ProjectManagerError(\n                                ProjectManagerError::InternalError(error.to_string()),\n                            ));\n                        }\n                        Ok(new_slug) =\u003e {\n                            let new_slug_owned = new_slug.clone();\n                            //set ONLY if req.name || req.description is filled\n                            let update_result =\n                                diesel::update(projects::table.filter(projects::id.eq(project.id)))\n                                    .set((\n                                        req.name.as_ref().map(|n| {\n                                            (projects::name.eq(n), projects::slug.eq(new_slug))\n                                        }),\n                                        req.description\n                                            .as_ref()\n                                            .map(|d| (projects::description.eq(d))),\n                                    ))\n                                    .returning((\n                                        projects::id,\n                                        projects::slug,\n                                        projects::name,\n                                        projects::description,\n                                        projects::modified_at,\n                                        projects::created_at,\n                                    ))\n                                    .get_result(conn);\n\n                            let project: Project = match update_result {\n                                Ok((id, slug, name, description, modified_at, created_at)) =\u003e {\n                                    Project {\n                                        id,\n                                        slug,\n                                        name,\n                                        description,\n                                        modified_at,\n                                        created_at,\n                                    }\n                                }\n                                Err(error) =\u003e {\n                                    return Err(AppError::ProjectManagerError(\n                                        ProjectManagerError::InternalError(error.to_string()),\n                                    ));\n                                }\n                            };\n\n                            let project_details: ProjectDetails =\n                                transform_project_for_response(project);\n                            let _ = file_data_manager::update_project_dir(\n                                \u0026old_slug,\n                                \u0026new_slug_owned,\n                                app_dir,\n                            )\n                            .map_err(|error| {\n                                AppError::ProjectManagerError(\n                                    ProjectManagerError::ProjectAlreadyExists(error.to_string()),\n                                )\n                            })?;\n                            \n                            log::info!(\"update_project response: {:?}\", project_details);\n                            return Ok(UpdateProjectResponse {\n                                project: project_details,\n                            });\n                        }\n                    }\n                }\n                None =\u003e {\n                    // name was not updated\n                    let update_result =\n                        diesel::update(projects::table.filter(projects::id.eq(project.id)))\n                            .set((req\n                                .description\n                                .as_ref()\n                                .map(|d| (projects::description.eq(d))),))\n                            .returning((\n                                projects::id,\n                                projects::slug,\n                                projects::name,\n                                projects::description,\n                                projects::modified_at,\n                                projects::created_at,\n                            ))\n                            .get_result(conn);\n\n                    let project: Project = match update_result {\n                        Ok((id, slug, name, description, modified_at, created_at)) =\u003e Project {\n                            id,\n                            slug,\n                            name,\n                            description,\n                            modified_at,\n                            created_at,\n                        },\n                        Err(error) =\u003e {\n                            return Err(AppError::ProjectManagerError(\n                                ProjectManagerError::InternalError(error.to_string()),\n                            ));\n                        }\n                    };\n\n                    let project_details: ProjectDetails = transform_project_for_response(project);\n                    log::info!(\"update_project response: {:?}\", project_details);\n                    return Ok(UpdateProjectResponse {\n                        project: project_details,\n                    });\n                }\n            }\n        }\n    }\n}\n","traces":[{"line":17,"address":[6744016,6744695],"length":1,"stats":{"Line":1},"fn_name":"update_project"},{"line":22,"address":[6744186,6744087,6744302],"length":1,"stats":{"Line":2},"fn_name":null},{"line":25,"address":[6744251],"length":1,"stats":{"Line":1},"fn_name":null},{"line":27,"address":[6744268],"length":1,"stats":{"Line":1},"fn_name":null},{"line":28,"address":[6744470],"length":1,"stats":{"Line":0},"fn_name":null},{"line":29,"address":[6744394],"length":1,"stats":{"Line":1},"fn_name":null},{"line":30,"address":[6744436],"length":1,"stats":{"Line":1},"fn_name":null},{"line":31,"address":[6744773],"length":1,"stats":{"Line":1},"fn_name":null},{"line":32,"address":[6744781],"length":1,"stats":{"Line":1},"fn_name":null},{"line":33,"address":[6744821,6744928],"length":1,"stats":{"Line":2},"fn_name":null},{"line":36,"address":[6744947],"length":1,"stats":{"Line":1},"fn_name":null},{"line":37,"address":[6745043],"length":1,"stats":{"Line":0},"fn_name":null},{"line":38,"address":[6745198],"length":1,"stats":{"Line":0},"fn_name":null},{"line":39,"address":[6745154,6745075],"length":1,"stats":{"Line":0},"fn_name":null},{"line":42,"address":[6744973],"length":1,"stats":{"Line":1},"fn_name":null},{"line":43,"address":[6745013],"length":1,"stats":{"Line":1},"fn_name":null},{"line":45,"address":[6745441,6745743,6745368],"length":1,"stats":{"Line":3},"fn_name":null},{"line":47,"address":[6745703],"length":1,"stats":{"Line":1},"fn_name":null},{"line":48,"address":[5499264,5499448,5499475],"length":1,"stats":{"Line":2},"fn_name":"{closure#0}"},{"line":49,"address":[5499300,5499355],"length":1,"stats":{"Line":2},"fn_name":null},{"line":51,"address":[6745669,6745594],"length":1,"stats":{"Line":2},"fn_name":null},{"line":53,"address":[5499497,5499488],"length":1,"stats":{"Line":2},"fn_name":"{closure#1}"},{"line":65,"address":[6745832],"length":1,"stats":{"Line":1},"fn_name":null},{"line":66,"address":[6745865],"length":1,"stats":{"Line":1},"fn_name":null},{"line":76,"address":[6746228],"length":1,"stats":{"Line":0},"fn_name":null},{"line":77,"address":[6746399],"length":1,"stats":{"Line":0},"fn_name":null},{"line":78,"address":[6746276,6746355],"length":1,"stats":{"Line":0},"fn_name":null},{"line":83,"address":[6746198,6746528],"length":1,"stats":{"Line":2},"fn_name":null},{"line":86,"address":[6746544],"length":1,"stats":{"Line":1},"fn_name":null},{"line":87,"address":[6746651],"length":1,"stats":{"Line":1},"fn_name":null},{"line":90,"address":[5499701,5499520],"length":1,"stats":{"Line":0},"fn_name":"{closure#2}"},{"line":91,"address":[5499637],"length":1,"stats":{"Line":0},"fn_name":null},{"line":92,"address":[5499598,5499538],"length":1,"stats":{"Line":0},"fn_name":null},{"line":96,"address":[6746968,6746813,6747179,6747026],"length":1,"stats":{"Line":3},"fn_name":null},{"line":97,"address":[6747122],"length":1,"stats":{"Line":1},"fn_name":null},{"line":98,"address":[6747088],"length":1,"stats":{"Line":1},"fn_name":null},{"line":105,"address":[6747479,6744737,6747579],"length":1,"stats":{"Line":0},"fn_name":null},{"line":107,"address":[6747521],"length":1,"stats":{"Line":0},"fn_name":null},{"line":110,"address":[5499728,5499737],"length":1,"stats":{"Line":0},"fn_name":"{closure#3}"},{"line":121,"address":[6747672],"length":1,"stats":{"Line":0},"fn_name":null},{"line":130,"address":[6748068],"length":1,"stats":{"Line":0},"fn_name":null},{"line":131,"address":[6748239],"length":1,"stats":{"Line":0},"fn_name":null},{"line":132,"address":[6748116,6748195],"length":1,"stats":{"Line":0},"fn_name":null},{"line":137,"address":[6748038],"length":1,"stats":{"Line":0},"fn_name":null},{"line":138,"address":[6748351,6748441,6748644,6748499],"length":1,"stats":{"Line":0},"fn_name":null},{"line":139,"address":[6748587],"length":1,"stats":{"Line":0},"fn_name":null},{"line":140,"address":[6748561],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":26,"coverable":47},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","lib.rs"],"content":"pub mod aml_core;\n\npub mod uicontroller {\n\n    use crate::aml_core::file_data_manager;\n    use crate::aml_core::network_manager::{self, NetworkSimulator};\n    use crate::aml_core::{element_repository, project_manager};\n    use diesel::r2d2::{ConnectionManager, Pool};\n    use diesel::SqliteConnection;\n    use tauri::State;\n\n    #[tauri::command]\n    #[cfg(not(tarpaulin_include))]\n    pub fn get_elements(handle: tauri::AppHandle) -\u003e element_repository::GetElementsResponseResult {\n        let resource_path = handle.path_resolver()\n            .resolve_resource(\"resources/elements.json\")\n            .ok_or(element_repository::GetElementsError::FileError(\n                \"Could not load elements.json\".to_string()\n            ))?;\n        element_repository::list_elements_from_simulator(\u0026resource_path)\n    }\n\n    #[tauri::command]\n    #[cfg(not(tarpaulin_include))]\n    pub fn put_files(\n        input: file_data_manager::FilesUploadRequest,\n        app_dir: State\u003cstd::path::PathBuf\u003e,\n        db_conn: State\u003cPool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e\u003e,\n    ) -\u003e file_data_manager::SaveFilesResponseResult {\n        let conn = \u0026mut db_conn.get().expect(\"Unable to get db connection\");\n        file_data_manager::put_files::save_input_files(\u0026input, \u0026app_dir, conn)\n    }\n\n    #[tauri::command]\n    #[cfg(not(tarpaulin_include))]\n    pub fn get_files(\n        req: file_data_manager::GetFilesRequest,\n        db_conn: State\u003cPool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e\u003e,\n    ) -\u003e file_data_manager::GetFilesResponseResult {\n        let conn = \u0026mut db_conn.get().expect(\"Unable to get db connection\");\n        file_data_manager::get_files::get_input_files(\u0026req, conn)\n    }\n\n    #[tauri::command]\n    #[cfg(not(tarpaulin_include))]\n    pub fn get_projects(\n        db_conn: State\u003cPool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e\u003e,\n    ) -\u003e project_manager::GetProjectsResponseResult {\n        let conn = \u0026mut db_conn.get().expect(\"Unable to get db connection\");\n        project_manager::get_projects::get_projects(conn)\n    }\n\n    #[tauri::command]\n    #[cfg(not(tarpaulin_include))]\n    pub fn simulate_network(\n        req: network_manager::SimulateNetworkRequest,\n        app_dir: State\u003cstd::path::PathBuf\u003e,\n        db_conn: State\u003cPool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e\u003e\n    ) -\u003e Result\u003cnetwork_manager::SimulateNetworkResponse, network_manager::SimulatorError\u003e {\n        let conn = \u0026mut db_conn.get().expect(\"Unable to get db connection\");\n\n        let nvo: network_manager::NetworkVO = req.network;\n        let project_slug: String = req.project_slug;\n        let sc = network_manager::AmlSimulatorSidecar::new();\n        let actual_network: network_manager::Network = nvo.to_network().unwrap();\n        let audio_path_str: String = req.audio_file_path;\n        let audio_path = std::path::Path::new(\u0026audio_path_str);\n\n        // call simulate network\n        let audio_path = std::path::Path::new(\u0026audio_path);\n        let resp: network_manager::SimulateNetworkResponse =\n            network_manager::AmlSimulator::sidecar_simulate_network(\n                \u0026project_slug,\n                \u0026sc,\n                \u0026actual_network,\n                \u0026audio_path,\n                \u0026app_dir,\n                conn\n            )?;\n\n        Ok(resp)\n    }\n\n    #[tauri::command]\n    #[cfg(not(tarpaulin_include))]\n    pub fn create_project(\n        req: project_manager::CreateProjectRequest,\n        app_dir: State\u003cstd::path::PathBuf\u003e,\n        db_conn: State\u003cPool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e\u003e,\n    ) -\u003e project_manager::CreateProjectResponseResult {\n        let conn = \u0026mut db_conn.get().expect(\"Unable to get db connection\");\n        project_manager::create_project::create_project(\u0026req, \u0026app_dir, conn)\n    }\n\n    #[tauri::command]\n    #[cfg(not(tarpaulin_include))]\n    pub fn delete_project(\n        req: project_manager::DeleteProjectRequest,\n        app_dir: State\u003cstd::path::PathBuf\u003e,\n        db_conn: State\u003cPool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e\u003e,\n    ) -\u003e project_manager::DeleteProjectResponseResult {\n        let conn = \u0026mut db_conn.get().expect(\"Unable to get db connection\");\n        project_manager::delete_project::delete_project(\u0026req, \u0026app_dir, conn)\n    }\n\n    #[tauri::command]\n    #[cfg(not(tarpaulin_include))]\n    pub fn update_project(\n        req: project_manager::UpdateProjectRequest,\n        app_dir: State\u003cstd::path::PathBuf\u003e,\n        db_conn: State\u003cPool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e\u003e,\n    ) -\u003e project_manager::UpdateProjectResponseResult {\n        let conn = \u0026mut db_conn.get().expect(\"Unable to get db connection\");\n        project_manager::update_project::update_project(\u0026req, \u0026app_dir, conn)\n    }\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","src","main.rs"],"content":"// Prevents additional console window on Windows in release, DO NOT REMOVE!!\n#![cfg_attr(not(debug_assertions), windows_subsystem = \"windows\")]\n\nuse diesel::r2d2::{ConnectionManager, Pool};\nuse diesel::SqliteConnection;\nuse log::{info, warn};\nuse simple_logger::SimpleLogger;\nuse std::path::PathBuf;\n\nuse aml_connect::aml_core::db_adapter;\nuse aml_connect::aml_core::file_data_manager;\nuse aml_connect::uicontroller;\n\n\n#[cfg(not(tarpaulin_include))]\nfn main() {\n    info!(\"Starting AML Connect...\");\n\n    tauri::Builder::default()\n        .setup(|app| {\n            init_logger();\n            info!(\"Initializing AML Connect...\");\n            let app_dir = init_fs(\u0026app.path_resolver());\n            let db_conn_pool = init_db(app_dir.clone());\n            tauri::Manager::manage(app, db_conn_pool);\n            tauri::Manager::manage(app, app_dir);\n            Ok(())\n        })\n        .invoke_handler(tauri::generate_handler![\n            uicontroller::get_elements,\n            uicontroller::put_files,\n            uicontroller::get_files,\n            uicontroller::get_projects,\n            uicontroller::create_project,\n            uicontroller::delete_project,\n            uicontroller::update_project,\n            uicontroller::simulate_network,  \n        ])\n        .run(tauri::generate_context!())\n        .expect(\"error while running tauri application\");\n}\n\n#[cfg(not(tarpaulin_include))]\nfn init_db(_: PathBuf) -\u003e Pool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e {\n    let db_conn_pool = db_adapter::establish_connection().unwrap_or_else(|e| {\n        panic!(\"Could not establish connection to database :{:?}\", e);\n    });\n\n    //Ensures that the migrations are run before the application starts\n    db_adapter::run_db_migrations(\u0026db_conn_pool).unwrap_or_else(|e| {\n        warn!(\"Failed to run pending database migrations :{:?}\", e);\n        ()\n    });\n\n    db_conn_pool\n}\n\n#[cfg(not(tarpaulin_include))]\nfn init_fs(path_resolver: \u0026tauri::PathResolver) -\u003e PathBuf {\n    // TODO: Fix\n    file_data_manager::create_app_dir_if_not_exists(path_resolver).unwrap_or_else(|e| {\n        panic!(\"Could not create app dir :{:?}\", e);\n    })\n}\n\n#[cfg(not(tarpaulin_include))]\nfn init_logger() {\n    SimpleLogger::new().init().unwrap_or_else(|e| {\n        panic!(\"Failed to initialize logger :{:?}\", e.to_string());\n    });\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","tests","integration_test.rs"],"content":"use crate::aml_connect::aml_core::db_adapter::models::*;\nuse aml_connect::{\n    self,\n    aml_core::{\n        db_adapter::{\n            self,\n            schema::{audio_files, input_data, projects},\n        },\n        file_data_manager::{\n            self, DataSet, FileUploadRequest, FilesUploadRequest, GetFilesRequest,\n        },\n    },\n};\nuse anyhow::Result;\nuse diesel::{\n    delete,\n    query_dsl::methods::FilterDsl,\n    r2d2::{ConnectionManager, PooledConnection},\n    Connection, ExpressionMethods, RunQueryDsl, SelectableHelper, SqliteConnection,\n};\nuse directories::BaseDirs;\nuse log::info;\nuse std::fs;\nuse std::path::MAIN_SEPARATOR;\nuse std::{\n    env,\n    path::{Path, PathBuf},\n};\n\nuse aml_connect::aml_core::network_manager::{self, NetworkSimulator, SimulatorError};\nuse serde_json::{self, Value};\n\nfn create_app_dir_if_not_exists() -\u003e Result\u003cPathBuf\u003e {\n    let app_dir = PathBuf::from(BaseDirs::new().unwrap().data_local_dir()).join(\"com.aml-connect.aspinity\");\n    if !app_dir.exists() {\n        fs::create_dir_all(app_dir.clone())?;\n    }\n    Ok(app_dir)\n}\n\nfn integration_test_setup(app_dir: PathBuf) {\n    let destination_dir = app_dir.join(\"test_project\").join(\"audio\");\n    fs::create_dir_all(\u0026destination_dir).unwrap();\n\n    let mut source_dir = env::current_dir().unwrap().parent().unwrap().to_path_buf();\n    source_dir.push(\"test_resources\");\n\n    let files_to_copy = [\"bearing-faults.wav\", \"rising-chirp.wav\", \"heart-rate.wav\"];\n\n    for file_name in \u0026files_to_copy {\n        let source_path = source_dir.join(file_name);\n        let destination_path = destination_dir.join(file_name);\n\n        fs::copy(\u0026source_path, \u0026destination_path).unwrap();\n    }\n}\n\n#[test]\nfn save_on_db() {\n    env::set_var(\"DATABASE_PATH\", \"./tests\");\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    let mut conn = conn_pool.get().unwrap();\n    conn.begin_test_transaction().unwrap();\n}\n\n#[test]\nfn test_list_elements_from_simulator() {\n    let mut sc = network_manager::AmlSimulatorSidecar::new();\n    sc.sidecar_name = String::from(format!(\"..{}aspinity_wrapper\", MAIN_SEPARATOR));\n    let elements_json_str = network_manager::AmlSimulator::list_elements(\u0026sc).unwrap();\n    let elements_json: Value = serde_json::from_str(elements_json_str.as_str())\n        .map_err(|e| SimulatorError::JsonParseError(e.to_string()))\n        .unwrap();\n\n    // check that one of the keys \"AcDiff\" exist in elements_json\n    assert!(elements_json[\"AcDiff\"].is_object());\n}\n\n// #[ignore]\n#[test]\nfn save_file_metadata() {\n    // set DATABASE_PATH env var\n    let db_dir_path = \"./tests\";\n    env::set_var(\"DATABASE_PATH\", \u0026db_dir_path);\n\n    // if exists, purge db under \"./tests\" before test\n    let db_name = db_adapter::DB_NAME;\n    let db_path = format!(\"{db_dir_path}/{db_name}\");\n    if Path::new(\u0026db_path).exists() {\n        std::fs::remove_file(\u0026db_path).unwrap();\n    }\n\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    db_adapter::run_db_migrations(\u0026conn_pool).unwrap();\n    let conn = \u0026mut conn_pool.get().unwrap();\n\n    use crate::aml_connect::aml_core::db_adapter::schema::projects;\n    let new_project = NewProject {\n        name: \"Test project\".to_string(),\n        description: Some(\"Test Project\".to_string()),\n        slug: \"test_project\".to_string(),\n    };\n\n    let project = diesel::insert_into(projects::table)\n        .values(\u0026new_project)\n        .returning(Project::as_returning())\n        .get_result::\u003cProject\u003e(conn)\n        .unwrap();\n\n    info!(\"Project: {:?}\", project);\n\n    let new_input_data = NewInputData {\n        file_name: Some(\"file1.wav\"),\n        project_id: project.id,\n        ml_dataset_type: None,\n        file_type: None,\n        file_extension: None,\n        file_size: None,\n        file_path: None,\n        uploaded_data: None,\n    };\n\n    use crate::aml_connect::aml_core::db_adapter::schema::input_data;\n    let input_data = diesel::insert_into(input_data::table)\n        .values(\u0026new_input_data)\n        .returning(InputData::as_returning())\n        .get_result::\u003cInputData\u003e(conn)\n        .unwrap();\n\n    let new_audio_file = NewAudioFile {\n        input_data_id: input_data.id,\n        length: Some(1),\n        category: Some(\"noisy\"),\n        peak_frequency: None,\n        spi_level: None,\n    };\n\n    use crate::aml_connect::aml_core::db_adapter::schema::audio_files;\n    diesel::insert_into(audio_files::table)\n        .values(\u0026new_audio_file)\n        .returning(AudioFile::as_returning())\n        .execute(conn)\n        .unwrap();\n\n    let found_project = projects::table\n        .filter(projects::id.eq(project.id))\n        .first::\u003cProject\u003e(conn)\n        .unwrap();\n\n    clear_db(conn);\n\n    assert!(found_project.description == project.description);\n}\n\n// #[ignore]\n#[test]\nfn validate_file_and_save_metadata() {\n    // set DATABASE_PATH env var\n    let db_dir_path = \"./tests\";\n    env::set_var(\"DATABASE_PATH\", \u0026db_dir_path);\n\n    // if exists, purge db under \"./tests\" before test\n    let db_name = db_adapter::DB_NAME;\n    let db_path = format!(\"{db_dir_path}/{db_name}\");\n    if Path::new(\u0026db_path).exists() {\n        std::fs::remove_file(\u0026db_path).unwrap();\n    }\n\n    let app_dir = create_app_dir_if_not_exists().unwrap();\n    integration_test_setup(app_dir.clone());\n\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    db_adapter::run_db_migrations(\u0026conn_pool).unwrap();\n    let conn = \u0026mut conn_pool.get().unwrap();\n\n    let request = FilesUploadRequest {\n        proj_slug: \"test_project\".to_string(),\n        input_files: vec![\n            FileUploadRequest {\n                file_name: \"bearing-faults.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n            FileUploadRequest {\n                file_name: \"rising-chirp.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n        ],\n    };\n\n    let project_slug = \"test_project\";\n    let dummy_project = NewProject {\n        name: \"Test project\".to_string(),\n        slug: project_slug.to_owned(),\n        description: Some(\"This is a test project\".to_owned()),\n    };\n    diesel::insert_into(projects::table)\n        .values(\u0026dummy_project)\n        .execute(conn)\n        .unwrap();\n\n    let file_upload_response =\n        file_data_manager::put_files::save_input_files(\u0026request, \u0026app_dir, conn);\n\n    println!(\n        \"file_upload_response : {}\",\n        file_upload_response.as_ref().unwrap().succeeded\n    );\n\n    clear_db(conn);\n    assert!(file_upload_response.as_ref().is_ok());\n    assert!(\n        file_upload_response\n            .as_ref()\n            .unwrap()\n            .upload_success_files\n            .len()\n            == 2\n    );\n    assert!(\n        file_upload_response.as_ref().unwrap().upload_success_files[0].file_name\n            == \"bearing-faults.wav\"\n    );\n    assert!(\n        file_upload_response.as_ref().unwrap().upload_success_files[1].file_name\n            == \"rising-chirp.wav\"\n    );\n    assert!(\n        file_upload_response\n            .as_ref()\n            .unwrap()\n            .upload_failed_files\n            .len()\n            == 0\n    );\n    assert!(file_upload_response.as_ref().unwrap().attempted == 2);\n    assert!(file_upload_response.as_ref().unwrap().succeeded == 2);\n    assert!(file_upload_response.as_ref().unwrap().failed == 0);\n}\n\n// #[ignore]\n#[test]\nfn validate_file_and_save_metadata_check_exists() {\n    // set DATABASE_PATH env var\n    let db_dir_path = \"./tests\";\n    env::set_var(\"DATABASE_PATH\", \u0026db_dir_path);\n\n    // if exists, purge db under \"./tests\" before test\n    let db_name = db_adapter::DB_NAME;\n    let db_path = format!(\"{db_dir_path}/{db_name}\");\n    if Path::new(\u0026db_path).exists() {\n        std::fs::remove_file(\u0026db_path).unwrap();\n    }\n\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    db_adapter::run_db_migrations(\u0026conn_pool).unwrap();\n    let conn = \u0026mut conn_pool.get().unwrap();\n\n    let request = FilesUploadRequest {\n        proj_slug: \"test_project\".to_string(),\n        input_files: vec![\n            FileUploadRequest {\n                file_name: \"gaga.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n            FileUploadRequest {\n                file_name: \"gaga_2.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n        ],\n    };\n\n    let project_slug = \"test_project\";\n    let dummy_project = NewProject {\n        name: \"Test project\".to_string(),\n        slug: project_slug.to_owned(),\n        description: Some(\"This is a test project\".to_owned()),\n    };\n    diesel::insert_into(projects::table)\n        .values(\u0026dummy_project)\n        .execute(conn)\n        .unwrap();\n\n    let app_dir = create_app_dir_if_not_exists().unwrap();\n    integration_test_setup(app_dir.clone());\n\n    let file_upload_response =\n        file_data_manager::put_files::save_input_files(\u0026request, \u0026app_dir, conn);\n    println!(\"file_upload_response : {:?}\", file_upload_response);\n\n    clear_db(conn);\n    assert!(file_upload_response.as_ref().is_ok());\n    assert!(\n        file_upload_response\n            .as_ref()\n            .unwrap()\n            .upload_failed_files\n            .len()\n            == 2\n    );\n    assert!(file_upload_response.as_ref().unwrap().attempted == 2);\n    assert!(file_upload_response.as_ref().unwrap().succeeded == 0);\n    assert!(file_upload_response.as_ref().unwrap().failed == 2);\n}\n\n#[test]\nfn get_audio_files_invalid_request() {\n    let db_dir_path = \"./tests\";\n    env::set_var(\"DATABASE_PATH\", \u0026db_dir_path);\n\n    // if exists, purge db under \"./tests\" before test\n    let db_name = db_adapter::DB_NAME;\n    let db_path = format!(\"{db_dir_path}/{db_name}\");\n    if Path::new(\u0026db_path).exists() {\n        std::fs::remove_file(\u0026db_path).unwrap();\n    }\n\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    db_adapter::run_db_migrations(\u0026conn_pool).unwrap();\n\n    let conn = \u0026mut conn_pool.get().unwrap();\n\n    let request = GetFilesRequest {\n        proj_slug: \"\".to_string(),\n        dataset_type: None,\n    };\n\n    let files = file_data_manager::get_files::get_input_files(\u0026request, conn);\n\n    assert!(files.is_err());\n\n    let request = GetFilesRequest {\n        proj_slug: \"invalid_project\".to_string(),\n        dataset_type: Some(DataSet::Training),\n    };\n\n    let files = file_data_manager::get_files::get_input_files(\u0026request, conn);\n    clear_db(conn);\n    assert!(files.is_err());\n}\n\n#[test]\nfn get_non_existent_files() {\n    let db_dir_path = \"./tests\";\n    env::set_var(\"DATABASE_PATH\", \u0026db_dir_path);\n\n    // if exists, purge db under \"./tests\" before test\n    let db_name = db_adapter::DB_NAME;\n    let db_path = format!(\"{db_dir_path}/{db_name}\");\n    if Path::new(\u0026db_path).exists() {\n        std::fs::remove_file(\u0026db_path).unwrap();\n    }\n\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    db_adapter::run_db_migrations(\u0026conn_pool).unwrap();\n    let conn = \u0026mut conn_pool.get().unwrap();\n\n    let request = FilesUploadRequest {\n        proj_slug: \"test_project\".to_string(),\n        input_files: vec![\n            FileUploadRequest {\n                file_name: \"bearing-faults.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n            FileUploadRequest {\n                file_name: \"heart-rate.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n            FileUploadRequest {\n                file_name: \"rising-chirp.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n        ],\n    };\n\n    let project_slug = \"test_project\";\n    let dummy_project = NewProject {\n        name: \"Test project\".to_string(),\n        slug: project_slug.to_owned(),\n        description: Some(\"This is a test project\".to_owned()),\n    };\n    diesel::insert_into(projects::table)\n        .values(\u0026dummy_project)\n        .execute(conn)\n        .unwrap();\n\n    let app_dir = create_app_dir_if_not_exists().unwrap();\n    integration_test_setup(app_dir.clone());\n\n    let file_upload_response =\n        file_data_manager::put_files::save_input_files(\u0026request, \u0026app_dir, conn);\n    println!(\"file_upload_response : {:?}\", file_upload_response);\n    assert!(file_upload_response.is_ok());\n    assert!(file_upload_response.unwrap().upload_success_files.len() == 3);\n\n    let get_file_request = file_data_manager::GetFilesRequest {\n        proj_slug: \"test_project\".to_string(),\n        dataset_type: Some(DataSet::Validation),\n    };\n\n    let get_file_response = file_data_manager::get_files::get_input_files(\u0026get_file_request, conn);\n    clear_db(conn);\n    assert!(get_file_response.unwrap().files.len() == 0);\n}\n\n// ignore unless - youve created bearing-faults.wav, heart-rate.wav and rising-chirp.wav in ~/.local/share/aml_connect\n// #[ignore]\n#[test]\nfn put_files_then_check_get_files() {\n    let db_dir_path = \"./tests\";\n    env::set_var(\"DATABASE_PATH\", \u0026db_dir_path);\n\n    // if exists, purge db under \"./tests\" before test\n    let db_name = db_adapter::DB_NAME;\n    let db_path = format!(\"{db_dir_path}/{db_name}\");\n    if Path::new(\u0026db_path).exists() {\n        std::fs::remove_file(\u0026db_path).unwrap();\n    }\n\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    db_adapter::run_db_migrations(\u0026conn_pool).unwrap();\n    let conn = \u0026mut conn_pool.get().unwrap();\n\n    let request = FilesUploadRequest {\n        proj_slug: \"test_project\".to_string(),\n        input_files: vec![\n            FileUploadRequest {\n                file_name: \"bearing-faults.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n            FileUploadRequest {\n                file_name: \"heart-rate.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n            FileUploadRequest {\n                file_name: \"rising-chirp.wav\".to_string(),\n                dataset_type: DataSet::Training,\n            },\n        ],\n    };\n\n    let project_slug = \"test_project\";\n    let dummy_project = NewProject {\n        name: \"Test project\".to_string(),\n        slug: project_slug.to_owned(),\n        description: Some(\"This is a test project\".to_owned()),\n    };\n    diesel::insert_into(projects::table)\n        .values(\u0026dummy_project)\n        .execute(conn)\n        .unwrap();\n\n    let app_dir = create_app_dir_if_not_exists().unwrap();\n    integration_test_setup(app_dir.clone());\n\n    let file_upload_response =\n        file_data_manager::put_files::save_input_files(\u0026request, \u0026app_dir, conn);\n    println!(\"file_upload_response : {:?}\", file_upload_response);\n    assert!(file_upload_response.is_ok());\n    assert!(file_upload_response.unwrap().upload_success_files.len() == 3);\n\n    let get_file_request = file_data_manager::GetFilesRequest {\n        proj_slug: \"test_project\".to_string(),\n        dataset_type: Some(DataSet::Training),\n    };\n    let get_files_response = file_data_manager::get_files::get_input_files(\u0026get_file_request, conn);\n    assert!(get_files_response.unwrap().files.len() == 3);\n    clear_db(conn);\n}\n\n#[test]\nfn validate_file_and_save_metadata_check_extension() {\n    let db_dir_path = \"./tests\";\n    env::set_var(\"DATABASE_PATH\", \u0026db_dir_path);\n\n    // if exists, purge db under \"./tests\" before test\n    let db_name = db_adapter::DB_NAME;\n    let db_path = format!(\"{db_dir_path}/{db_name}\");\n    if Path::new(\u0026db_path).exists() {\n        std::fs::remove_file(\u0026db_path).unwrap();\n    }\n\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    db_adapter::run_db_migrations(\u0026conn_pool).unwrap();\n    let conn = \u0026mut conn_pool.get().unwrap();\n\n    let request = FilesUploadRequest {\n        proj_slug: \"test_project\".to_string(),\n        input_files: vec![FileUploadRequest {\n            file_name: \"f2.txt\".to_string(),\n            dataset_type: DataSet::Training,\n        }],\n    };\n\n    let project_slug = \"test_project\";\n    let dummy_project = NewProject {\n        name: \"Test project\".to_string(),\n        slug: project_slug.to_owned(),\n        description: Some(\"This is a test project\".to_owned()),\n    };\n    diesel::insert_into(projects::table)\n        .values(\u0026dummy_project)\n        .execute(conn)\n        .unwrap();\n\n    let app_dir = create_app_dir_if_not_exists().unwrap();\n    integration_test_setup(app_dir.clone());\n\n    let file_upload_response =\n        file_data_manager::put_files::save_input_files(\u0026request, \u0026app_dir, conn);\n    println!(\"file_upload_response : {:?}\", file_upload_response);\n    assert!(file_upload_response.is_ok());\n    assert!(file_upload_response.unwrap().upload_failed_files.len() == 1);\n    clear_db(conn);\n}\n\nfn clear_db(conn: \u0026mut PooledConnection\u003cConnectionManager\u003cSqliteConnection\u003e\u003e) {\n    // The order in which these databases is deleted is important since there are foreign key relations that must be kept consistent.\n    delete(audio_files::table).execute(conn).unwrap();\n    delete(input_data::table).execute(conn).unwrap();\n    delete(projects::table).execute(conn).unwrap();\n}\n","traces":[{"line":33,"address":[4937136,4937428],"length":1,"stats":{"Line":1},"fn_name":"create_app_dir_if_not_exists"},{"line":34,"address":[4937153,4937454],"length":1,"stats":{"Line":1},"fn_name":null},{"line":35,"address":[4937557],"length":1,"stats":{"Line":1},"fn_name":null},{"line":36,"address":[4937708],"length":1,"stats":{"Line":0},"fn_name":null},{"line":38,"address":[4937610],"length":1,"stats":{"Line":1},"fn_name":null},{"line":41,"address":[4939127,4938138,4937872],"length":1,"stats":{"Line":1},"fn_name":"integration_test_setup"},{"line":42,"address":[4937887,4937970],"length":1,"stats":{"Line":2},"fn_name":null},{"line":43,"address":[4938193],"length":1,"stats":{"Line":1},"fn_name":null},{"line":45,"address":[4938240],"length":1,"stats":{"Line":1},"fn_name":null},{"line":46,"address":[4938519],"length":1,"stats":{"Line":1},"fn_name":null},{"line":48,"address":[4938550],"length":1,"stats":{"Line":1},"fn_name":null},{"line":50,"address":[4938770,4938639],"length":1,"stats":{"Line":2},"fn_name":null},{"line":51,"address":[4938799],"length":1,"stats":{"Line":1},"fn_name":null},{"line":52,"address":[4938858,4938932],"length":1,"stats":{"Line":2},"fn_name":null},{"line":54,"address":[4939023,4938975],"length":1,"stats":{"Line":2},"fn_name":null},{"line":524,"address":[4939152],"length":1,"stats":{"Line":1},"fn_name":"clear_db"},{"line":526,"address":[4939171],"length":1,"stats":{"Line":1},"fn_name":null},{"line":527,"address":[4939207],"length":1,"stats":{"Line":1},"fn_name":null},{"line":528,"address":[4939243],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":18,"coverable":19},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","tests","network_integration_tests.rs"],"content":"use aml_connect::aml_core::{\n    db_adapter::{self, models::{NewProject, Project}, schema::{projects, audio_files, input_data}},\n    network_manager::{self, NetworkSimulator},\n};\nuse anyhow::Result;\nuse diesel::{SelectableHelper, RunQueryDsl, r2d2::{PooledConnection, ConnectionManager}, SqliteConnection};\nuse directories::BaseDirs;\nuse serde_json;\nuse std::path::Path;\nuse std::{env, fs, path::PathBuf};\n\nfn create_app_dir_if_not_exists() -\u003e Result\u003cPathBuf\u003e {\n    let app_dir = PathBuf::from(BaseDirs::new().unwrap().data_local_dir()).join(\"com.aml-connect.aspinity\");\n    if !app_dir.exists() {\n        fs::create_dir_all(app_dir.clone())?;\n    }\n    Ok(app_dir)\n}\n\n#[test]\nfn test_sidecar_simulate_network() {\n    let db_dir_path = \"./tests\";\n    env::set_var(\"DATABASE_PATH\", \u0026db_dir_path);\n\n    let db_name = db_adapter::DB_NAME;\n    let db_path = format!(\"{db_dir_path}/{db_name}\");\n    if Path::new(\u0026db_path).exists() {\n        std::fs::remove_file(\u0026db_path).unwrap();\n    }\n\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    db_adapter::run_db_migrations(\u0026conn_pool).unwrap();\n\n    let conn = \u0026mut conn_pool.get().unwrap();\n\n    let mut test_resources_dir = env::current_dir().unwrap().parent().unwrap().to_path_buf();\n    test_resources_dir.push(\"test_resources\");\n    let nw_file_path = test_resources_dir.join(\"sidecar_test_network.json\");\n    let curr_network: network_manager::Network =\n        serde_json::from_str(\u0026fs::read_to_string(nw_file_path).unwrap()).unwrap();\n\n    let proj_slug = \"test_project\";\n    let new_project = NewProject {\n        name: \"Test project\".to_string(),\n        description: Some(\"Test Project\".to_string()),\n        slug: proj_slug.to_string(),\n    };\n\n    let _project = diesel::insert_into(projects::table)\n        .values(\u0026new_project)\n        .returning(Project::as_returning())\n        .get_result::\u003cProject\u003e(conn)\n        .unwrap();\n\n    let audio_file_path = test_resources_dir.join(\"rising-chirp.wav\");\n    let app_dir = create_app_dir_if_not_exists().unwrap();\n\n    let mut sc = network_manager::AmlSimulatorSidecar::new();\n    sc.sidecar_name = String::from(\"../aspinity_wrapper\");\n\n    let _resp = network_manager::AmlSimulator::sidecar_simulate_network(\n        \u0026proj_slug,\n        \u0026sc,\n        \u0026curr_network,\n        \u0026audio_file_path,\n        \u0026app_dir,\n        conn,\n    );\n\n    assert!(_resp.is_ok());\n    clear_db(conn);\n}\n\n#[test]\nfn test_sidecar_simulate_network_invalid_project_slug() {\n    let db_dir_path = \"./tests\";\n    env::set_var(\"DATABASE_PATH\", \u0026db_dir_path);\n\n    let db_name = db_adapter::DB_NAME;\n    let db_path = format!(\"{db_dir_path}/{db_name}\");\n    if Path::new(\u0026db_path).exists() {\n        std::fs::remove_file(\u0026db_path).unwrap();\n    }\n\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    db_adapter::run_db_migrations(\u0026conn_pool).unwrap();\n\n    let conn = \u0026mut conn_pool.get().unwrap();\n\n    let mut test_resources_dir = env::current_dir().unwrap().parent().unwrap().to_path_buf();\n    test_resources_dir.push(\"test_resources\");\n    let nw_file_path = test_resources_dir.join(\"sidecar_test_network.json\");\n    let curr_network: network_manager::Network =\n        serde_json::from_str(\u0026fs::read_to_string(nw_file_path).unwrap()).unwrap();\n\n    let proj_slug = \"test_project_xyz\"; // invalid project slug\n\n    let audio_file_path = test_resources_dir.join(\"rising-chirp.wav\");\n    let app_dir = create_app_dir_if_not_exists().unwrap();\n\n    let mut sc = network_manager::AmlSimulatorSidecar::new();\n    sc.sidecar_name = String::from(\"../aspinity_wrapper\");\n\n    let _resp = network_manager::AmlSimulator::sidecar_simulate_network(\n        \u0026proj_slug,\n        \u0026sc,\n        \u0026curr_network,\n        \u0026audio_file_path,\n        \u0026app_dir,\n        conn,\n    );\n\n    // let resp: network_manager::SimulateNetworkResponse = _resp.unwrap();\n    assert!(_resp.is_err());\n    clear_db(conn);\n}\n\nfn clear_db(conn: \u0026mut PooledConnection\u003cConnectionManager\u003cSqliteConnection\u003e\u003e) {\n    // The order in which these databases is deleted is important since there are foreign key relations that must be kept consistent.\n    diesel::delete(audio_files::table).execute(conn).unwrap();\n    diesel::delete(input_data::table).execute(conn).unwrap();\n    diesel::delete(projects::table).execute(conn).unwrap();\n}","traces":[{"line":12,"address":[4943476,4943184],"length":1,"stats":{"Line":1},"fn_name":"create_app_dir_if_not_exists"},{"line":13,"address":[4943201,4943502],"length":1,"stats":{"Line":1},"fn_name":null},{"line":14,"address":[4943605],"length":1,"stats":{"Line":1},"fn_name":null},{"line":15,"address":[4943756],"length":1,"stats":{"Line":0},"fn_name":null},{"line":17,"address":[4943658],"length":1,"stats":{"Line":1},"fn_name":null},{"line":120,"address":[4943920],"length":1,"stats":{"Line":1},"fn_name":"clear_db"},{"line":122,"address":[4943939],"length":1,"stats":{"Line":1},"fn_name":null},{"line":123,"address":[4943975],"length":1,"stats":{"Line":1},"fn_name":null},{"line":124,"address":[4944011],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":8,"coverable":9},{"path":["/","home","sbhatna2","workspace","aml-connect","src-tauri","tests","projects_integration_tests.rs"],"content":"use std::fs;\n\nuse std::env;\nuse std::path::PathBuf;\n\nuse aml_connect::aml_core::db_adapter::models::NewProject;\nuse aml_connect::aml_core::db_adapter::schema::projects;\nuse aml_connect::aml_core::project_manager::create_project;\nuse aml_connect::aml_core::project_manager::delete_project;\nuse aml_connect::aml_core::project_manager::get_projects::get_project;\nuse aml_connect::aml_core::project_manager::update_project;\nuse aml_connect::aml_core::project_manager::ProjectManagerError;\nuse aml_connect::aml_core::{db_adapter, project_manager};\nuse anyhow::Context;\nuse diesel::r2d2::{ConnectionManager, Pool};\nuse diesel::{delete, Connection, ExpressionMethods, QueryDsl, RunQueryDsl, SqliteConnection};\nuse directories::BaseDirs;\nuse log::{info, warn};\n\n#[test]\nfn test_get_all_projects() {\n    env::set_var(\"DATABASE_PATH\", \"./tests\");\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    let mut conn = conn_pool.get().unwrap();\n    conn.begin_test_transaction().unwrap();\n\n    // Create some test projects\n    add_dummy_projects(\u0026conn_pool);\n\n    let res = project_manager::get_projects::get_projects(\u0026mut conn).unwrap();\n\n    // Check that the returned projects match the inserted projects\n    assert_eq!(res.projects.len(), 5);\n    assert_eq!(\n        res.projects[0].name,\n        \"Test Project for projects_integration_tests\"\n    );\n\n    delete(projects::table).execute(\u0026mut conn).unwrap();\n}\n\n#[test]\nfn test_crud_project() {\n    env::set_var(\"DATABASE_PATH\", \"./tests\");\n    let conn_pool = db_adapter::establish_connection().unwrap();\n    env::remove_var(\"DATABASE_PATH\");\n    let mut conn = conn_pool.get().unwrap();\n    conn.begin_test_transaction().unwrap();\n\n    let app_dir = create_app_dir_if_not_exists().unwrap();\n\n    let create_response = create_project::create_project(\n        \u0026project_manager::CreateProjectRequest {\n            name: \"TestProject\".to_owned(),\n            description: Some(\"Sample Description\".to_owned()),\n        },\n        \u0026app_dir,\n        \u0026mut conn,\n    );\n\n    assert!(create_response.is_ok());\n    let project = create_response.unwrap().project;\n    assert!(project.name == \"TestProject\");\n\n    // assert!(fs::try_exists(app_dir.join(project.slug)).unwrap() == true);\n    assert!(app_dir.join(\u0026project.slug).exists() == true);\n\n    let update_response = update_project::update_project(\n        \u0026project_manager::UpdateProjectRequest {\n            id: project.id,\n            name: Some(\"TestProject-Updated\".to_owned()),\n            description: Some(\"Updated Description\".to_owned()),\n        },\n        \u0026app_dir,\n        \u0026mut conn,\n    );\n\n    assert!(update_response.is_ok());\n    let updated_project = update_response.unwrap().project;\n\n    assert!(updated_project.name == \"TestProject-Updated\");\n    assert!(updated_project.description == Some(\"Updated Description\".to_owned()));\n\n    //assert!(updated_project.slug == project.slug);\n    assert!(app_dir.join(\u0026updated_project.slug).exists() == true);\n    assert!(app_dir.join(\u0026project.slug).exists() == false);\n\n    let delete_resp = delete_project::delete_project(\n        \u0026project_manager::DeleteProjectRequest { id: project.id },\n        \u0026app_dir,\n        \u0026mut conn,\n    );\n\n    assert!(delete_resp.is_ok());\n    assert!(app_dir.join(\u0026updated_project.slug).exists() == false);\n\n    let find_proj_result = get_project(project.id, \u0026mut conn);\n    assert!(find_proj_result.is_err());\n    assert!(matches!(\n        find_proj_result,\n        Err(ProjectManagerError::ProjectNotFound(_))\n    ));\n\n    fs::remove_dir_all(app_dir).unwrap();\n}\n\n#[cfg(not(tarpaulin_include))]\nfn create_app_dir_if_not_exists() -\u003e anyhow::Result\u003cPathBuf\u003e {\n    let app_dir = PathBuf::from(BaseDirs::new().unwrap().data_local_dir()).join(\"aml_connect\");\n    if !app_dir.exists() {\n        fs::create_dir_all(app_dir.clone())?;\n    }\n    Ok(app_dir)\n}\n\n#[cfg(not(tarpaulin_include))]\nfn add_dummy_projects(db_conn_pool: \u0026Pool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e) {\n    add_dummy_project(\"test_project\", db_conn_pool).unwrap_or_else(|e| {\n        warn!(\n            \"Failed to add dummy project OR project already exists:{:?}\",\n            e\n        );\n        ()\n    });\n\n    add_dummy_project(\"test_project1\", db_conn_pool).unwrap_or_else(|e| {\n        warn!(\n            \"Failed to add dummy project OR project already exists:{:?}\",\n            e\n        );\n        ()\n    });\n    add_dummy_project(\"test_project2\", db_conn_pool).unwrap_or_else(|e| {\n        warn!(\n            \"Failed to add dummy project OR project already exists:{:?}\",\n            e\n        );\n        ()\n    });\n    add_dummy_project(\"test_project3\", db_conn_pool).unwrap_or_else(|e| {\n        warn!(\n            \"Failed to add dummy project OR project already exists:{:?}\",\n            e\n        );\n        ()\n    });\n    add_dummy_project(\"test_project4\", db_conn_pool).unwrap_or_else(|e| {\n        warn!(\n            \"Failed to add dummy project OR project already exists:{:?}\",\n            e\n        );\n        ()\n    });\n}\n\n#[cfg(not(tarpaulin_include))]\nfn add_dummy_project(\n    project_slug: \u0026str,\n    db_conn_pool: \u0026Pool\u003cConnectionManager\u003cSqliteConnection\u003e\u003e,\n) -\u003e anyhow::Result\u003c()\u003e {\n    let conn = \u0026mut db_conn_pool\n        .get()\n        .with_context(|| \"failed to get db connection to add dummy project\")?;\n\n    let match_count = projects::table\n        .filter(projects::slug.eq(project_slug))\n        .count()\n        .get_result::\u003ci64\u003e(conn)\n        .with_context(|| format!(\"failed to get count of projects with slug : {project_slug}\"))?;\n\n    if match_count == 1 {\n        info!(\"Dummy project already exists\");\n        Ok(())\n    } else {\n        info!(\"Adding dummy project\");\n        let dummy_project = NewProject {\n            slug: project_slug.to_owned(),\n            name: \"Test Project for projects_integration_tests\".to_owned(),\n            description: Some(\"This is a test project\".to_owned()),\n        };\n        diesel::insert_into(projects::table)\n            .values(\u0026dummy_project)\n            .execute(conn)\n            .with_context(|| format!(\"failed to insert dummy project : {project_slug}\"))?;\n        Ok(())\n    }\n}\n","traces":[{"line":108,"address":[4959444,4959152],"length":1,"stats":{"Line":1},"fn_name":"create_app_dir_if_not_exists"},{"line":109,"address":[4959470,4959169],"length":1,"stats":{"Line":1},"fn_name":null},{"line":110,"address":[4959573],"length":1,"stats":{"Line":1},"fn_name":null},{"line":111,"address":[4959724],"length":1,"stats":{"Line":1},"fn_name":null},{"line":113,"address":[4959626],"length":1,"stats":{"Line":1},"fn_name":null},{"line":116,"address":[4959888],"length":1,"stats":{"Line":1},"fn_name":"add_dummy_projects"},{"line":117,"address":[4973316,4972960],"length":1,"stats":{"Line":1},"fn_name":"{closure#0}"},{"line":118,"address":[4973108,4972972,4973179,4973053],"length":1,"stats":{"Line":0},"fn_name":null},{"line":125,"address":[4973700,4973344],"length":1,"stats":{"Line":1},"fn_name":"{closure#1}"},{"line":126,"address":[4973492,4973437,4973356,4973563],"length":1,"stats":{"Line":0},"fn_name":null},{"line":132,"address":[4973728,4974084],"length":1,"stats":{"Line":1},"fn_name":"{closure#2}"},{"line":133,"address":[4973740,4973947,4973876,4973821],"length":1,"stats":{"Line":0},"fn_name":null},{"line":139,"address":[4959995],"length":1,"stats":{"Line":1},"fn_name":null},{"line":140,"address":[4974205,4974331,4974124,4974260],"length":1,"stats":{"Line":0},"fn_name":null},{"line":146,"address":[4960025],"length":1,"stats":{"Line":1},"fn_name":null},{"line":147,"address":[4974589,4974715,4974508,4974644],"length":1,"stats":{"Line":0},"fn_name":null},{"line":155,"address":[4961895,4960064,4961320],"length":1,"stats":{"Line":1},"fn_name":"add_dummy_project"},{"line":159,"address":[4960350,4960114],"length":1,"stats":{"Line":1},"fn_name":null},{"line":161,"address":[4960334],"length":1,"stats":{"Line":0},"fn_name":null},{"line":163,"address":[4960649,4960447,4960544],"length":1,"stats":{"Line":2},"fn_name":null},{"line":164,"address":[4960291],"length":1,"stats":{"Line":1},"fn_name":null},{"line":167,"address":[4960536,4960633],"length":1,"stats":{"Line":1},"fn_name":null},{"line":169,"address":[4960625,4961794],"length":1,"stats":{"Line":2},"fn_name":null},{"line":170,"address":[4960704,4961799,4961662,4961720],"length":1,"stats":{"Line":3},"fn_name":null},{"line":171,"address":[4961782],"length":1,"stats":{"Line":1},"fn_name":null},{"line":173,"address":[4960946,4960749,4960853],"length":1,"stats":{"Line":0},"fn_name":null},{"line":175,"address":[4960915],"length":1,"stats":{"Line":0},"fn_name":null},{"line":176,"address":[4961042],"length":1,"stats":{"Line":0},"fn_name":null},{"line":177,"address":[4961113,4961181],"length":1,"stats":{"Line":0},"fn_name":null},{"line":179,"address":[4961449,4961581,4961309,4961375],"length":1,"stats":{"Line":0},"fn_name":null},{"line":182,"address":[4961565,4961441],"length":1,"stats":{"Line":0},"fn_name":null},{"line":183,"address":[4961534],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":19,"coverable":32}]};
    </script>
    <script crossorigin>/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict';(function(d,r){"object"===typeof exports&&"undefined"!==typeof module?r(exports):"function"===typeof define&&define.amd?define(["exports"],r):(d=d||self,r(d.React={}))})(this,function(d){function r(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function w(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function da(){}function L(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function ea(a,b,c){var g,e={},fa=null,d=null;if(null!=b)for(g in void 0!==b.ref&&(d=b.ref),void 0!==b.key&&(fa=""+b.key),b)ha.call(b,g)&&!ia.hasOwnProperty(g)&&(e[g]=b[g]);var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){for(var k=Array(h),f=0;f<h;f++)k[f]=arguments[f+2];e.children=k}if(a&&a.defaultProps)for(g in h=a.defaultProps,
h)void 0===e[g]&&(e[g]=h[g]);return{$$typeof:x,type:a,key:fa,ref:d,props:e,_owner:M.current}}function va(a,b){return{$$typeof:x,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function N(a){return"object"===typeof a&&null!==a&&a.$$typeof===x}function wa(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}function ja(a,b,c,g){if(C.length){var e=C.pop();e.result=a;e.keyPrefix=b;e.func=c;e.context=g;e.count=0;return e}return{result:a,keyPrefix:b,func:c,
context:g,count:0}}function ka(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>C.length&&C.push(a)}function O(a,b,c,g){var e=typeof a;if("undefined"===e||"boolean"===e)a=null;var d=!1;if(null===a)d=!0;else switch(e){case "string":case "number":d=!0;break;case "object":switch(a.$$typeof){case x:case xa:d=!0}}if(d)return c(g,a,""===b?"."+P(a,0):b),1;d=0;b=""===b?".":b+":";if(Array.isArray(a))for(var f=0;f<a.length;f++){e=a[f];var h=b+P(e,f);d+=O(e,h,c,g)}else if(null===a||
"object"!==typeof a?h=null:(h=la&&a[la]||a["@@iterator"],h="function"===typeof h?h:null),"function"===typeof h)for(a=h.call(a),f=0;!(e=a.next()).done;)e=e.value,h=b+P(e,f++),d+=O(e,h,c,g);else if("object"===e)throw c=""+a,Error(r(31,"[object Object]"===c?"object with keys {"+Object.keys(a).join(", ")+"}":c,""));return d}function Q(a,b,c){return null==a?0:O(a,"",b,c)}function P(a,b){return"object"===typeof a&&null!==a&&null!=a.key?wa(a.key):b.toString(36)}function ya(a,b,c){a.func.call(a.context,b,
a.count++)}function za(a,b,c){var g=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?R(a,g,c,function(a){return a}):null!=a&&(N(a)&&(a=va(a,e+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(ma,"$&/")+"/")+c)),g.push(a))}function R(a,b,c,g,e){var d="";null!=c&&(d=(""+c).replace(ma,"$&/")+"/");b=ja(b,d,g,e);Q(a,za,b);ka(b)}function t(){var a=na.current;if(null===a)throw Error(r(321));return a}function S(a,b){var c=a.length;a.push(b);a:for(;;){var g=c-1>>>1,e=a[g];if(void 0!==
e&&0<D(e,b))a[g]=b,a[c]=e,c=g;else break a}}function n(a){a=a[0];return void 0===a?null:a}function E(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var g=0,e=a.length;g<e;){var d=2*(g+1)-1,f=a[d],h=d+1,k=a[h];if(void 0!==f&&0>D(f,c))void 0!==k&&0>D(k,f)?(a[g]=k,a[h]=c,g=h):(a[g]=f,a[d]=c,g=d);else if(void 0!==k&&0>D(k,c))a[g]=k,a[h]=c,g=h;else break a}}return b}return null}function D(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}function F(a){for(var b=n(u);null!==
b;){if(null===b.callback)E(u);else if(b.startTime<=a)E(u),b.sortIndex=b.expirationTime,S(p,b);else break;b=n(u)}}function T(a){y=!1;F(a);if(!v)if(null!==n(p))v=!0,z(U);else{var b=n(u);null!==b&&G(T,b.startTime-a)}}function U(a,b){v=!1;y&&(y=!1,V());H=!0;var c=m;try{F(b);for(l=n(p);null!==l&&(!(l.expirationTime>b)||a&&!W());){var g=l.callback;if(null!==g){l.callback=null;m=l.priorityLevel;var e=g(l.expirationTime<=b);b=q();"function"===typeof e?l.callback=e:l===n(p)&&E(p);F(b)}else E(p);l=n(p)}if(null!==
l)var d=!0;else{var f=n(u);null!==f&&G(T,f.startTime-b);d=!1}return d}finally{l=null,m=c,H=!1}}function oa(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}var f="function"===typeof Symbol&&Symbol.for,x=f?Symbol.for("react.element"):60103,xa=f?Symbol.for("react.portal"):60106,Aa=f?Symbol.for("react.fragment"):60107,Ba=f?Symbol.for("react.strict_mode"):60108,Ca=f?Symbol.for("react.profiler"):60114,Da=f?Symbol.for("react.provider"):60109,
Ea=f?Symbol.for("react.context"):60110,Fa=f?Symbol.for("react.forward_ref"):60112,Ga=f?Symbol.for("react.suspense"):60113,Ha=f?Symbol.for("react.memo"):60115,Ia=f?Symbol.for("react.lazy"):60116,la="function"===typeof Symbol&&Symbol.iterator,pa=Object.getOwnPropertySymbols,Ja=Object.prototype.hasOwnProperty,Ka=Object.prototype.propertyIsEnumerable,I=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+
String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},c)).join("")?!1:!0}catch(g){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var c=Object(a);for(var g,e=1;e<arguments.length;e++){var d=Object(arguments[e]);
for(var f in d)Ja.call(d,f)&&(c[f]=d[f]);if(pa){g=pa(d);for(var h=0;h<g.length;h++)Ka.call(d,g[h])&&(c[g[h]]=d[g[h]])}}return c},ca={isMounted:function(a){return!1},enqueueForceUpdate:function(a,b,c){},enqueueReplaceState:function(a,b,c,d){},enqueueSetState:function(a,b,c,d){}},ba={};w.prototype.isReactComponent={};w.prototype.setState=function(a,b){if("object"!==typeof a&&"function"!==typeof a&&null!=a)throw Error(r(85));this.updater.enqueueSetState(this,a,b,"setState")};w.prototype.forceUpdate=
function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};da.prototype=w.prototype;f=L.prototype=new da;f.constructor=L;I(f,w.prototype);f.isPureReactComponent=!0;var M={current:null},ha=Object.prototype.hasOwnProperty,ia={key:!0,ref:!0,__self:!0,__source:!0},ma=/\/+/g,C=[],na={current:null},X;if("undefined"===typeof window||"function"!==typeof MessageChannel){var A=null,qa=null,ra=function(){if(null!==A)try{var a=q();A(!0,a);A=null}catch(b){throw setTimeout(ra,0),b;}},La=Date.now();var q=
function(){return Date.now()-La};var z=function(a){null!==A?setTimeout(z,0,a):(A=a,setTimeout(ra,0))};var G=function(a,b){qa=setTimeout(a,b)};var V=function(){clearTimeout(qa)};var W=function(){return!1};f=X=function(){}}else{var Y=window.performance,sa=window.Date,Ma=window.setTimeout,Na=window.clearTimeout;"undefined"!==typeof console&&(f=window.cancelAnimationFrame,"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),
"function"!==typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));if("object"===typeof Y&&"function"===typeof Y.now)q=function(){return Y.now()};else{var Oa=sa.now();q=function(){return sa.now()-Oa}}var J=!1,K=null,Z=-1,ta=5,ua=0;W=function(){return q()>=ua};f=function(){};X=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):
ta=0<a?Math.floor(1E3/a):5};var B=new MessageChannel,aa=B.port2;B.port1.onmessage=function(){if(null!==K){var a=q();ua=a+ta;try{K(!0,a)?aa.postMessage(null):(J=!1,K=null)}catch(b){throw aa.postMessage(null),b;}}else J=!1};z=function(a){K=a;J||(J=!0,aa.postMessage(null))};G=function(a,b){Z=Ma(function(){a(q())},b)};V=function(){Na(Z);Z=-1}}var p=[],u=[],Pa=1,l=null,m=3,H=!1,v=!1,y=!1,Qa=0;B={ReactCurrentDispatcher:na,ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:I};I(B,{Scheduler:{__proto__:null,
unstable_ImmediatePriority:1,unstable_UserBlockingPriority:2,unstable_NormalPriority:3,unstable_IdlePriority:5,unstable_LowPriority:4,unstable_runWithPriority:function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=m;m=a;try{return b()}finally{m=c}},unstable_next:function(a){switch(m){case 1:case 2:case 3:var b=3;break;default:b=m}var c=m;m=b;try{return a()}finally{m=c}},unstable_scheduleCallback:function(a,b,c){var d=q();if("object"===typeof c&&null!==c){var e=c.delay;
e="number"===typeof e&&0<e?d+e:d;c="number"===typeof c.timeout?c.timeout:oa(a)}else c=oa(a),e=d;c=e+c;a={id:Pa++,callback:b,priorityLevel:a,startTime:e,expirationTime:c,sortIndex:-1};e>d?(a.sortIndex=e,S(u,a),null===n(p)&&a===n(u)&&(y?V():y=!0,G(T,e-d))):(a.sortIndex=c,S(p,a),v||H||(v=!0,z(U)));return a},unstable_cancelCallback:function(a){a.callback=null},unstable_wrapCallback:function(a){var b=m;return function(){var c=m;m=b;try{return a.apply(this,arguments)}finally{m=c}}},unstable_getCurrentPriorityLevel:function(){return m},
unstable_shouldYield:function(){var a=q();F(a);var b=n(p);return b!==l&&null!==l&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<l.expirationTime||W()},unstable_requestPaint:f,unstable_continueExecution:function(){v||H||(v=!0,z(U))},unstable_pauseExecution:function(){},unstable_getFirstCallbackNode:function(){return n(p)},get unstable_now(){return q},get unstable_forceFrameRate(){return X},unstable_Profiling:null},SchedulerTracing:{__proto__:null,__interactionsRef:null,__subscriberRef:null,
unstable_clear:function(a){return a()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++Qa},unstable_trace:function(a,b,c){return c()},unstable_wrap:function(a){return a},unstable_subscribe:function(a){},unstable_unsubscribe:function(a){}}});d.Children={map:function(a,b,c){if(null==a)return a;var d=[];R(a,d,null,b,c);return d},forEach:function(a,b,c){if(null==a)return a;b=ja(null,null,b,c);Q(a,ya,b);ka(b)},count:function(a){return Q(a,function(){return null},null)},
toArray:function(a){var b=[];R(a,b,null,function(a){return a});return b},only:function(a){if(!N(a))throw Error(r(143));return a}};d.Component=w;d.Fragment=Aa;d.Profiler=Ca;d.PureComponent=L;d.StrictMode=Ba;d.Suspense=Ga;d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B;d.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(r(267,a));var d=I({},a.props),e=a.key,f=a.ref,m=a._owner;if(null!=b){void 0!==b.ref&&(f=b.ref,m=M.current);void 0!==b.key&&(e=""+b.key);if(a.type&&a.type.defaultProps)var h=
a.type.defaultProps;for(k in b)ha.call(b,k)&&!ia.hasOwnProperty(k)&&(d[k]=void 0===b[k]&&void 0!==h?h[k]:b[k])}var k=arguments.length-2;if(1===k)d.children=c;else if(1<k){h=Array(k);for(var l=0;l<k;l++)h[l]=arguments[l+2];d.children=h}return{$$typeof:x,type:a.type,key:e,ref:f,props:d,_owner:m}};d.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:Ea,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:Da,_context:a};return a.Consumer=
a};d.createElement=ea;d.createFactory=function(a){var b=ea.bind(null,a);b.type=a;return b};d.createRef=function(){return{current:null}};d.forwardRef=function(a){return{$$typeof:Fa,render:a}};d.isValidElement=N;d.lazy=function(a){return{$$typeof:Ia,_ctor:a,_status:-1,_result:null}};d.memo=function(a,b){return{$$typeof:Ha,type:a,compare:void 0===b?null:b}};d.useCallback=function(a,b){return t().useCallback(a,b)};d.useContext=function(a,b){return t().useContext(a,b)};d.useDebugValue=function(a,b){};
d.useEffect=function(a,b){return t().useEffect(a,b)};d.useImperativeHandle=function(a,b,c){return t().useImperativeHandle(a,b,c)};d.useLayoutEffect=function(a,b){return t().useLayoutEffect(a,b)};d.useMemo=function(a,b){return t().useMemo(a,b)};d.useReducer=function(a,b,c){return t().useReducer(a,b,c)};d.useRef=function(a){return t().useRef(a)};d.useState=function(a){return t().useState(a)};d.version="16.13.1"});
</script>
    <script crossorigin>/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/*
 Modernizr 3.0.0pre (Custom Build) | MIT
*/
'use strict';(function(I,ea){"object"===typeof exports&&"undefined"!==typeof module?ea(exports,require("react")):"function"===typeof define&&define.amd?define(["exports","react"],ea):(I=I||self,ea(I.ReactDOM={},I.React))})(this,function(I,ea){function k(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function ji(a,b,c,d,e,f,g,h,m){yb=!1;gc=null;ki.apply(li,arguments)}function mi(a,b,c,d,e,f,g,h,m){ji.apply(this,arguments);if(yb){if(yb){var n=gc;yb=!1;gc=null}else throw Error(k(198));hc||(hc=!0,pd=n)}}function lf(a,b,c){var d=a.type||"unknown-event";a.currentTarget=mf(c);mi(d,b,void 0,a);a.currentTarget=null}function nf(){if(ic)for(var a in cb){var b=cb[a],c=ic.indexOf(a);if(!(-1<c))throw Error(k(96,a));if(!jc[c]){if(!b.extractEvents)throw Error(k(97,a));jc[c]=b;c=b.eventTypes;for(var d in c){var e=
void 0;var f=c[d],g=b,h=d;if(qd.hasOwnProperty(h))throw Error(k(99,h));qd[h]=f;var m=f.phasedRegistrationNames;if(m){for(e in m)m.hasOwnProperty(e)&&of(m[e],g,h);e=!0}else f.registrationName?(of(f.registrationName,g,h),e=!0):e=!1;if(!e)throw Error(k(98,d,a));}}}}function of(a,b,c){if(db[a])throw Error(k(100,a));db[a]=b;rd[a]=b.eventTypes[c].dependencies}function pf(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!cb.hasOwnProperty(c)||cb[c]!==d){if(cb[c])throw Error(k(102,c));cb[c]=
d;b=!0}}b&&nf()}function qf(a){if(a=rf(a)){if("function"!==typeof sd)throw Error(k(280));var b=a.stateNode;b&&(b=td(b),sd(a.stateNode,a.type,b))}}function sf(a){eb?fb?fb.push(a):fb=[a]:eb=a}function tf(){if(eb){var a=eb,b=fb;fb=eb=null;qf(a);if(b)for(a=0;a<b.length;a++)qf(b[a])}}function ud(){if(null!==eb||null!==fb)vd(),tf()}function uf(a,b,c){if(wd)return a(b,c);wd=!0;try{return vf(a,b,c)}finally{wd=!1,ud()}}function ni(a){if(wf.call(xf,a))return!0;if(wf.call(yf,a))return!1;if(oi.test(a))return xf[a]=
!0;yf[a]=!0;return!1}function pi(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case "function":case "symbol":return!0;case "boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return"data-"!==a&&"aria-"!==a;default:return!1}}function qi(a,b,c,d){if(null===b||"undefined"===typeof b||pi(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function L(a,
b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f}function xd(a,b,c,d){var e=E.hasOwnProperty(b)?E[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||"o"!==b[0]&&"O"!==b[0]||"n"!==b[1]&&"N"!==b[1]?!1:!0;f||(qi(b,c,e,d)&&(c=null),d||null===e?ni(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:"":c:(b=e.attributeName,
d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function zb(a){if(null===a||"object"!==typeof a)return null;a=zf&&a[zf]||a["@@iterator"];return"function"===typeof a?a:null}function ri(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b();a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}}function na(a){if(null==a)return null;
if("function"===typeof a)return a.displayName||a.name||null;if("string"===typeof a)return a;switch(a){case Ma:return"Fragment";case gb:return"Portal";case kc:return"Profiler";case Af:return"StrictMode";case lc:return"Suspense";case yd:return"SuspenseList"}if("object"===typeof a)switch(a.$$typeof){case Bf:return"Context.Consumer";case Cf:return"Context.Provider";case zd:var b=a.render;b=b.displayName||b.name||"";return a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case Ad:return na(a.type);
case Df:return na(a.render);case Ef:if(a=1===a._status?a._result:null)return na(a)}return null}function Bd(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=na(a.type);c=null;d&&(c=na(d.type));d=f;f="";e?f=" (at "+e.fileName.replace(si,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")");c="\n    in "+(d||"Unknown")+f}b+=c;a=a.return}while(a);return b}function va(a){switch(typeof a){case "boolean":case "number":case "object":case "string":case "undefined":return a;
default:return""}}function Ff(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function ti(a){var b=Ff(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a;f.call(this,a)}});Object.defineProperty(a,
b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null;delete a[b]}}}}function mc(a){a._valueTracker||(a._valueTracker=ti(a))}function Gf(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d="";a&&(d=Ff(a)?a.checked?"true":"false":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Cd(a,b){var c=b.checked;return M({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=
c?c:a._wrapperState.initialChecked})}function Hf(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=va(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function If(a,b){b=b.checked;null!=b&&xd(a,"checked",b,!1)}function Dd(a,b){If(a,b);var c=va(b.value),d=b.type;if(null!=c)if("number"===d){if(0===c&&""===a.value||a.value!=c)a.value=""+c}else a.value!==
""+c&&(a.value=""+c);else if("submit"===d||"reset"===d){a.removeAttribute("value");return}b.hasOwnProperty("value")?Ed(a,b.type,c):b.hasOwnProperty("defaultValue")&&Ed(a,b.type,va(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Jf(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue;c||b===a.value||(a.value=
b);a.defaultValue=b}c=a.name;""!==c&&(a.name="");a.defaultChecked=!!a._wrapperState.initialChecked;""!==c&&(a.name=c)}function Ed(a,b,c){if("number"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c)}function ui(a){var b="";ea.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function Fd(a,b){a=M({children:void 0},b);if(b=ui(b.children))a.children=b;return a}function hb(a,b,c,d){a=a.options;if(b){b={};
for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=""+va(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function Gd(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(k(91));return M({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}
function Kf(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(k(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(k(93));c=c[0]}b=c}null==b&&(b="");c=b}a._wrapperState={initialValue:va(c)}}function Lf(a,b){var c=va(b.value),d=va(b.defaultValue);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=""+d)}function Mf(a,b){b=a.textContent;b===a._wrapperState.initialValue&&""!==
b&&null!==b&&(a.value=b)}function Nf(a){switch(a){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hd(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?Nf(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}function nc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;return c}function oc(a){if(Id[a])return Id[a];
if(!ib[a])return a;var b=ib[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Of)return Id[a]=b[c];return a}function Jd(a){var b=Pf.get(a);void 0===b&&(b=new Map,Pf.set(a,b));return b}function Na(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.effectTag&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Qf(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Rf(a){if(Na(a)!==
a)throw Error(k(188));}function vi(a){var b=a.alternate;if(!b){b=Na(a);if(null===b)throw Error(k(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Rf(e),a;if(f===d)return Rf(e),b;f=f.sibling}throw Error(k(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=
f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(k(189));}}if(c.alternate!==d)throw Error(k(190));}if(3!==c.tag)throw Error(k(188));return c.stateNode.current===c?a:b}function Sf(a){a=vi(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}function jb(a,b){if(null==
b)throw Error(k(30));if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function Kd(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}function pc(a){null!==a&&(Ab=jb(Ab,a));a=Ab;Ab=null;if(a){Kd(a,wi);if(Ab)throw Error(k(95));if(hc)throw a=pd,hc=!1,pd=null,a;}}function Ld(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:
a}function Tf(a){if(!wa)return!1;a="on"+a;var b=a in document;b||(b=document.createElement("div"),b.setAttribute(a,"return;"),b="function"===typeof b[a]);return b}function Uf(a){a.topLevelType=null;a.nativeEvent=null;a.targetInst=null;a.ancestors.length=0;10>qc.length&&qc.push(a)}function Vf(a,b,c,d){if(qc.length){var e=qc.pop();e.topLevelType=a;e.eventSystemFlags=d;e.nativeEvent=b;e.targetInst=c;return e}return{topLevelType:a,eventSystemFlags:d,nativeEvent:b,targetInst:c,ancestors:[]}}function Wf(a){var b=
a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;b=c.tag;5!==b&&6!==b||a.ancestors.push(c);c=Bb(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=Ld(a.nativeEvent);d=a.topLevelType;var f=a.nativeEvent,g=a.eventSystemFlags;0===c&&(g|=64);for(var h=null,m=0;m<jc.length;m++){var n=jc[m];n&&(n=n.extractEvents(d,b,f,e,g))&&(h=jb(h,n))}pc(h)}}function Md(a,
b,c){if(!c.has(a)){switch(a){case "scroll":Cb(b,"scroll",!0);break;case "focus":case "blur":Cb(b,"focus",!0);Cb(b,"blur",!0);c.set("blur",null);c.set("focus",null);break;case "cancel":case "close":Tf(a)&&Cb(b,a,!0);break;case "invalid":case "submit":case "reset":break;default:-1===Db.indexOf(a)&&w(a,b)}c.set(a,null)}}function xi(a,b){var c=Jd(b);Nd.forEach(function(a){Md(a,b,c)});yi.forEach(function(a){Md(a,b,c)})}function Od(a,b,c,d,e){return{blockedOn:a,topLevelType:b,eventSystemFlags:c|32,nativeEvent:e,
container:d}}function Xf(a,b){switch(a){case "focus":case "blur":xa=null;break;case "dragenter":case "dragleave":ya=null;break;case "mouseover":case "mouseout":za=null;break;case "pointerover":case "pointerout":Eb.delete(b.pointerId);break;case "gotpointercapture":case "lostpointercapture":Fb.delete(b.pointerId)}}function Gb(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=Od(b,c,d,e,f),null!==b&&(b=Hb(b),null!==b&&Yf(b)),a;a.eventSystemFlags|=d;return a}function zi(a,b,c,d,e){switch(b){case "focus":return xa=
Gb(xa,a,b,c,d,e),!0;case "dragenter":return ya=Gb(ya,a,b,c,d,e),!0;case "mouseover":return za=Gb(za,a,b,c,d,e),!0;case "pointerover":var f=e.pointerId;Eb.set(f,Gb(Eb.get(f)||null,a,b,c,d,e));return!0;case "gotpointercapture":return f=e.pointerId,Fb.set(f,Gb(Fb.get(f)||null,a,b,c,d,e)),!0}return!1}function Ai(a){var b=Bb(a.target);if(null!==b){var c=Na(b);if(null!==c)if(b=c.tag,13===b){if(b=Qf(c),null!==b){a.blockedOn=b;Pd(a.priority,function(){Bi(c)});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=
3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}function rc(a){if(null!==a.blockedOn)return!1;var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(null!==b){var c=Hb(b);null!==c&&Yf(c);a.blockedOn=b;return!1}return!0}function Zf(a,b,c){rc(a)&&c.delete(b)}function Ci(){for(Rd=!1;0<fa.length;){var a=fa[0];if(null!==a.blockedOn){a=Hb(a.blockedOn);null!==a&&Di(a);break}var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);null!==b?a.blockedOn=b:fa.shift()}null!==
xa&&rc(xa)&&(xa=null);null!==ya&&rc(ya)&&(ya=null);null!==za&&rc(za)&&(za=null);Eb.forEach(Zf);Fb.forEach(Zf)}function Ib(a,b){a.blockedOn===b&&(a.blockedOn=null,Rd||(Rd=!0,$f(ag,Ci)))}function bg(a){if(0<fa.length){Ib(fa[0],a);for(var b=1;b<fa.length;b++){var c=fa[b];c.blockedOn===a&&(c.blockedOn=null)}}null!==xa&&Ib(xa,a);null!==ya&&Ib(ya,a);null!==za&&Ib(za,a);b=function(b){return Ib(b,a)};Eb.forEach(b);Fb.forEach(b);for(b=0;b<Jb.length;b++)c=Jb[b],c.blockedOn===a&&(c.blockedOn=null);for(;0<Jb.length&&
(b=Jb[0],null===b.blockedOn);)Ai(b),null===b.blockedOn&&Jb.shift()}function Sd(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1],f="on"+(e[0].toUpperCase()+e.slice(1));f={phasedRegistrationNames:{bubbled:f,captured:f+"Capture"},dependencies:[d],eventPriority:b};Td.set(d,b);cg.set(d,f);dg[e]=f}}function w(a,b){Cb(b,a,!1)}function Cb(a,b,c){var d=Td.get(b);switch(void 0===d?2:d){case 0:d=Ei.bind(null,b,1,a);break;case 1:d=Fi.bind(null,b,1,a);break;default:d=sc.bind(null,b,1,a)}c?a.addEventListener(b,
d,!0):a.addEventListener(b,d,!1)}function Ei(a,b,c,d){Oa||vd();var e=sc,f=Oa;Oa=!0;try{eg(e,a,b,c,d)}finally{(Oa=f)||ud()}}function Fi(a,b,c,d){Gi(Hi,sc.bind(null,a,b,c,d))}function sc(a,b,c,d){if(tc)if(0<fa.length&&-1<Nd.indexOf(a))a=Od(null,a,b,c,d),fa.push(a);else{var e=Qd(a,b,c,d);if(null===e)Xf(a,d);else if(-1<Nd.indexOf(a))a=Od(e,a,b,c,d),fa.push(a);else if(!zi(e,a,b,c,d)){Xf(a,d);a=Vf(a,d,null,b);try{uf(Wf,a)}finally{Uf(a)}}}}function Qd(a,b,c,d){c=Ld(d);c=Bb(c);if(null!==c){var e=Na(c);if(null===
e)c=null;else{var f=e.tag;if(13===f){c=Qf(e);if(null!==c)return c;c=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;c=null}else e!==c&&(c=null)}}a=Vf(a,d,c,b);try{uf(Wf,a)}finally{Uf(a)}return null}function fg(a,b,c){return null==b||"boolean"===typeof b||""===b?"":c||"number"!==typeof b||0===b||Kb.hasOwnProperty(a)&&Kb[a]?(""+b).trim():b+"px"}function gg(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=fg(c,b[c],d);"float"===
c&&(c="cssFloat");d?a.setProperty(c,e):a[c]=e}}function Ud(a,b){if(b){if(Ii[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(k(137,a,""));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(k(60));if(!("object"===typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML))throw Error(k(61));}if(null!=b.style&&"object"!==typeof b.style)throw Error(k(62,""));}}function Vd(a,b){if(-1===a.indexOf("-"))return"string"===typeof b.is;switch(a){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;
default:return!0}}function oa(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Jd(a);b=rd[b];for(var d=0;d<b.length;d++)Md(b[d],a,c)}function uc(){}function Wd(a){a=a||("undefined"!==typeof document?document:void 0);if("undefined"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function hg(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ig(a,b){var c=hg(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,
offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=hg(c)}}function jg(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?jg(a,b.parentNode):"contains"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}function kg(){for(var a=window,b=Wd();b instanceof a.HTMLIFrameElement;){try{var c="string"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Wd(a.document)}return b}
function Xd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}function lg(a,b){switch(a){case "button":case "input":case "select":case "textarea":return!!b.autoFocus}return!1}function Yd(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"===typeof b.children||"number"===typeof b.children||"object"===typeof b.dangerouslySetInnerHTML&&
null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}function kb(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function mg(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(c===ng||c===Zd||c===$d){if(0===b)return a;b--}else c===og&&b++}a=a.previousSibling}return null}function Bb(a){var b=a[Aa];if(b)return b;for(var c=a.parentNode;c;){if(b=c[Lb]||c[Aa]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=mg(a);null!==
a;){if(c=a[Aa])return c;a=mg(a)}return b}a=c;c=a.parentNode}return null}function Hb(a){a=a[Aa]||a[Lb];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Pa(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(k(33));}function ae(a){return a[vc]||null}function pa(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}function pg(a,b){var c=a.stateNode;if(!c)return null;var d=td(c);if(!d)return null;c=d[b];a:switch(b){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(d=
!d.disabled)||(a=a.type,d=!("button"===a||"input"===a||"select"===a||"textarea"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!==typeof c)throw Error(k(231,b,typeof c));return c}function qg(a,b,c){if(b=pg(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a)}function Ji(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=pa(b);for(b=c.length;0<b--;)qg(c[b],
"captured",a);for(b=0;b<c.length;b++)qg(c[b],"bubbled",a)}}function be(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=pg(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a))}function Ki(a){a&&a.dispatchConfig.registrationName&&be(a._targetInst,null,a)}function lb(a){Kd(a,Ji)}function rg(){if(wc)return wc;var a,b=ce,c=b.length,d,e="value"in Ba?Ba.value:Ba.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=
c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return wc=e.slice(a,1<d?1-d:void 0)}function xc(){return!0}function yc(){return!1}function R(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?xc:yc;this.isPropagationStopped=yc;return this}function Li(a,b,c,d){if(this.eventPool.length){var e=
this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}function Mi(a){if(!(a instanceof this))throw Error(k(279));a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function sg(a){a.eventPool=[];a.getPooled=Li;a.release=Mi}function tg(a,b){switch(a){case "keyup":return-1!==Ni.indexOf(b.keyCode);case "keydown":return 229!==b.keyCode;case "keypress":case "mousedown":case "blur":return!0;default:return!1}}function ug(a){a=a.detail;return"object"===typeof a&&"data"in
a?a.data:null}function Oi(a,b){switch(a){case "compositionend":return ug(b);case "keypress":if(32!==b.which)return null;vg=!0;return wg;case "textInput":return a=b.data,a===wg&&vg?null:a;default:return null}}function Pi(a,b){if(mb)return"compositionend"===a||!de&&tg(a,b)?(a=rg(),wc=ce=Ba=null,mb=!1,a):null;switch(a){case "paste":return null;case "keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;
case "compositionend":return xg&&"ko"!==b.locale?null:b.data;default:return null}}function yg(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Qi[a.type]:"textarea"===b?!0:!1}function zg(a,b,c){a=R.getPooled(Ag.change,a,b,c);a.type="change";sf(c);lb(a);return a}function Ri(a){pc(a)}function zc(a){var b=Pa(a);if(Gf(b))return a}function Si(a,b){if("change"===a)return b}function Bg(){Mb&&(Mb.detachEvent("onpropertychange",Cg),Nb=Mb=null)}function Cg(a){if("value"===a.propertyName&&
zc(Nb))if(a=zg(Nb,a,Ld(a)),Oa)pc(a);else{Oa=!0;try{ee(Ri,a)}finally{Oa=!1,ud()}}}function Ti(a,b,c){"focus"===a?(Bg(),Mb=b,Nb=c,Mb.attachEvent("onpropertychange",Cg)):"blur"===a&&Bg()}function Ui(a,b){if("selectionchange"===a||"keyup"===a||"keydown"===a)return zc(Nb)}function Vi(a,b){if("click"===a)return zc(b)}function Wi(a,b){if("input"===a||"change"===a)return zc(b)}function Xi(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Yi[a])?!!b[a]:!1}function fe(a){return Xi}
function Zi(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}function Ob(a,b){if(Qa(a,b))return!0;if("object"!==typeof a||null===a||"object"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!$i.call(b,c[d])||!Qa(a[c[d]],b[c[d]]))return!1;return!0}function Dg(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;if(ge||null==nb||nb!==Wd(c))return null;c=nb;"selectionStart"in c&&Xd(c)?c={start:c.selectionStart,
end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset});return Pb&&Ob(Pb,c)?null:(Pb=c,a=R.getPooled(Eg.select,he,a,b),a.type="select",a.target=nb,lb(a),a)}function Ac(a){var b=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function q(a,b){0>ob||(a.current=ie[ob],ie[ob]=null,ob--)}function y(a,b,c){ob++;
ie[ob]=a.current;a.current=b}function pb(a,b){var c=a.type.contextTypes;if(!c)return Ca;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function N(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Fg(a,b,c){if(B.current!==Ca)throw Error(k(168));y(B,b);y(G,c)}
function Gg(a,b,c){var d=a.stateNode;a=b.childContextTypes;if("function"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(k(108,na(b)||"Unknown",e));return M({},c,{},d)}function Bc(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ca;Ra=B.current;y(B,a);y(G,G.current);return!0}function Hg(a,b,c){var d=a.stateNode;if(!d)throw Error(k(169));c?(a=Gg(a,b,Ra),d.__reactInternalMemoizedMergedChildContext=a,q(G),q(B),y(B,a)):q(G);y(G,c)}function Cc(){switch(aj()){case Dc:return 99;
case Ig:return 98;case Jg:return 97;case Kg:return 96;case Lg:return 95;default:throw Error(k(332));}}function Mg(a){switch(a){case 99:return Dc;case 98:return Ig;case 97:return Jg;case 96:return Kg;case 95:return Lg;default:throw Error(k(332));}}function Da(a,b){a=Mg(a);return bj(a,b)}function Ng(a,b,c){a=Mg(a);return je(a,b,c)}function Og(a){null===qa?(qa=[a],Ec=je(Dc,Pg)):qa.push(a);return Qg}function ha(){if(null!==Ec){var a=Ec;Ec=null;Rg(a)}Pg()}function Pg(){if(!ke&&null!==qa){ke=!0;var a=0;
try{var b=qa;Da(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});qa=null}catch(c){throw null!==qa&&(qa=qa.slice(a+1)),je(Dc,ha),c;}finally{ke=!1}}}function Fc(a,b,c){c/=10;return 1073741821-(((1073741821-a+b/10)/c|0)+1)*c}function aa(a,b){if(a&&a.defaultProps){b=M({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c])}return b}function le(){Gc=qb=Hc=null}function me(a){var b=Ic.current;q(Ic);a.type._context._currentValue=b}function Sg(a,b){for(;null!==a;){var c=
a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else if(null!==c&&c.childExpirationTime<b)c.childExpirationTime=b;else break;a=a.return}}function rb(a,b){Hc=a;Gc=qb=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(a.expirationTime>=b&&(ia=!0),a.firstContext=null)}function W(a,b){if(Gc!==a&&!1!==b&&0!==b){if("number"!==typeof b||1073741823===b)Gc=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===qb){if(null===
Hc)throw Error(k(308));qb=b;Hc.dependencies={expirationTime:0,firstContext:b,responders:null}}else qb=qb.next=b}return a._currentValue}function ne(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function oe(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function Ea(a,b){a={expirationTime:a,suspenseConfig:b,tag:Tg,payload:null,callback:null,next:null};return a.next=
a}function Fa(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}function Ug(a,b){var c=a.alternate;null!==c&&oe(c,a);a=a.updateQueue;c=a.baseQueue;null===c?(a.baseQueue=b.next=b,b.next=b):(b.next=c.next,c.next=b)}function Qb(a,b,c,d){var e=a.updateQueue;Ga=!1;var f=e.baseQueue,g=e.shared.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next;g.next=h}f=g;e.shared.pending=null;h=a.alternate;null!==h&&(h=h.updateQueue,null!==h&&
(h.baseQueue=g))}if(null!==f){h=f.next;var m=e.baseState,n=0,k=null,ba=null,l=null;if(null!==h){var p=h;do{g=p.expirationTime;if(g<d){var t={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===l?(ba=l=t,k=m):l=l.next=t;g>n&&(n=g)}else{null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null});Vg(g,p.suspenseConfig);a:{var q=a,r=p;g=b;t=c;switch(r.tag){case 1:q=
r.payload;if("function"===typeof q){m=q.call(t,m,g);break a}m=q;break a;case 3:q.effectTag=q.effectTag&-4097|64;case Tg:q=r.payload;g="function"===typeof q?q.call(t,m,g):q;if(null===g||void 0===g)break a;m=M({},m,g);break a;case Jc:Ga=!0}}null!==p.callback&&(a.effectTag|=32,g=e.effects,null===g?e.effects=[p]:g.push(p))}p=p.next;if(null===p||p===h)if(g=e.shared.pending,null===g)break;else p=f.next=g.next,g.next=h,e.baseQueue=f=g,e.shared.pending=null}while(1)}null===l?k=m:l.next=ba;e.baseState=k;e.baseQueue=
l;Kc(n);a.expirationTime=n;a.memoizedState=m}}function Wg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=e;e=c;if("function"!==typeof d)throw Error(k(191,d));d.call(e)}}}function Lc(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:M({},b,c);a.memoizedState=c;0===a.expirationTime&&(a.updateQueue.baseState=c)}function Xg(a,b,c,d,e,f,g){a=a.stateNode;return"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,
f,g):b.prototype&&b.prototype.isPureReactComponent?!Ob(c,d)||!Ob(e,f):!0}function Yg(a,b,c){var d=!1,e=Ca;var f=b.contextType;"object"===typeof f&&null!==f?f=W(f):(e=N(b)?Ra:B.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?pb(a,e):Ca);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Mc;a.stateNode=b;b._reactInternalFiber=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}function Zg(a,
b,c,d){a=b.state;"function"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);"function"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Mc.enqueueReplaceState(b,b.state,null)}function pe(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=$g;ne(a);var f=b.contextType;"object"===typeof f&&null!==f?e.context=W(f):(f=N(b)?Ra:B.current,e.context=pb(a,f));Qb(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;
"function"===typeof f&&(Lc(a,b,f,c),e.state=a.memoizedState);"function"===typeof b.getDerivedStateFromProps||"function"===typeof e.getSnapshotBeforeUpdate||"function"!==typeof e.UNSAFE_componentWillMount&&"function"!==typeof e.componentWillMount||(b=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Mc.enqueueReplaceState(e,e.state,null),Qb(a,c,e,d),e.state=a.memoizedState);"function"===
typeof e.componentDidMount&&(a.effectTag|=4)}function Rb(a,b,c){a=c.ref;if(null!==a&&"function"!==typeof a&&"object"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(k(309));var d=c.stateNode}if(!d)throw Error(k(147,a));var e=""+a;if(null!==b&&null!==b.ref&&"function"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===$g&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if("string"!==typeof a)throw Error(k(284));if(!c._owner)throw Error(k(290,
a));}return a}function Nc(a,b){if("textarea"!==a.type)throw Error(k(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,""));}function ah(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,
b),b=b.sibling;return a}function e(a,b){a=Sa(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=qe(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function m(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Rb(a,b,c),d.return=a,d;d=Oc(c.type,
c.key,c.props,null,a.mode,d);d.ref=Rb(a,b,c);d.return=a;return d}function n(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=re(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function l(a,b,c,d,f){if(null===b||7!==b.tag)return b=Ha(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function ba(a,b,c){if("string"===typeof b||"number"===typeof b)return b=qe(""+b,a.mode,c),b.return=a,b;if("object"===
typeof b&&null!==b){switch(b.$$typeof){case Pc:return c=Oc(b.type,b.key,b.props,null,a.mode,c),c.ref=Rb(a,null,b),c.return=a,c;case gb:return b=re(b,a.mode,c),b.return=a,b}if(Qc(b)||zb(b))return b=Ha(b,a.mode,c,null),b.return=a,b;Nc(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if("string"===typeof c||"number"===typeof c)return null!==e?null:h(a,b,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case Pc:return c.key===e?c.type===Ma?l(a,b,c.props.children,d,e):m(a,b,c,
d):null;case gb:return c.key===e?n(a,b,c,d):null}if(Qc(c)||zb(c))return null!==e?null:l(a,b,c,d,null);Nc(a,c)}return null}function t(a,b,c,d,e){if("string"===typeof d||"number"===typeof d)return a=a.get(c)||null,h(b,a,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case Pc:return a=a.get(null===d.key?c:d.key)||null,d.type===Ma?l(b,a,d.props.children,e,d.key):m(b,a,d,e);case gb:return a=a.get(null===d.key?c:d.key)||null,n(b,a,d,e)}if(Qc(d)||zb(d))return a=a.get(c)||null,l(b,a,d,e,null);
Nc(b,d)}return null}function q(e,g,h,m){for(var n=null,k=null,l=g,r=g=0,C=null;null!==l&&r<h.length;r++){l.index>r?(C=l,l=null):C=l.sibling;var O=p(e,l,h[r],m);if(null===O){null===l&&(l=C);break}a&&l&&null===O.alternate&&b(e,l);g=f(O,g,r);null===k?n=O:k.sibling=O;k=O;l=C}if(r===h.length)return c(e,l),n;if(null===l){for(;r<h.length;r++)l=ba(e,h[r],m),null!==l&&(g=f(l,g,r),null===k?n=l:k.sibling=l,k=l);return n}for(l=d(e,l);r<h.length;r++)C=t(l,e,r,h[r],m),null!==C&&(a&&null!==C.alternate&&l.delete(null===
C.key?r:C.key),g=f(C,g,r),null===k?n=C:k.sibling=C,k=C);a&&l.forEach(function(a){return b(e,a)});return n}function w(e,g,h,n){var m=zb(h);if("function"!==typeof m)throw Error(k(150));h=m.call(h);if(null==h)throw Error(k(151));for(var l=m=null,r=g,C=g=0,O=null,v=h.next();null!==r&&!v.done;C++,v=h.next()){r.index>C?(O=r,r=null):O=r.sibling;var q=p(e,r,v.value,n);if(null===q){null===r&&(r=O);break}a&&r&&null===q.alternate&&b(e,r);g=f(q,g,C);null===l?m=q:l.sibling=q;l=q;r=O}if(v.done)return c(e,r),m;
if(null===r){for(;!v.done;C++,v=h.next())v=ba(e,v.value,n),null!==v&&(g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);return m}for(r=d(e,r);!v.done;C++,v=h.next())v=t(r,e,C,v.value,n),null!==v&&(a&&null!==v.alternate&&r.delete(null===v.key?C:v.key),g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);a&&r.forEach(function(a){return b(e,a)});return m}return function(a,d,f,h){var m="object"===typeof f&&null!==f&&f.type===Ma&&null===f.key;m&&(f=f.props.children);var n="object"===typeof f&&null!==f;if(n)switch(f.$$typeof){case Pc:a:{n=
f.key;for(m=d;null!==m;){if(m.key===n){switch(m.tag){case 7:if(f.type===Ma){c(a,m.sibling);d=e(m,f.props.children);d.return=a;a=d;break a}break;default:if(m.elementType===f.type){c(a,m.sibling);d=e(m,f.props);d.ref=Rb(a,m,f);d.return=a;a=d;break a}}c(a,m);break}else b(a,m);m=m.sibling}f.type===Ma?(d=Ha(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Oc(f.type,f.key,f.props,null,a.mode,h),h.ref=Rb(a,d,f),h.return=a,a=h)}return g(a);case gb:a:{for(m=f.key;null!==d;){if(d.key===m)if(4===d.tag&&d.stateNode.containerInfo===
f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=re(f,a.mode,h);d.return=a;a=d}return g(a)}if("string"===typeof f||"number"===typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=qe(f,a.mode,h),d.return=a,a=d),g(a);if(Qc(f))return q(a,d,f,h);if(zb(f))return w(a,d,f,h);n&&Nc(a,f);if("undefined"===typeof f&&!m)switch(a.tag){case 1:case 0:throw a=
a.type,Error(k(152,a.displayName||a.name||"Component"));}return c(a,d)}}function Ta(a){if(a===Sb)throw Error(k(174));return a}function se(a,b){y(Tb,b);y(Ub,a);y(ja,Sb);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Hd(null,"");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=Hd(b,a)}q(ja);y(ja,b)}function tb(a){q(ja);q(Ub);q(Tb)}function bh(a){Ta(Tb.current);var b=Ta(ja.current);var c=Hd(b,a.type);b!==c&&(y(Ub,a),y(ja,c))}function te(a){Ub.current===
a&&(q(ja),q(Ub))}function Rc(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||c.data===$d||c.data===Zd))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.effectTag&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}function ue(a,b){return{responder:a,props:b}}
function S(){throw Error(k(321));}function ve(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!Qa(a[c],b[c]))return!1;return!0}function we(a,b,c,d,e,f){Ia=f;z=b;b.memoizedState=null;b.updateQueue=null;b.expirationTime=0;Sc.current=null===a||null===a.memoizedState?dj:ej;a=c(d,e);if(b.expirationTime===Ia){f=0;do{b.expirationTime=0;if(!(25>f))throw Error(k(301));f+=1;J=K=null;b.updateQueue=null;Sc.current=fj;a=c(d,e)}while(b.expirationTime===Ia)}Sc.current=Tc;b=null!==K&&null!==K.next;
Ia=0;J=K=z=null;Uc=!1;if(b)throw Error(k(300));return a}function ub(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===J?z.memoizedState=J=a:J=J.next=a;return J}function vb(){if(null===K){var a=z.alternate;a=null!==a?a.memoizedState:null}else a=K.next;var b=null===J?z.memoizedState:J.next;if(null!==b)J=b,K=a;else{if(null===a)throw Error(k(310));K=a;a={memoizedState:K.memoizedState,baseState:K.baseState,baseQueue:K.baseQueue,queue:K.queue,next:null};null===J?z.memoizedState=
J=a:J=J.next=a}return J}function Ua(a,b){return"function"===typeof b?b(a):b}function Vc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=K,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,m=e;do{var n=m.expirationTime;if(n<Ia){var l={expirationTime:m.expirationTime,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,
next:null};null===h?(g=h=l,f=d):h=h.next=l;n>z.expirationTime&&(z.expirationTime=n,Kc(n))}else null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null}),Vg(n,m.suspenseConfig),d=m.eagerReducer===a?m.eagerState:a(d,m.action);m=m.next}while(null!==m&&m!==e);null===h?f=d:h.next=g;Qa(d,b.memoizedState)||(ia=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,
c.dispatch]}function Wc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);Qa(f,b.memoizedState)||(ia=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function xe(a){var b=ub();"function"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Ua,
lastRenderedState:a};a=a.dispatch=ch.bind(null,z,a);return[b.memoizedState,a]}function ye(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=z.updateQueue;null===b?(b={lastEffect:null},z.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function dh(a){return vb().memoizedState}function ze(a,b,c,d){var e=ub();z.effectTag|=a;e.memoizedState=ye(1|b,c,void 0,void 0===d?null:d)}function Ae(a,b,c,d){var e=vb();
d=void 0===d?null:d;var f=void 0;if(null!==K){var g=K.memoizedState;f=g.destroy;if(null!==d&&ve(d,g.deps)){ye(b,c,f,d);return}}z.effectTag|=a;e.memoizedState=ye(1|b,c,f,d)}function eh(a,b){return ze(516,4,a,b)}function Xc(a,b){return Ae(516,4,a,b)}function fh(a,b){return Ae(4,2,a,b)}function gh(a,b){if("function"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function hh(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;
return Ae(4,2,gh.bind(null,b,a),c)}function Be(a,b){}function ih(a,b){ub().memoizedState=[a,void 0===b?null:b];return a}function Yc(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function jh(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function Ce(a,b,c){var d=Cc();Da(98>d?98:d,function(){a(!0)});Da(97<d?97:d,function(){var d=
X.suspense;X.suspense=void 0===b?null:b;try{a(!1),c()}finally{X.suspense=d}})}function ch(a,b,c){var d=ka(),e=Vb.suspense;d=Va(d,a,e);e={expirationTime:d,suspenseConfig:e,action:c,eagerReducer:null,eagerState:null,next:null};var f=b.pending;null===f?e.next=e:(e.next=f.next,f.next=e);b.pending=e;f=a.alternate;if(a===z||null!==f&&f===z)Uc=!0,e.expirationTime=Ia,z.expirationTime=Ia;else{if(0===a.expirationTime&&(null===f||0===f.expirationTime)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,
h=f(g,c);e.eagerReducer=f;e.eagerState=h;if(Qa(h,g))return}catch(m){}finally{}Ja(a,d)}}function kh(a,b){var c=la(5,null,null,0);c.elementType="DELETED";c.type="DELETED";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function lh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=""===a.pendingProps||3!==b.nodeType?
null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}function De(a){if(Wa){var b=Ka;if(b){var c=b;if(!lh(a,b)){b=kb(c.nextSibling);if(!b||!lh(a,b)){a.effectTag=a.effectTag&-1025|2;Wa=!1;ra=a;return}kh(ra,c)}ra=a;Ka=kb(b.firstChild)}else a.effectTag=a.effectTag&-1025|2,Wa=!1,ra=a}}function mh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;ra=a}function Zc(a){if(a!==ra)return!1;if(!Wa)return mh(a),Wa=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==
b&&!Yd(b,a.memoizedProps))for(b=Ka;b;)kh(a,b),b=kb(b.nextSibling);mh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(k(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(c===og){if(0===b){Ka=kb(a.nextSibling);break a}b--}else c!==ng&&c!==Zd&&c!==$d||b++}a=a.nextSibling}Ka=null}}else Ka=ra?kb(a.stateNode.nextSibling):null;return!0}function Ee(){Ka=ra=null;Wa=!1}function T(a,b,c,d){b.child=null===a?Fe(b,null,c,d):wb(b,a.child,c,d)}function nh(a,
b,c,d,e){c=c.render;var f=b.ref;rb(b,e);d=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,d,e);return b.child}function oh(a,b,c,d,e,f){if(null===a){var g=c.type;if("function"===typeof g&&!Ge(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ph(a,b,g,d,e,f);a=Oc(c.type,null,d,null,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(e<
f&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Ob,c(e,d)&&a.ref===b.ref))return sa(a,b,f);b.effectTag|=1;a=Sa(g,d);a.ref=b.ref;a.return=b;return b.child=a}function ph(a,b,c,d,e,f){return null!==a&&Ob(a.memoizedProps,d)&&a.ref===b.ref&&(ia=!1,e<f)?(b.expirationTime=a.expirationTime,sa(a,b,f)):He(a,b,c,d,f)}function qh(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function He(a,b,c,d,e){var f=N(c)?Ra:B.current;f=pb(b,f);rb(b,e);c=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=
a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,c,e);return b.child}function rh(a,b,c,d,e){if(N(c)){var f=!0;Bc(b)}else f=!1;rb(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Yg(b,c,d),pe(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var m=g.context,n=c.contextType;"object"===typeof n&&null!==n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n));var l=c.getDerivedStateFromProps,k="function"===
typeof l||"function"===typeof g.getSnapshotBeforeUpdate;k||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n);Ga=!1;var p=b.memoizedState;g.state=p;Qb(b,d,g,e);m=b.memoizedState;h!==d||p!==m||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),m=b.memoizedState),(h=Ga||Xg(b,c,h,d,p,m,n))?(k||"function"!==typeof g.UNSAFE_componentWillMount&&"function"!==typeof g.componentWillMount||("function"===typeof g.componentWillMount&&
g.componentWillMount(),"function"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"===typeof g.componentDidMount&&(b.effectTag|=4)):("function"===typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=m),g.props=d,g.state=m,g.context=n,d=h):("function"===typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,oe(a,b),h=b.memoizedProps,g.props=b.type===b.elementType?h:aa(b.type,h),m=g.context,n=c.contextType,"object"===typeof n&&null!==
n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n)),l=c.getDerivedStateFromProps,(k="function"===typeof l||"function"===typeof g.getSnapshotBeforeUpdate)||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n),Ga=!1,m=b.memoizedState,g.state=m,Qb(b,d,g,e),p=b.memoizedState,h!==d||m!==p||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),p=b.memoizedState),(l=Ga||Xg(b,c,h,d,m,p,n))?(k||"function"!==typeof g.UNSAFE_componentWillUpdate&&
"function"!==typeof g.componentWillUpdate||("function"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,p,n),"function"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,p,n)),"function"===typeof g.componentDidUpdate&&(b.effectTag|=4),"function"===typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===
a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=p),g.props=d,g.state=p,g.context=n,d=l):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=256),d=!1);return Ie(a,b,c,d,f,e)}function Ie(a,b,c,d,e,f){qh(a,b);var g=0!==(b.effectTag&64);if(!d&&!g)return e&&Hg(b,c,!1),sa(a,b,f);d=b.stateNode;gj.current=b;var h=g&&"function"!==typeof c.getDerivedStateFromError?
null:d.render();b.effectTag|=1;null!==a&&g?(b.child=wb(b,a.child,null,f),b.child=wb(b,null,h,f)):T(a,b,h,f);b.memoizedState=d.state;e&&Hg(b,c,!0);return b.child}function sh(a){var b=a.stateNode;b.pendingContext?Fg(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Fg(a,b.context,!1);se(a,b.containerInfo)}function th(a,b,c){var d=b.mode,e=b.pendingProps,f=D.current,g=!1,h;(h=0!==(b.effectTag&64))||(h=0!==(f&2)&&(null===a||null!==a.memoizedState));h?(g=!0,b.effectTag&=-65):null!==a&&null===
a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=1);y(D,f&1);if(null===a){void 0!==e.fallback&&De(b);if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;b.memoizedState=Je;b.child=e;return c}d=e.children;b.memoizedState=null;return b.child=Fe(b,null,d,c)}if(null!==a.memoizedState){a=a.child;d=a.sibling;if(g){e=e.fallback;
c=Sa(a,a.pendingProps);c.return=b;if(0===(b.mode&2)&&(g=null!==b.memoizedState?b.child.child:b.child,g!==a.child))for(c.child=g;null!==g;)g.return=c,g=g.sibling;d=Sa(d,e);d.return=b;c.sibling=d;c.childExpirationTime=0;b.memoizedState=Je;b.child=c;return d}c=wb(b,a.child,e.children,c);b.memoizedState=null;return b.child=c}a=a.child;if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;e.child=a;null!==a&&(a.return=e);if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==
a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;c.effectTag|=2;e.childExpirationTime=0;b.memoizedState=Je;b.child=e;return c}b.memoizedState=null;return b.child=wb(b,a,e.children,c)}function uh(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);Sg(a.return,b)}function Ke(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailExpiration:0,tailMode:e,
lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}function vh(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;T(a,b,d.children,c);d=D.current;if(0!==(d&2))d=d&1|2,b.effectTag|=64;else{if(null!==a&&0!==(a.effectTag&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&uh(a,c);else if(19===a.tag)uh(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===
a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}y(D,d);if(0===(b.mode&2))b.memoizedState=null;else switch(e){case "forwards":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Rc(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);Ke(b,!1,e,c,f,b.lastEffect);break;case "backwards":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Rc(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}Ke(b,
!0,c,null,f,b.lastEffect);break;case "together":Ke(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}function sa(a,b,c){null!==a&&(b.dependencies=a.dependencies);var d=b.expirationTime;0!==d&&Kc(d);if(b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw Error(k(153));if(null!==b.child){a=b.child;c=Sa(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Sa(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}
function $c(a,b){switch(a.tailMode){case "hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case "collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function hj(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return N(b.type)&&(q(G),q(B)),
null;case 3:return tb(),q(G),q(B),c=b.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==a&&null!==a.child||!Zc(b)||(b.effectTag|=4),wh(b),null;case 5:te(b);c=Ta(Tb.current);var e=b.type;if(null!==a&&null!=b.stateNode)ij(a,b,e,d,c),a.ref!==b.ref&&(b.effectTag|=128);else{if(!d){if(null===b.stateNode)throw Error(k(166));return null}a=Ta(ja.current);if(Zc(b)){d=b.stateNode;e=b.type;var f=b.memoizedProps;d[Aa]=b;d[vc]=f;switch(e){case "iframe":case "object":case "embed":w("load",
d);break;case "video":case "audio":for(a=0;a<Db.length;a++)w(Db[a],d);break;case "source":w("error",d);break;case "img":case "image":case "link":w("error",d);w("load",d);break;case "form":w("reset",d);w("submit",d);break;case "details":w("toggle",d);break;case "input":Hf(d,f);w("invalid",d);oa(c,"onChange");break;case "select":d._wrapperState={wasMultiple:!!f.multiple};w("invalid",d);oa(c,"onChange");break;case "textarea":Kf(d,f),w("invalid",d),oa(c,"onChange")}Ud(e,f);a=null;for(var g in f)if(f.hasOwnProperty(g)){var h=
f[g];"children"===g?"string"===typeof h?d.textContent!==h&&(a=["children",h]):"number"===typeof h&&d.textContent!==""+h&&(a=["children",""+h]):db.hasOwnProperty(g)&&null!=h&&oa(c,g)}switch(e){case "input":mc(d);Jf(d,f,!0);break;case "textarea":mc(d);Mf(d);break;case "select":case "option":break;default:"function"===typeof f.onClick&&(d.onclick=uc)}c=a;b.updateQueue=c;null!==c&&(b.effectTag|=4)}else{g=9===c.nodeType?c:c.ownerDocument;"http://www.w3.org/1999/xhtml"===a&&(a=Nf(e));"http://www.w3.org/1999/xhtml"===
a?"script"===e?(a=g.createElement("div"),a.innerHTML="<script>\x3c/script>",a=a.removeChild(a.firstChild)):"string"===typeof d.is?a=g.createElement(e,{is:d.is}):(a=g.createElement(e),"select"===e&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,e);a[Aa]=b;a[vc]=d;jj(a,b,!1,!1);b.stateNode=a;g=Vd(e,d);switch(e){case "iframe":case "object":case "embed":w("load",a);h=d;break;case "video":case "audio":for(h=0;h<Db.length;h++)w(Db[h],a);h=d;break;case "source":w("error",a);
h=d;break;case "img":case "image":case "link":w("error",a);w("load",a);h=d;break;case "form":w("reset",a);w("submit",a);h=d;break;case "details":w("toggle",a);h=d;break;case "input":Hf(a,d);h=Cd(a,d);w("invalid",a);oa(c,"onChange");break;case "option":h=Fd(a,d);break;case "select":a._wrapperState={wasMultiple:!!d.multiple};h=M({},d,{value:void 0});w("invalid",a);oa(c,"onChange");break;case "textarea":Kf(a,d);h=Gd(a,d);w("invalid",a);oa(c,"onChange");break;default:h=d}Ud(e,h);var m=h;for(f in m)if(m.hasOwnProperty(f)){var n=
m[f];"style"===f?gg(a,n):"dangerouslySetInnerHTML"===f?(n=n?n.__html:void 0,null!=n&&xh(a,n)):"children"===f?"string"===typeof n?("textarea"!==e||""!==n)&&Wb(a,n):"number"===typeof n&&Wb(a,""+n):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(db.hasOwnProperty(f)?null!=n&&oa(c,f):null!=n&&xd(a,f,n,g))}switch(e){case "input":mc(a);Jf(a,d,!1);break;case "textarea":mc(a);Mf(a);break;case "option":null!=d.value&&a.setAttribute("value",""+va(d.value));break;case "select":a.multiple=
!!d.multiple;c=d.value;null!=c?hb(a,!!d.multiple,c,!1):null!=d.defaultValue&&hb(a,!!d.multiple,d.defaultValue,!0);break;default:"function"===typeof h.onClick&&(a.onclick=uc)}lg(e,d)&&(b.effectTag|=4)}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)kj(a,b,a.memoizedProps,d);else{if("string"!==typeof d&&null===b.stateNode)throw Error(k(166));c=Ta(Tb.current);Ta(ja.current);Zc(b)?(c=b.stateNode,d=b.memoizedProps,c[Aa]=b,c.nodeValue!==d&&(b.effectTag|=4)):(c=(9===c.nodeType?
c:c.ownerDocument).createTextNode(d),c[Aa]=b,b.stateNode=c)}return null;case 13:q(D);d=b.memoizedState;if(0!==(b.effectTag&64))return b.expirationTime=c,b;c=null!==d;d=!1;null===a?void 0!==b.memoizedProps.fallback&&Zc(b):(e=a.memoizedState,d=null!==e,c||null===e||(e=a.child.sibling,null!==e&&(f=b.firstEffect,null!==f?(b.firstEffect=e,e.nextEffect=f):(b.firstEffect=b.lastEffect=e,e.nextEffect=null),e.effectTag=8)));if(c&&!d&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||
0!==(D.current&1))F===Xa&&(F=ad);else{if(F===Xa||F===ad)F=bd;0!==Xb&&null!==U&&(Ya(U,P),yh(U,Xb))}if(c||d)b.effectTag|=4;return null;case 4:return tb(),wh(b),null;case 10:return me(b),null;case 17:return N(b.type)&&(q(G),q(B)),null;case 19:q(D);d=b.memoizedState;if(null===d)return null;e=0!==(b.effectTag&64);f=d.rendering;if(null===f)if(e)$c(d,!1);else{if(F!==Xa||null!==a&&0!==(a.effectTag&64))for(f=b.child;null!==f;){a=Rc(f);if(null!==a){b.effectTag|=64;$c(d,!1);e=a.updateQueue;null!==e&&(b.updateQueue=
e,b.effectTag|=4);null===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;for(d=b.child;null!==d;)e=d,f=c,e.effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null,a=e.alternate,null===a?(e.childExpirationTime=0,e.expirationTime=f,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null):(e.childExpirationTime=a.childExpirationTime,e.expirationTime=a.expirationTime,e.child=a.child,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,
e.updateQueue=a.updateQueue,f=a.dependencies,e.dependencies=null===f?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders}),d=d.sibling;y(D,D.current&1|2);return b.child}f=f.sibling}}else{if(!e)if(a=Rc(f),null!==a){if(b.effectTag|=64,e=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.effectTag|=4),$c(d,!0),null===d.tail&&"hidden"===d.tailMode&&!f.alternate)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*Y()-d.renderingStartTime>d.tailExpiration&&
1<c&&(b.effectTag|=64,e=!0,$c(d,!1),b.expirationTime=b.childExpirationTime=c-1);d.isBackwards?(f.sibling=b.child,b.child=f):(c=d.last,null!==c?c.sibling=f:b.child=f,d.last=f)}return null!==d.tail?(0===d.tailExpiration&&(d.tailExpiration=Y()+500),c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=Y(),c.sibling=null,b=D.current,y(D,e?b&1|2:b&1),c):null}throw Error(k(156,b.tag));}function lj(a,b){switch(a.tag){case 1:return N(a.type)&&(q(G),q(B)),b=a.effectTag,b&4096?
(a.effectTag=b&-4097|64,a):null;case 3:tb();q(G);q(B);b=a.effectTag;if(0!==(b&64))throw Error(k(285));a.effectTag=b&-4097|64;return a;case 5:return te(a),null;case 13:return q(D),b=a.effectTag,b&4096?(a.effectTag=b&-4097|64,a):null;case 19:return q(D),null;case 4:return tb(),null;case 10:return me(a),null;default:return null}}function Le(a,b){return{value:a,source:b,stack:Bd(b)}}function Me(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=Bd(c));null!==c&&na(c.type);b=b.value;null!==a&&1===a.tag&&
na(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e;})}}function mj(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Za(a,c)}}function zh(a){var b=a.ref;if(null!==b)if("function"===typeof b)try{b(null)}catch(c){Za(a,c)}else b.current=null}function nj(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.effectTag&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===
b.type?c:aa(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(k(163));}function Ah(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.destroy;c.destroy=void 0;void 0!==d&&d()}c=c.next}while(c!==b)}}function Bh(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function oj(a,b,c,d){switch(c.tag){case 0:case 11:case 15:case 22:Bh(3,
c);return;case 1:a=c.stateNode;c.effectTag&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:aa(c.type,b.memoizedProps),a.componentDidUpdate(d,b.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Wg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Wg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.effectTag&4&&lg(c.type,c.memoizedProps)&&
a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&bg(c))));return;case 19:case 17:case 20:case 21:return}throw Error(k(163));}function Ch(a,b,c){"function"===typeof Ne&&Ne(b);switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var d=a.next;Da(97<c?97:c,function(){var a=d;do{var c=a.destroy;if(void 0!==c){var g=b;try{c()}catch(h){Za(g,
h)}}a=a.next}while(a!==d)})}break;case 1:zh(b);c=b.stateNode;"function"===typeof c.componentWillUnmount&&mj(b,c);break;case 5:zh(b);break;case 4:Dh(a,b,c)}}function Eh(a){var b=a.alternate;a.return=null;a.child=null;a.memoizedState=null;a.updateQueue=null;a.dependencies=null;a.alternate=null;a.firstEffect=null;a.lastEffect=null;a.pendingProps=null;a.memoizedProps=null;a.stateNode=null;null!==b&&Eh(b)}function Fh(a){return 5===a.tag||3===a.tag||4===a.tag}function Gh(a){a:{for(var b=a.return;null!==
b;){if(Fh(b)){var c=b;break a}b=b.return}throw Error(k(160));}b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(k(161));}c.effectTag&16&&(Wb(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Fh(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.effectTag&2)continue b;if(null===c.child||4===c.tag)continue b;
else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}d?Oe(a,c,b):Pe(a,c,b)}function Oe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=uc));else if(4!==d&&(a=a.child,null!==a))for(Oe(a,b,c),a=a.sibling;null!==a;)Oe(a,b,c),a=a.sibling}
function Pe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Pe(a,b,c),a=a.sibling;null!==a;)Pe(a,b,c),a=a.sibling}function Dh(a,b,c){for(var d=b,e=!1,f,g;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(k(160));f=e.stateNode;switch(e.tag){case 5:g=!1;break a;case 3:f=f.containerInfo;g=!0;break a;case 4:f=f.containerInfo;g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag){a:for(var h=
a,m=d,n=c,l=m;;)if(Ch(h,l,n),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===m)break a;for(;null===l.sibling;){if(null===l.return||l.return===m)break a;l=l.return}l.sibling.return=l.return;l=l.sibling}g?(h=f,m=d.stateNode,8===h.nodeType?h.parentNode.removeChild(m):h.removeChild(m)):f.removeChild(d.stateNode)}else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo;g=!0;d.child.return=d;d=d.child;continue}}else if(Ch(a,d,c),null!==d.child){d.child.return=d;d=d.child;continue}if(d===
b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;d=d.return;4===d.tag&&(e=!1)}d.sibling.return=d.return;d=d.sibling}}function Qe(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:Ah(3,b);return;case 1:return;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[vc]=d;"input"===a&&"radio"===d.type&&null!=d.name&&If(c,d);Vd(a,e);b=Vd(a,d);for(e=0;e<f.length;e+=2){var g=f[e],
h=f[e+1];"style"===g?gg(c,h):"dangerouslySetInnerHTML"===g?xh(c,h):"children"===g?Wb(c,h):xd(c,g,h,b)}switch(a){case "input":Dd(c,d);break;case "textarea":Lf(c,d);break;case "select":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,a=d.value,null!=a?hb(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?hb(c,!!d.multiple,d.defaultValue,!0):hb(c,!!d.multiple,d.multiple?[]:"",!1))}}}return;case 6:if(null===b.stateNode)throw Error(k(162));b.stateNode.nodeValue=b.memoizedProps;
return;case 3:b=b.stateNode;b.hydrate&&(b.hydrate=!1,bg(b.containerInfo));return;case 12:return;case 13:c=b;null===b.memoizedState?d=!1:(d=!0,c=b.child,Re=Y());if(null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?(f=f.style,"function"===typeof f.setProperty?f.setProperty("display","none","important"):f.display="none"):(f=a.stateNode,e=a.memoizedProps.style,e=void 0!==e&&null!==e&&e.hasOwnProperty("display")?e.display:null,f.style.display=fg("display",e));else if(6===a.tag)a.stateNode.nodeValue=d?
"":a.memoizedProps;else if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){f=a.child.sibling;f.return=a;a=f;continue}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===c)break;for(;null===a.sibling;){if(null===a.return||a.return===c)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}Hh(b);return;case 19:Hh(b);return;case 17:return}throw Error(k(163));}function Hh(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=
new pj);b.forEach(function(b){var d=qj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}function Ih(a,b,c){c=Ea(c,null);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){cd||(cd=!0,Se=d);Me(a,b)};return c}function Jh(a,b,c){c=Ea(c,null);c.tag=3;var d=a.type.getDerivedStateFromError;if("function"===typeof d){var e=b.value;c.payload=function(){Me(a,b);return d(e)}}var f=a.stateNode;null!==f&&"function"===typeof f.componentDidCatch&&(c.callback=function(){"function"!==typeof d&&
(null===La?La=new Set([this]):La.add(this),Me(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})});return c}function ka(){return(p&(ca|ma))!==H?1073741821-(Y()/10|0):0!==dd?dd:dd=1073741821-(Y()/10|0)}function Va(a,b,c){b=b.mode;if(0===(b&2))return 1073741823;var d=Cc();if(0===(b&4))return 99===d?1073741823:1073741822;if((p&ca)!==H)return P;if(null!==c)a=Fc(a,c.timeoutMs|0||5E3,250);else switch(d){case 99:a=1073741823;break;case 98:a=Fc(a,150,100);break;case 97:case 96:a=
Fc(a,5E3,250);break;case 95:a=2;break;default:throw Error(k(326));}null!==U&&a===P&&--a;return a}function ed(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){c=d.alternate;d.childExpirationTime<b&&(d.childExpirationTime=b);null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);if(null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}null!==e&&
(U===e&&(Kc(b),F===bd&&Ya(e,P)),yh(e,b));return e}function fd(a){var b=a.lastExpiredTime;if(0!==b)return b;b=a.firstPendingTime;if(!Kh(a,b))return b;var c=a.lastPingedTime;a=a.nextKnownPendingLevel;a=c>a?c:a;return 2>=a&&b!==a?0:a}function V(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=Og(Te.bind(null,a));else{var b=fd(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=ka();
1073741823===b?d=99:1===b||2===b?d=95:(d=10*(1073741821-b)-10*(1073741821-d),d=0>=d?99:250>=d?98:5250>=d?97:95);if(null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Qg&&Rg(c)}a.callbackExpirationTime=b;a.callbackPriority=d;b=1073741823===b?Og(Te.bind(null,a)):Ng(d,Lh.bind(null,a),{timeout:10*(1073741821-b)-Y()});a.callbackNode=b}}}function Lh(a,b){dd=0;if(b)return b=ka(),Ue(a,b),V(a),null;var c=fd(a);if(0!==c){b=a.callbackNode;if((p&(ca|ma))!==H)throw Error(k(327));
xb();a===U&&c===P||$a(a,c);if(null!==t){var d=p;p|=ca;var e=Mh();do try{rj();break}catch(h){Nh(a,h)}while(1);le();p=d;gd.current=e;if(F===hd)throw b=id,$a(a,c),Ya(a,c),V(a),b;if(null===t)switch(e=a.finishedWork=a.current.alternate,a.finishedExpirationTime=c,d=F,U=null,d){case Xa:case hd:throw Error(k(345));case Oh:Ue(a,2<c?2:c);break;case ad:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(1073741823===ta&&(e=Re+Ph-Y(),10<e)){if(jd){var f=a.lastPingedTime;if(0===f||f>=c){a.lastPingedTime=
c;$a(a,c);break}}f=fd(a);if(0!==f&&f!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}a.timeoutHandle=We(ab.bind(null,a),e);break}ab(a);break;case bd:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(jd&&(e=a.lastPingedTime,0===e||e>=c)){a.lastPingedTime=c;$a(a,c);break}e=fd(a);if(0!==e&&e!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}1073741823!==Yb?d=10*(1073741821-Yb)-Y():1073741823===ta?d=0:(d=10*(1073741821-ta)-5E3,e=Y(),c=10*(1073741821-c)-e,d=e-d,0>d&&(d=0),d=
(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*sj(d/1960))-d,c<d&&(d=c));if(10<d){a.timeoutHandle=We(ab.bind(null,a),d);break}ab(a);break;case Xe:if(1073741823!==ta&&null!==kd){f=ta;var g=kd;d=g.busyMinDurationMs|0;0>=d?d=0:(e=g.busyDelayMs|0,f=Y()-(10*(1073741821-f)-(g.timeoutMs|0||5E3)),d=f<=e?0:e+d-f);if(10<d){Ya(a,c);a.timeoutHandle=We(ab.bind(null,a),d);break}}ab(a);break;default:throw Error(k(329));}V(a);if(a.callbackNode===b)return Lh.bind(null,a)}}return null}function Te(a){var b=
a.lastExpiredTime;b=0!==b?b:1073741823;if((p&(ca|ma))!==H)throw Error(k(327));xb();a===U&&b===P||$a(a,b);if(null!==t){var c=p;p|=ca;var d=Mh();do try{tj();break}catch(e){Nh(a,e)}while(1);le();p=c;gd.current=d;if(F===hd)throw c=id,$a(a,b),Ya(a,b),V(a),c;if(null!==t)throw Error(k(261));a.finishedWork=a.current.alternate;a.finishedExpirationTime=b;U=null;ab(a);V(a)}return null}function uj(){if(null!==bb){var a=bb;bb=null;a.forEach(function(a,c){Ue(c,a);V(c)});ha()}}function Qh(a,b){var c=p;p|=1;try{return a(b)}finally{p=
c,p===H&&ha()}}function Rh(a,b){var c=p;p&=-2;p|=Ye;try{return a(b)}finally{p=c,p===H&&ha()}}function $a(a,b){a.finishedWork=null;a.finishedExpirationTime=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,vj(c));if(null!==t)for(c=t.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&(q(G),q(B));break;case 3:tb();q(G);q(B);break;case 5:te(d);break;case 4:tb();break;case 13:q(D);break;case 19:q(D);break;case 10:me(d)}c=c.return}U=a;t=Sa(a.current,null);
P=b;F=Xa;id=null;Yb=ta=1073741823;kd=null;Xb=0;jd=!1}function Nh(a,b){do{try{le();Sc.current=Tc;if(Uc)for(var c=z.memoizedState;null!==c;){var d=c.queue;null!==d&&(d.pending=null);c=c.next}Ia=0;J=K=z=null;Uc=!1;if(null===t||null===t.return)return F=hd,id=b,t=null;a:{var e=a,f=t.return,g=t,h=b;b=P;g.effectTag|=2048;g.firstEffect=g.lastEffect=null;if(null!==h&&"object"===typeof h&&"function"===typeof h.then){var m=h;if(0===(g.mode&2)){var n=g.alternate;n?(g.updateQueue=n.updateQueue,g.memoizedState=
n.memoizedState,g.expirationTime=n.expirationTime):(g.updateQueue=null,g.memoizedState=null)}var l=0!==(D.current&1),k=f;do{var p;if(p=13===k.tag){var q=k.memoizedState;if(null!==q)p=null!==q.dehydrated?!0:!1;else{var w=k.memoizedProps;p=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:l?!1:!0}}if(p){var y=k.updateQueue;if(null===y){var r=new Set;r.add(m);k.updateQueue=r}else y.add(m);if(0===(k.mode&2)){k.effectTag|=64;g.effectTag&=-2981;if(1===g.tag)if(null===g.alternate)g.tag=17;else{var O=
Ea(1073741823,null);O.tag=Jc;Fa(g,O)}g.expirationTime=1073741823;break a}h=void 0;g=b;var v=e.pingCache;null===v?(v=e.pingCache=new wj,h=new Set,v.set(m,h)):(h=v.get(m),void 0===h&&(h=new Set,v.set(m,h)));if(!h.has(g)){h.add(g);var x=xj.bind(null,e,m,g);m.then(x,x)}k.effectTag|=4096;k.expirationTime=b;break a}k=k.return}while(null!==k);h=Error((na(g.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+
Bd(g))}F!==Xe&&(F=Oh);h=Le(h,g);k=f;do{switch(k.tag){case 3:m=h;k.effectTag|=4096;k.expirationTime=b;var A=Ih(k,m,b);Ug(k,A);break a;case 1:m=h;var u=k.type,B=k.stateNode;if(0===(k.effectTag&64)&&("function"===typeof u.getDerivedStateFromError||null!==B&&"function"===typeof B.componentDidCatch&&(null===La||!La.has(B)))){k.effectTag|=4096;k.expirationTime=b;var H=Jh(k,m,b);Ug(k,H);break a}}k=k.return}while(null!==k)}t=Sh(t)}catch(cj){b=cj;continue}break}while(1)}function Mh(a){a=gd.current;gd.current=
Tc;return null===a?Tc:a}function Vg(a,b){a<ta&&2<a&&(ta=a);null!==b&&a<Yb&&2<a&&(Yb=a,kd=b)}function Kc(a){a>Xb&&(Xb=a)}function tj(){for(;null!==t;)t=Th(t)}function rj(){for(;null!==t&&!yj();)t=Th(t)}function Th(a){var b=zj(a.alternate,a,P);a.memoizedProps=a.pendingProps;null===b&&(b=Sh(a));Uh.current=null;return b}function Sh(a){t=a;do{var b=t.alternate;a=t.return;if(0===(t.effectTag&2048)){b=hj(b,t,P);if(1===P||1!==t.childExpirationTime){for(var c=0,d=t.child;null!==d;){var e=d.expirationTime,
f=d.childExpirationTime;e>c&&(c=e);f>c&&(c=f);d=d.sibling}t.childExpirationTime=c}if(null!==b)return b;null!==a&&0===(a.effectTag&2048)&&(null===a.firstEffect&&(a.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=t.firstEffect),a.lastEffect=t.lastEffect),1<t.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=t:a.firstEffect=t,a.lastEffect=t))}else{b=lj(t);if(null!==b)return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=
2048)}b=t.sibling;if(null!==b)return b;t=a}while(null!==t);F===Xa&&(F=Xe);return null}function Ve(a){var b=a.expirationTime;a=a.childExpirationTime;return b>a?b:a}function ab(a){var b=Cc();Da(99,Aj.bind(null,a,b));return null}function Aj(a,b){do xb();while(null!==Zb);if((p&(ca|ma))!==H)throw Error(k(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;a.finishedWork=null;a.finishedExpirationTime=0;if(c===a.current)throw Error(k(177));a.callbackNode=null;a.callbackExpirationTime=
0;a.callbackPriority=90;a.nextKnownPendingLevel=0;var e=Ve(c);a.firstPendingTime=e;d<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:d<=a.firstSuspendedTime&&(a.firstSuspendedTime=d-1);d<=a.lastPingedTime&&(a.lastPingedTime=0);d<=a.lastExpiredTime&&(a.lastExpiredTime=0);a===U&&(t=U=null,P=0);1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect;if(null!==e){var f=p;p|=ma;Uh.current=null;Ze=tc;var g=kg();if(Xd(g)){if("selectionStart"in
g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{h=(h=g.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&0!==m.rangeCount){h=m.anchorNode;var n=m.anchorOffset,q=m.focusNode;m=m.focusOffset;try{h.nodeType,q.nodeType}catch(sb){h=null;break a}var ba=0,w=-1,y=-1,B=0,D=0,r=g,z=null;b:for(;;){for(var v;;){r!==h||0!==n&&3!==r.nodeType||(w=ba+n);r!==q||0!==m&&3!==r.nodeType||(y=ba+m);3===r.nodeType&&(ba+=r.nodeValue.length);if(null===(v=r.firstChild))break;z=r;
r=v}for(;;){if(r===g)break b;z===h&&++B===n&&(w=ba);z===q&&++D===m&&(y=ba);if(null!==(v=r.nextSibling))break;r=z;z=r.parentNode}r=v}h=-1===w||-1===y?null:{start:w,end:y}}else h=null}h=h||{start:0,end:0}}else h=null;$e={activeElementDetached:null,focusedElem:g,selectionRange:h};tc=!1;l=e;do try{Bj()}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=e;do try{for(g=a,h=b;null!==l;){var x=l.effectTag;x&16&&Wb(l.stateNode,"");if(x&128){var A=l.alternate;if(null!==A){var u=
A.ref;null!==u&&("function"===typeof u?u(null):u.current=null)}}switch(x&1038){case 2:Gh(l);l.effectTag&=-3;break;case 6:Gh(l);l.effectTag&=-3;Qe(l.alternate,l);break;case 1024:l.effectTag&=-1025;break;case 1028:l.effectTag&=-1025;Qe(l.alternate,l);break;case 4:Qe(l.alternate,l);break;case 8:n=l,Dh(g,n,h),Eh(n)}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);u=$e;A=kg();x=u.focusedElem;h=u.selectionRange;if(A!==x&&x&&x.ownerDocument&&jg(x.ownerDocument.documentElement,
x)){null!==h&&Xd(x)&&(A=h.start,u=h.end,void 0===u&&(u=A),"selectionStart"in x?(x.selectionStart=A,x.selectionEnd=Math.min(u,x.value.length)):(u=(A=x.ownerDocument||document)&&A.defaultView||window,u.getSelection&&(u=u.getSelection(),n=x.textContent.length,g=Math.min(h.start,n),h=void 0===h.end?g:Math.min(h.end,n),!u.extend&&g>h&&(n=h,h=g,g=n),n=ig(x,g),q=ig(x,h),n&&q&&(1!==u.rangeCount||u.anchorNode!==n.node||u.anchorOffset!==n.offset||u.focusNode!==q.node||u.focusOffset!==q.offset)&&(A=A.createRange(),
A.setStart(n.node,n.offset),u.removeAllRanges(),g>h?(u.addRange(A),u.extend(q.node,q.offset)):(A.setEnd(q.node,q.offset),u.addRange(A))))));A=[];for(u=x;u=u.parentNode;)1===u.nodeType&&A.push({element:u,left:u.scrollLeft,top:u.scrollTop});"function"===typeof x.focus&&x.focus();for(x=0;x<A.length;x++)u=A[x],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}tc=!!Ze;$e=Ze=null;a.current=c;l=e;do try{for(x=a;null!==l;){var F=l.effectTag;F&36&&oj(x,l.alternate,l);if(F&128){A=void 0;var E=l.ref;if(null!==
E){var G=l.stateNode;switch(l.tag){case 5:A=G;break;default:A=G}"function"===typeof E?E(A):E.current=A}}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=null;Cj();p=f}else a.current=c;if(ld)ld=!1,Zb=a,$b=b;else for(l=e;null!==l;)b=l.nextEffect,l.nextEffect=null,l=b;b=a.firstPendingTime;0===b&&(La=null);1073741823===b?a===af?ac++:(ac=0,af=a):ac=0;"function"===typeof bf&&bf(c.stateNode,d);V(a);if(cd)throw cd=!1,a=Se,Se=null,a;if((p&Ye)!==H)return null;
ha();return null}function Bj(){for(;null!==l;){var a=l.effectTag;0!==(a&256)&&nj(l.alternate,l);0===(a&512)||ld||(ld=!0,Ng(97,function(){xb();return null}));l=l.nextEffect}}function xb(){if(90!==$b){var a=97<$b?97:$b;$b=90;return Da(a,Dj)}}function Dj(){if(null===Zb)return!1;var a=Zb;Zb=null;if((p&(ca|ma))!==H)throw Error(k(331));var b=p;p|=ma;for(a=a.current.firstEffect;null!==a;){try{var c=a;if(0!==(c.effectTag&512))switch(c.tag){case 0:case 11:case 15:case 22:Ah(5,c),Bh(5,c)}}catch(d){if(null===
a)throw Error(k(330));Za(a,d)}c=a.nextEffect;a.nextEffect=null;a=c}p=b;ha();return!0}function Vh(a,b,c){b=Le(c,b);b=Ih(a,b,1073741823);Fa(a,b);a=ed(a,1073741823);null!==a&&V(a)}function Za(a,b){if(3===a.tag)Vh(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){Vh(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if("function"===typeof c.type.getDerivedStateFromError||"function"===typeof d.componentDidCatch&&(null===La||!La.has(d))){a=Le(b,a);a=Jh(c,a,1073741823);Fa(c,a);c=ed(c,1073741823);null!==
c&&V(c);break}}c=c.return}}function xj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);U===a&&P===c?F===bd||F===ad&&1073741823===ta&&Y()-Re<Ph?$a(a,P):jd=!0:Kh(a,c)&&(b=a.lastPingedTime,0!==b&&b<c||(a.lastPingedTime=c,V(a)))}function qj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=ka(),b=Va(b,a,null));a=ed(a,b);null!==a&&V(a)}function Ej(a){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=
b.inject(a);bf=function(a,e){try{b.onCommitFiberRoot(c,a,void 0,64===(a.current.effectTag&64))}catch(f){}};Ne=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}function Fj(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=
null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function Ge(a){a=a.prototype;return!(!a||!a.isReactComponent)}function Gj(a){if("function"===typeof a)return Ge(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===zd)return 11;if(a===Ad)return 14}return 2}function Sa(a,b){var c=a.alternate;null===c?(c=la(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=
null,c.lastEffect=null);c.childExpirationTime=a.childExpirationTime;c.expirationTime=a.expirationTime;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{expirationTime:b.expirationTime,firstContext:b.firstContext,responders:b.responders};c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}function Oc(a,b,c,d,e,f){var g=2;d=a;if("function"===typeof a)Ge(a)&&(g=1);else if("string"===typeof a)g=
5;else a:switch(a){case Ma:return Ha(c.children,e,f,b);case Hj:g=8;e|=7;break;case Af:g=8;e|=1;break;case kc:return a=la(12,c,b,e|8),a.elementType=kc,a.type=kc,a.expirationTime=f,a;case lc:return a=la(13,c,b,e),a.type=lc,a.elementType=lc,a.expirationTime=f,a;case yd:return a=la(19,c,b,e),a.elementType=yd,a.expirationTime=f,a;default:if("object"===typeof a&&null!==a)switch(a.$$typeof){case Cf:g=10;break a;case Bf:g=9;break a;case zd:g=11;break a;case Ad:g=14;break a;case Ef:g=16;d=null;break a;case Df:g=
22;break a}throw Error(k(130,null==a?a:typeof a,""));}b=la(g,c,b,e);b.elementType=a;b.type=d;b.expirationTime=f;return b}function Ha(a,b,c,d){a=la(7,a,d,b);a.expirationTime=c;return a}function qe(a,b,c){a=la(6,a,null,b);a.expirationTime=c;return a}function re(a,b,c){b=la(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}function Ij(a,b,c){this.tag=b;this.current=null;this.containerInfo=
a;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=90;this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Kh(a,b){var c=a.firstSuspendedTime;a=a.lastSuspendedTime;return 0!==c&&c>=b&&a<=b}function Ya(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;
c<b&&(a.firstSuspendedTime=b);if(d>b||0===c)a.lastSuspendedTime=b;b<=a.lastPingedTime&&(a.lastPingedTime=0);b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function yh(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function Ue(a,b){var c=a.lastExpiredTime;if(0===c||c>b)a.lastExpiredTime=b}
function md(a,b,c,d){var e=b.current,f=ka(),g=Vb.suspense;f=Va(f,e,g);a:if(c){c=c._reactInternalFiber;b:{if(Na(c)!==c||1!==c.tag)throw Error(k(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(N(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(k(171));}if(1===c.tag){var m=c.type;if(N(m)){c=Gg(c,m,h);break a}}c=h}else c=Ca;null===b.context?b.context=c:b.pendingContext=c;b=Ea(f,g);b.payload={element:a};d=void 0===
d?null:d;null!==d&&(b.callback=d);Fa(e,b);Ja(e,f);return f}function cf(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Wh(a,b){a=a.memoizedState;null!==a&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function df(a,b){Wh(a,b);(a=a.alternate)&&Wh(a,b)}function ef(a,b,c){c=null!=c&&!0===c.hydrate;var d=new Ij(a,b,c),e=la(3,null,null,2===b?7:1===b?3:0);d.current=e;e.stateNode=d;ne(e);a[Lb]=d.current;c&&0!==b&&
xi(a,9===a.nodeType?a:a.ownerDocument);this._internalRoot=d}function bc(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function Jj(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute("data-reactroot")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new ef(a,0,b?{hydrate:!0}:void 0)}function nd(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;
if("function"===typeof e){var h=e;e=function(){var a=cf(g);h.call(a)}}md(b,g,a,e)}else{f=c._reactRootContainer=Jj(c,d);g=f._internalRoot;if("function"===typeof e){var m=e;e=function(){var a=cf(g);m.call(a)}}Rh(function(){md(b,g,a,e)})}return cf(g)}function Kj(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:gb,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function Xh(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;
if(!bc(b))throw Error(k(200));return Kj(a,b,null,c)}if(!ea)throw Error(k(227));var ki=function(a,b,c,d,e,f,g,h,m){var n=Array.prototype.slice.call(arguments,3);try{b.apply(c,n)}catch(C){this.onError(C)}},yb=!1,gc=null,hc=!1,pd=null,li={onError:function(a){yb=!0;gc=a}},td=null,rf=null,mf=null,ic=null,cb={},jc=[],qd={},db={},rd={},wa=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),M=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.assign,
sd=null,eb=null,fb=null,ee=function(a,b){return a(b)},eg=function(a,b,c,d,e){return a(b,c,d,e)},vd=function(){},vf=ee,Oa=!1,wd=!1,Z=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Scheduler,Lj=Z.unstable_cancelCallback,ff=Z.unstable_now,$f=Z.unstable_scheduleCallback,Mj=Z.unstable_shouldYield,Yh=Z.unstable_requestPaint,Pd=Z.unstable_runWithPriority,Nj=Z.unstable_getCurrentPriorityLevel,Oj=Z.unstable_ImmediatePriority,Zh=Z.unstable_UserBlockingPriority,ag=Z.unstable_NormalPriority,Pj=Z.unstable_LowPriority,
Qj=Z.unstable_IdlePriority,oi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wf=Object.prototype.hasOwnProperty,yf={},xf={},E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){E[a]=
new L(a,0,!1,a,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];E[b]=new L(b,1,!1,a[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){E[a]=new L(a,2,!1,a.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){E[a]=new L(a,2,!1,a,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){E[a]=
new L(a,3,!1,a.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(a){E[a]=new L(a,3,!0,a,null,!1)});["capture","download"].forEach(function(a){E[a]=new L(a,4,!1,a,null,!1)});["cols","rows","size","span"].forEach(function(a){E[a]=new L(a,6,!1,a,null,!1)});["rowSpan","start"].forEach(function(a){E[a]=new L(a,5,!1,a.toLowerCase(),null,!1)});var gf=/[\-:]([a-z])/g,hf=function(a){return a[1].toUpperCase()};"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=
a.replace(gf,hf);E[b]=new L(b,1,!1,a,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!1)});E.xlinkHref=new L("xlinkHref",1,
!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!0)});var da=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;da.hasOwnProperty("ReactCurrentDispatcher")||(da.ReactCurrentDispatcher={current:null});da.hasOwnProperty("ReactCurrentBatchConfig")||(da.ReactCurrentBatchConfig={suspense:null});var si=/^(.*)[\\\/]/,Q="function"===typeof Symbol&&Symbol.for,Pc=Q?Symbol.for("react.element"):60103,gb=Q?Symbol.for("react.portal"):
60106,Ma=Q?Symbol.for("react.fragment"):60107,Af=Q?Symbol.for("react.strict_mode"):60108,kc=Q?Symbol.for("react.profiler"):60114,Cf=Q?Symbol.for("react.provider"):60109,Bf=Q?Symbol.for("react.context"):60110,Hj=Q?Symbol.for("react.concurrent_mode"):60111,zd=Q?Symbol.for("react.forward_ref"):60112,lc=Q?Symbol.for("react.suspense"):60113,yd=Q?Symbol.for("react.suspense_list"):60120,Ad=Q?Symbol.for("react.memo"):60115,Ef=Q?Symbol.for("react.lazy"):60116,Df=Q?Symbol.for("react.block"):60121,zf="function"===
typeof Symbol&&Symbol.iterator,od,xh=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if("http://www.w3.org/2000/svg"!==a.namespaceURI||"innerHTML"in a)a.innerHTML=b;else{od=od||document.createElement("div");od.innerHTML="<svg>"+b.valueOf().toString()+"</svg>";for(b=od.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}),Wb=function(a,
b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b},ib={animationend:nc("Animation","AnimationEnd"),animationiteration:nc("Animation","AnimationIteration"),animationstart:nc("Animation","AnimationStart"),transitionend:nc("Transition","TransitionEnd")},Id={},Of={};wa&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete ib.animationend.animation,delete ib.animationiteration.animation,delete ib.animationstart.animation),"TransitionEvent"in
window||delete ib.transitionend.transition);var $h=oc("animationend"),ai=oc("animationiteration"),bi=oc("animationstart"),ci=oc("transitionend"),Db="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pf=new ("function"===typeof WeakMap?WeakMap:Map),Ab=null,wi=function(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;
if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)lf(a,b[d],c[d]);else b&&lf(a,b,c);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}},qc=[],Rd=!1,fa=[],xa=null,ya=null,za=null,Eb=new Map,Fb=new Map,Jb=[],Nd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),
yi="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" "),dg={},cg=new Map,Td=new Map,Rj=["abort","abort",$h,"animationEnd",ai,"animationIteration",bi,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata",
"loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ci,"transitionEnd","waiting","waiting"];Sd("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
0);Sd("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Sd(Rj,2);(function(a,b){for(var c=0;c<a.length;c++)Td.set(a[c],b)})("change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),0);var Hi=Zh,Gi=Pd,tc=!0,Kb={animationIterationCount:!0,
borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,
strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sj=["Webkit","ms","Moz","O"];Object.keys(Kb).forEach(function(a){Sj.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);Kb[b]=Kb[a]})});var Ii=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ng="$",og="/$",$d="$?",Zd="$!",Ze=null,$e=null,We="function"===typeof setTimeout?setTimeout:void 0,vj="function"===
typeof clearTimeout?clearTimeout:void 0,jf=Math.random().toString(36).slice(2),Aa="__reactInternalInstance$"+jf,vc="__reactEventHandlers$"+jf,Lb="__reactContainere$"+jf,Ba=null,ce=null,wc=null;M(R.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==
typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){this.isPersistent=xc},isPersistent:yc,destructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=yc;this._dispatchInstances=this._dispatchListeners=null}});R.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||
Date.now()},defaultPrevented:null,isTrusted:null};R.extend=function(a){function b(){return c.apply(this,arguments)}var c=this,d=function(){};d.prototype=c.prototype;d=new d;M(d,b.prototype);b.prototype=d;b.prototype.constructor=b;b.Interface=M({},c.Interface,a);b.extend=c.extend;sg(b);return b};sg(R);var Tj=R.extend({data:null}),Uj=R.extend({data:null}),Ni=[9,13,27,32],de=wa&&"CompositionEvent"in window,cc=null;wa&&"documentMode"in document&&(cc=document.documentMode);var Vj=wa&&"TextEvent"in window&&
!cc,xg=wa&&(!de||cc&&8<cc&&11>=cc),wg=String.fromCharCode(32),ua={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},
dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},vg=!1,mb=!1,Wj={eventTypes:ua,extractEvents:function(a,b,c,d,e){var f;if(de)b:{switch(a){case "compositionstart":var g=ua.compositionStart;break b;case "compositionend":g=ua.compositionEnd;break b;case "compositionupdate":g=
ua.compositionUpdate;break b}g=void 0}else mb?tg(a,c)&&(g=ua.compositionEnd):"keydown"===a&&229===c.keyCode&&(g=ua.compositionStart);g?(xg&&"ko"!==c.locale&&(mb||g!==ua.compositionStart?g===ua.compositionEnd&&mb&&(f=rg()):(Ba=d,ce="value"in Ba?Ba.value:Ba.textContent,mb=!0)),e=Tj.getPooled(g,b,c,d),f?e.data=f:(f=ug(c),null!==f&&(e.data=f)),lb(e),f=e):f=null;(a=Vj?Oi(a,c):Pi(a,c))?(b=Uj.getPooled(ua.beforeInput,b,c,d),b.data=a,lb(b)):b=null;return null===f?b:null===b?f:[f,b]}},Qi={color:!0,date:!0,
datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ag={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},Mb=null,Nb=null,kf=!1;wa&&(kf=Tf("input")&&(!document.documentMode||9<document.documentMode));var Xj={eventTypes:Ag,_isInputEventSupported:kf,extractEvents:function(a,b,c,d,e){e=b?Pa(b):window;var f=
e.nodeName&&e.nodeName.toLowerCase();if("select"===f||"input"===f&&"file"===e.type)var g=Si;else if(yg(e))if(kf)g=Wi;else{g=Ui;var h=Ti}else(f=e.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(g=Vi);if(g&&(g=g(a,b)))return zg(g,c,d);h&&h(a,e,b);"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&Ed(e,"number",e.value)}},dc=R.extend({view:null,detail:null}),Yi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},di=0,ei=0,fi=!1,gi=!1,ec=dc.extend({screenX:null,
screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:fe,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=di;di=a.screenX;return fi?"mousemove"===a.type?a.screenX-b:0:(fi=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=ei;ei=a.screenY;return gi?"mousemove"===
a.type?a.screenY-b:0:(gi=!0,0)}}),hi=ec.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),fc={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout",
"pointerover"]}},Yj={eventTypes:fc,extractEvents:function(a,b,c,d,e){var f="mouseover"===a||"pointerover"===a,g="mouseout"===a||"pointerout"===a;if(f&&0===(e&32)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window;if(g){if(g=b,b=(b=c.relatedTarget||c.toElement)?Bb(b):null,null!==b){var h=Na(b);if(b!==h||5!==b.tag&&6!==b.tag)b=null}}else g=null;if(g===b)return null;if("mouseout"===a||"mouseover"===a){var m=ec;var n=fc.mouseLeave;
var l=fc.mouseEnter;var k="mouse"}else if("pointerout"===a||"pointerover"===a)m=hi,n=fc.pointerLeave,l=fc.pointerEnter,k="pointer";a=null==g?f:Pa(g);f=null==b?f:Pa(b);n=m.getPooled(n,g,c,d);n.type=k+"leave";n.target=a;n.relatedTarget=f;c=m.getPooled(l,b,c,d);c.type=k+"enter";c.target=f;c.relatedTarget=a;d=g;k=b;if(d&&k)a:{m=d;l=k;g=0;for(a=m;a;a=pa(a))g++;a=0;for(b=l;b;b=pa(b))a++;for(;0<g-a;)m=pa(m),g--;for(;0<a-g;)l=pa(l),a--;for(;g--;){if(m===l||m===l.alternate)break a;m=pa(m);l=pa(l)}m=null}else m=
null;l=m;for(m=[];d&&d!==l;){g=d.alternate;if(null!==g&&g===l)break;m.push(d);d=pa(d)}for(d=[];k&&k!==l;){g=k.alternate;if(null!==g&&g===l)break;d.push(k);k=pa(k)}for(k=0;k<m.length;k++)be(m[k],"bubbled",n);for(k=d.length;0<k--;)be(d[k],"captured",c);return 0===(e&64)?[n]:[n,c]}},Qa="function"===typeof Object.is?Object.is:Zi,$i=Object.prototype.hasOwnProperty,Zj=wa&&"documentMode"in document&&11>=document.documentMode,Eg={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},
dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},nb=null,he=null,Pb=null,ge=!1,ak={eventTypes:Eg,extractEvents:function(a,b,c,d,e,f){e=f||(d.window===d?d.document:9===d.nodeType?d:d.ownerDocument);if(!(f=!e)){a:{e=Jd(e);f=rd.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;e=b?Pa(b):window;switch(a){case "focus":if(yg(e)||"true"===e.contentEditable)nb=e,he=b,Pb=null;break;case "blur":Pb=he=nb=null;
break;case "mousedown":ge=!0;break;case "contextmenu":case "mouseup":case "dragend":return ge=!1,Dg(c,d);case "selectionchange":if(Zj)break;case "keydown":case "keyup":return Dg(c,d)}return null}},bk=R.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ck=R.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),dk=dc.extend({relatedTarget:null}),ek={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",
Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",
224:"Meta"},gk=dc.extend({key:function(a){if(a.key){var b=ek[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=Ac(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?fk[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:fe,charCode:function(a){return"keypress"===a.type?Ac(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===
a.type?Ac(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),hk=ec.extend({dataTransfer:null}),ik=dc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:fe}),jk=R.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),kk=ec.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?
-a.wheelDelta:0},deltaZ:null,deltaMode:null}),lk={eventTypes:dg,extractEvents:function(a,b,c,d,e){e=cg.get(a);if(!e)return null;switch(a){case "keypress":if(0===Ac(c))return null;case "keydown":case "keyup":a=gk;break;case "blur":case "focus":a=dk;break;case "click":if(2===c.button)return null;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":a=ec;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":a=
hk;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":a=ik;break;case $h:case ai:case bi:a=bk;break;case ci:a=jk;break;case "scroll":a=dc;break;case "wheel":a=kk;break;case "copy":case "cut":case "paste":a=ck;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":a=hi;break;default:a=R}b=a.getPooled(e,b,c,d);lb(b);return b}};(function(a){if(ic)throw Error(k(101));
ic=Array.prototype.slice.call(a);nf()})("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));(function(a,b,c){td=a;rf=b;mf=c})(ae,Hb,Pa);pf({SimpleEventPlugin:lk,EnterLeaveEventPlugin:Yj,ChangeEventPlugin:Xj,SelectEventPlugin:ak,BeforeInputEventPlugin:Wj});var ie=[],ob=-1,Ca={},B={current:Ca},G={current:!1},Ra=Ca,bj=Pd,je=$f,Rg=Lj,aj=Nj,Dc=Oj,Ig=Zh,Jg=ag,Kg=Pj,Lg=Qj,Qg={},yj=Mj,Cj=void 0!==Yh?Yh:function(){},qa=null,
Ec=null,ke=!1,ii=ff(),Y=1E4>ii?ff:function(){return ff()-ii},Ic={current:null},Hc=null,qb=null,Gc=null,Tg=0,Jc=2,Ga=!1,Vb=da.ReactCurrentBatchConfig,$g=(new ea.Component).refs,Mc={isMounted:function(a){return(a=a._reactInternalFiber)?Na(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;d=Va(d,a,e);e=Ea(d,e);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;
d=Va(d,a,e);e=Ea(d,e);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=ka(),d=Vb.suspense;c=Va(c,a,d);d=Ea(c,d);d.tag=Jc;void 0!==b&&null!==b&&(d.callback=b);Fa(a,d);Ja(a,c)}},Qc=Array.isArray,wb=ah(!0),Fe=ah(!1),Sb={},ja={current:Sb},Ub={current:Sb},Tb={current:Sb},D={current:0},Sc=da.ReactCurrentDispatcher,X=da.ReactCurrentBatchConfig,Ia=0,z=null,K=null,J=null,Uc=!1,Tc={readContext:W,useCallback:S,useContext:S,
useEffect:S,useImperativeHandle:S,useLayoutEffect:S,useMemo:S,useReducer:S,useRef:S,useState:S,useDebugValue:S,useResponder:S,useDeferredValue:S,useTransition:S},dj={readContext:W,useCallback:ih,useContext:W,useEffect:eh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ze(4,2,gh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ze(4,2,a,b)},useMemo:function(a,b){var c=ub();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=
ub();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=ch.bind(null,z,a);return[d.memoizedState,a]},useRef:function(a){var b=ub();a={current:a};return b.memoizedState=a},useState:xe,useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=xe(a),d=c[0],e=c[1];eh(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=
xe(!1),c=b[0];b=b[1];return[ih(Ce.bind(null,b,a),[b,a]),c]}},ej={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Vc,useRef:dh,useState:function(a){return Vc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Vc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Vc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,
b,a),[b,a]),c]}},fj={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Wc,useRef:dh,useState:function(a){return Wc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Wc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Wc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,b,a),[b,a]),c]}},ra=null,Ka=null,Wa=
!1,gj=da.ReactCurrentOwner,ia=!1,Je={dehydrated:null,retryTime:0};var jj=function(a,b,c,d){for(c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};var wh=function(a){};var ij=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var g=b.stateNode;Ta(ja.current);a=null;switch(c){case "input":f=
Cd(g,f);d=Cd(g,d);a=[];break;case "option":f=Fd(g,f);d=Fd(g,d);a=[];break;case "select":f=M({},f,{value:void 0});d=M({},d,{value:void 0});a=[];break;case "textarea":f=Gd(g,f);d=Gd(g,d);a=[];break;default:"function"!==typeof f.onClick&&"function"===typeof d.onClick&&(g.onclick=uc)}Ud(c,d);var h,m;c=null;for(h in f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if("style"===h)for(m in g=f[h],g)g.hasOwnProperty(m)&&(c||(c={}),c[m]="");else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==
h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(db.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var k=d[h];g=null!=f?f[h]:void 0;if(d.hasOwnProperty(h)&&k!==g&&(null!=k||null!=g))if("style"===h)if(g){for(m in g)!g.hasOwnProperty(m)||k&&k.hasOwnProperty(m)||(c||(c={}),c[m]="");for(m in k)k.hasOwnProperty(m)&&g[m]!==k[m]&&(c||(c={}),c[m]=k[m])}else c||(a||(a=[]),a.push(h,c)),c=k;else"dangerouslySetInnerHTML"===h?(k=k?k.__html:void 0,g=g?g.__html:void 0,null!=k&&g!==k&&(a=a||
[]).push(h,k)):"children"===h?g===k||"string"!==typeof k&&"number"!==typeof k||(a=a||[]).push(h,""+k):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(db.hasOwnProperty(h)?(null!=k&&oa(e,h),a||g===k||(a=[])):(a=a||[]).push(h,k))}c&&(a=a||[]).push("style",c);e=a;if(b.updateQueue=e)b.effectTag|=4}};var kj=function(a,b,c,d){c!==d&&(b.effectTag|=4)};var pj="function"===typeof WeakSet?WeakSet:Set,wj="function"===typeof WeakMap?WeakMap:Map,sj=Math.ceil,gd=da.ReactCurrentDispatcher,
Uh=da.ReactCurrentOwner,H=0,Ye=8,ca=16,ma=32,Xa=0,hd=1,Oh=2,ad=3,bd=4,Xe=5,p=H,U=null,t=null,P=0,F=Xa,id=null,ta=1073741823,Yb=1073741823,kd=null,Xb=0,jd=!1,Re=0,Ph=500,l=null,cd=!1,Se=null,La=null,ld=!1,Zb=null,$b=90,bb=null,ac=0,af=null,dd=0,Ja=function(a,b){if(50<ac)throw ac=0,af=null,Error(k(185));a=ed(a,b);if(null!==a){var c=Cc();1073741823===b?(p&Ye)!==H&&(p&(ca|ma))===H?Te(a):(V(a),p===H&&ha()):V(a);(p&4)===H||98!==c&&99!==c||(null===bb?bb=new Map([[a,b]]):(c=bb.get(a),(void 0===c||c>b)&&bb.set(a,
b)))}};var zj=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||G.current)ia=!0;else{if(d<c){ia=!1;switch(b.tag){case 3:sh(b);Ee();break;case 5:bh(b);if(b.mode&4&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:N(b.type)&&Bc(b);break;case 4:se(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;e=b.type._context;y(Ic,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){d=b.child.childExpirationTime;
if(0!==d&&d>=c)return th(a,b,c);y(D,D.current&1);b=sa(a,b,c);return null!==b?b.sibling:null}y(D,D.current&1);break;case 19:d=b.childExpirationTime>=c;if(0!==(a.effectTag&64)){if(d)return vh(a,b,c);b.effectTag|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null);y(D,D.current);if(!d)return null}return sa(a,b,c)}ia=!1}}else ia=!1;b.expirationTime=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;e=pb(b,B.current);rb(b,c);e=we(null,
b,d,a,e,c);b.effectTag|=1;if("object"===typeof e&&null!==e&&"function"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(N(d)){var f=!0;Bc(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;ne(b);var g=d.getDerivedStateFromProps;"function"===typeof g&&Lc(b,d,g,a);e.updater=Mc;b.stateNode=e;e._reactInternalFiber=b;pe(b,d,a,c);b=Ie(null,b,d,!0,f,c)}else b.tag=0,T(null,b,e,c),b=b.child;return b;case 16:a:{e=b.elementType;null!==a&&(a.alternate=
null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;ri(e);if(1!==e._status)throw e._result;e=e._result;b.type=e;f=b.tag=Gj(e);a=aa(e,a);switch(f){case 0:b=He(null,b,e,a,c);break a;case 1:b=rh(null,b,e,a,c);break a;case 11:b=nh(null,b,e,a,c);break a;case 14:b=oh(null,b,e,aa(e.type,a),d,c);break a}throw Error(k(306,e,""));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),He(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),rh(a,b,d,e,c);
case 3:sh(b);d=b.updateQueue;if(null===a||null===d)throw Error(k(282));d=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;oe(a,b);Qb(b,d,null,c);d=b.memoizedState.element;if(d===e)Ee(),b=sa(a,b,c);else{if(e=b.stateNode.hydrate)Ka=kb(b.stateNode.containerInfo.firstChild),ra=b,e=Wa=!0;if(e)for(c=Fe(b,null,d,c),b.child=c;c;)c.effectTag=c.effectTag&-3|1024,c=c.sibling;else T(a,b,d,c),Ee();b=b.child}return b;case 5:return bh(b),null===a&&De(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:
null,g=e.children,Yd(d,e)?g=null:null!==f&&Yd(d,f)&&(b.effectTag|=16),qh(a,b),b.mode&4&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(T(a,b,g,c),b=b.child),b;case 6:return null===a&&De(b),null;case 13:return th(a,b,c);case 4:return se(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=wb(b,null,d,c):T(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),nh(a,b,d,e,c);case 7:return T(a,b,b.pendingProps,c),b.child;case 8:return T(a,
b,b.pendingProps.children,c),b.child;case 12:return T(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;y(Ic,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=Qa(h,f)?0:("function"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!G.current){b=sa(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var m=h.dependencies;if(null!==
m){g=h.child;for(var l=m.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=Ea(c,null),l.tag=Jc,Fa(h,l));h.expirationTime<c&&(h.expirationTime=c);l=h.alternate;null!==l&&l.expirationTime<c&&(l.expirationTime=c);Sg(h.return,c);m.expirationTime<c&&(m.expirationTime=c);break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=
g}T(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,rb(b,c),e=W(e,f.unstable_observedBits),d=d(e),b.effectTag|=1,T(a,b,d,c),b.child;case 14:return e=b.type,f=aa(e,b.pendingProps),f=aa(e.type,f),oh(a,b,e,f,d,c);case 15:return ph(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,N(d)?(a=!0,Bc(b)):a=!1,rb(b,c),Yg(b,d,e),pe(b,d,e,c),Ie(null,
b,d,!0,a,c);case 19:return vh(a,b,c)}throw Error(k(156,b.tag));};var bf=null,Ne=null,la=function(a,b,c,d){return new Fj(a,b,c,d)};ef.prototype.render=function(a){md(a,this._internalRoot,null,null)};ef.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;md(null,a,null,function(){b[Lb]=null})};var Di=function(a){if(13===a.tag){var b=Fc(ka(),150,100);Ja(a,b);df(a,b)}};var Yf=function(a){13===a.tag&&(Ja(a,3),df(a,3))};var Bi=function(a){if(13===a.tag){var b=ka();b=Va(b,a,null);Ja(a,
b);df(a,b)}};sd=function(a,b,c){switch(b){case "input":Dd(a,c);b=c.name;if("radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=ae(d);if(!e)throw Error(k(90));Gf(d);Dd(d,e)}}}break;case "textarea":Lf(a,c);break;case "select":b=c.value,null!=b&&hb(a,!!c.multiple,b,!1)}};(function(a,b,c,d){ee=a;eg=b;vd=c;vf=d})(Qh,function(a,b,c,d,e){var f=p;p|=4;
try{return Da(98,a.bind(null,b,c,d,e))}finally{p=f,p===H&&ha()}},function(){(p&(1|ca|ma))===H&&(uj(),xb())},function(a,b){var c=p;p|=2;try{return a(b)}finally{p=c,p===H&&ha()}});var mk={Events:[Hb,Pa,ae,pf,qd,lb,function(a){Kd(a,Ki)},sf,tf,sc,pc,xb,{current:!1}]};(function(a){var b=a.findFiberByHostInstance;return Ej(M({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Sf(a);
return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Bb,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"});I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mk;I.createPortal=Xh;I.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===
b){if("function"===typeof a.render)throw Error(k(188));throw Error(k(268,Object.keys(a)));}a=Sf(b);a=null===a?null:a.stateNode;return a};I.flushSync=function(a,b){if((p&(ca|ma))!==H)throw Error(k(187));var c=p;p|=1;try{return Da(99,a.bind(null,b))}finally{p=c,ha()}};I.hydrate=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!0,c)};I.render=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!1,c)};I.unmountComponentAtNode=function(a){if(!bc(a))throw Error(k(40));return a._reactRootContainer?
(Rh(function(){nd(null,null,a,!1,function(){a._reactRootContainer=null;a[Lb]=null})}),!0):!1};I.unstable_batchedUpdates=Qh;I.unstable_createPortal=function(a,b){return Xh(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};I.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!bc(c))throw Error(k(200));if(null==a||void 0===a._reactInternalFiber)throw Error(k(38));return nd(a,b,c,!1,d)};I.version="16.13.1"});
</script>
    <script>const e = React.createElement;

function pathToString(path) {
  if (path[0] === '/') {
    return '/' + path.slice(1).join('/');
  } else {
    return path.join('/');
  }
}

function findCommonPath(files) {
  if (!files || !files.length) {
    return [];
  }

  function isPrefix(arr, prefix) {
    if (arr.length < prefix.length) {
      return false;
    }
    for (let i = prefix.length - 1; i >= 0; --i) {
      if (arr[i] !== prefix[i]) {
        return false;
      }
    }
    return true;
  }

  let commonPath = files[0].path.slice(0, -1);
  while (commonPath.length) {
    if (files.every(file => isPrefix(file.path, commonPath))) {
      break;
    }
    commonPath.pop();
  }
  return commonPath;
}

function findFolders(files) {
  if (!files || !files.length) {
    return [];
  }

  let folders = files.filter(file => file.path.length > 1).map(file => file.path[0]);
  folders = [...new Set(folders)]; // unique
  folders.sort();

  folders = folders.map(folder => {
    let filesInFolder = files
      .filter(file => file.path[0] === folder)
      .map(file => ({
        ...file,
        path: file.path.slice(1),
        parent: [...file.parent, file.path[0]],
      }));

    const children = findFolders(filesInFolder); // recursion

    return {
      is_folder: true,
      path: [folder],
      parent: files[0].parent,
      children,
      covered: children.reduce((sum, file) => sum + file.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.coverable, 0),
      prevRun: {
        covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
        coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
      }
    };
  });

  return [
    ...folders,
    ...files.filter(file => file.path.length === 1),
  ];
}

class App extends React.Component {
  constructor(...args) {
    super(...args);

    this.state = {
      current: [],
    };
  }

  componentDidMount() {
    this.updateStateFromLocation();
    window.addEventListener("hashchange", () => this.updateStateFromLocation(), false);
  }

  updateStateFromLocation() {
    if (window.location.hash.length > 1) {
      const current = window.location.hash.substr(1).split('/');
      this.setState({current});
    } else {
      this.setState({current: []});
    }
  }

  getCurrentPath() {
    let file = this.props.root;
    let path = [file];
    for (let p of this.state.current) {
      file = file.children.find(file => file.path[0] === p);
      if (!file) {
        return path;
      }
      path.push(file);
    }
    return path;
  }

  render() {
    const path = this.getCurrentPath();
    const file = path[path.length - 1];

    let w = null;
    if (file.is_folder) {
      w = e(FilesList, {
        folder: file,
        onSelectFile: this.selectFile.bind(this),
        onBack: path.length > 1 ? this.back.bind(this) : null,
      });
    } else {
      w = e(DisplayFile, {
        file,
        onBack: this.back.bind(this),
      });
    }

    return e('div', {className: 'app'}, w);
  }

  selectFile(file) {
    this.setState(({current}) => {
      return {current: [...current, file.path[0]]};
    }, () => this.updateHash());
  }

  back(file) {
    this.setState(({current}) => {
      return {current: current.slice(0, current.length - 1)};
    }, () => this.updateHash());
  }

  updateHash() {
    if (!this.state.current || !this.state.current.length) {
      window.location = '#';
    } else {
      window.location = '#' + this.state.current.join('/');
    }
  }
}

function FilesList({folder, onSelectFile, onBack}) {
  let files = folder.children;
  return e('div', {className: 'display-folder'},
    e(FileHeader, {file: folder, onBack}),
    e('table', {className: 'files-list'},
      e('thead', {className: 'files-list__head'},
        e('tr', null,
          e('th', null, "Path"),
          e('th', null, "Coverage")
        )
      ),
      e('tbody', {className: 'files-list__body'},
        files.map(file => e(File, {file, onClick: onSelectFile}))
      )
    )
  );
}

function File({file, onClick}) {
  const coverage = file.coverable ? file.covered / file.coverable * 100 : -1;
  const coverageDelta = file.prevRun &&
    (file.covered / file.coverable * 100 - file.prevRun.covered / file.prevRun.coverable * 100);

  return e('tr', {
      className: 'files-list__file'
        + (coverage >= 0 && coverage < 50 ? ' files-list__file_low': '')
        + (coverage >= 50 && coverage < 80 ? ' files-list__file_medium': '')
        + (coverage >= 80 ? ' files-list__file_high': '')
        + (file.is_folder ? ' files-list__file_folder': ''),
      onClick: () => onClick(file),
    },
    e('td', null, e('a', null, pathToString(file.path))),
    e('td', null,
      file.covered + ' / ' + file.coverable +
      (coverage >= 0 ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e('span', {title: 'Change from the previous run'},
        (coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : ''))
    )
  );
}

function DisplayFile({file, onBack}) {
  return e('div', {className: 'display-file'},
    e(FileHeader, {file, onBack}),
    e(FileContent, {file})
  );
}

function FileHeader({file, onBack}) {
  const coverage = file.covered / file.coverable * 100;
  const coverageDelta = file.prevRun && (coverage - file.prevRun.covered / file.prevRun.coverable * 100);

  return e('div', {className: 'file-header'},
    onBack ? e('a', {className: 'file-header__back', onClick: onBack}, 'Back') : null,
    e('div', {className: 'file-header__name'}, pathToString([...file.parent, ...file.path])),
    e('div', {className: 'file-header__stat'},
      'Covered: ' + file.covered + ' of ' + file.coverable +
      (file.coverable ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e('span', {title: 'Change from the previous run'},
        (coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : ''))
    )
  );
}

function FileContent({file}) {
  return e('div', {className: 'file-content'},
    file.content.split(/\r?\n/).map((line, index) => {
      const trace = file.traces.find(trace => trace.line === index + 1);
      const covered = trace && trace.stats.Line;
      const uncovered = trace && !trace.stats.Line;
      return e('pre', {
          className: 'code-line'
            + (covered ? ' code-line_covered' : '')
            + (uncovered ? ' code-line_uncovered' : ''),
          title: trace ? JSON.stringify(trace.stats, null, 2) : null,
        }, line);
    })
  );
}

(function(){
  const commonPath = findCommonPath(data.files);
  const prevFilesMap = new Map();

  previousData && previousData.files.forEach((file) => {
    const path = file.path.slice(commonPath.length).join('/');
    prevFilesMap.set(path, file);
  });

  const files = data.files.map((file) => {
    const path = file.path.slice(commonPath.length);
    const { covered = 0, coverable = 0 } = prevFilesMap.get(path.join('/')) || {};
    return {
      ...file,
      path,
      parent: commonPath,
      prevRun: { covered, coverable },
    };
  });

  const children = findFolders(files);

  const root = {
    is_folder: true,
    children,
    path: commonPath,
    parent: [],
    covered: children.reduce((sum, file) => sum + file.covered, 0),
    coverable: children.reduce((sum, file) => sum + file.coverable, 0),
    prevRun: {
      covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
    }
  };

  ReactDOM.render(e(App, {root, prevFilesMap}), document.getElementById('root'));
}());
</script>
</body>
</html>